<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
    <title>Chaojie&#x27;s Home âœï¸</title>
    <subtitle>The place where Chaojie writes</subtitle>
    <link href="https://chaojie.fun/atom.xml" rel="self" type="application/atom+xml"/>
    <link href="https://chaojie.fun"/>
    <generator uri="https://www.getzola.org/">Zola</generator>
    <updated>2023-08-30T14:00:33+08:00</updated>
    <id>https://chaojie.fun/atom.xml</id>
    <entry xml:lang="en">
        <title>å†è§è±†ç“£ï¼Œå†è§åŒ—äº¬</title>
        <published>2023-08-30T14:00:33+08:00</published>
        <updated>2023-08-30T14:00:33+08:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://chaojie.fun/articles/bye-beijing/" type="text/html"/>
        <id>https://chaojie.fun/articles/bye-beijing/</id>
        <content type="html">&lt;p&gt;æˆ‘è·Ÿ Lan è¯´åˆ°ï¼šâ€œä»¥åå¯èƒ½å†ä¹Ÿé‡ä¸åˆ°è¿™ä¹ˆå¥½çš„åŒäº‹äº†ã€‚â€&lt;&#x2F;p&gt;
&lt;p&gt;ä»ä¸œååˆ°å…†ç»´å·¥ä¸šå›­çš„è±†ç“£ï¼Œæˆ‘æ¯å¤©ä¸Šç­éƒ½è¦èµ°ä¸€æ¡å°è·¯ï¼Œåæ²³ä»è¿™é‡Œæµè¿‡ï¼Œæœ‰ä¸¤åªæµæµªç‹—å’Œæ‘†åœ°æ‘Šçš„å¤§çˆ·å¤§å¦ˆä»¬ã€‚æ¯æ¬¡èµ¶ä¸ä¸Šå…¬å¸æ—©é¥­çš„æ—¶å€™ï¼Œæˆ‘å°±ä¼šåœ¨è·¯è¾¹çš„èœå¸‚åœºé—¨å£ä¹°ä¸ªæœ€çˆ±åƒçš„å±±ä¸œè„†ç…é¥¼ï¼ˆä¸æ˜¯é‚£ç§è½¯å¡Œå¡Œçš„â€œè€åŒ—äº¬â€ç…é¥¼ï¼‰ã€‚å‡ºäº†è¿™æ¡å°è·¯ï¼Œæ—©é«˜å³°ä¼šå‘ä½ æ‰‘æ¥ï¼Œæˆ‘å–œæ¬¢è¿™ç§åŸå¸‚é†’æ¥çš„æ„Ÿè§‰ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å¤å¤©çš„æ—¶å€™ï¼Œæˆ‘ç»å¸¸ä¼šå’Œ Lan å¸¦ç€æ´¾æ´¾èµ°è¿™æ¡å°è·¯ï¼Œæ²¿ç€æ²³è¾¹ä»å®¶é‡Œèµ°åˆ°é¢å ¤æ¸¯å†èµ°å›å»ï¼ˆç”¨ç°åœ¨æ—¶é«¦çš„è¯å« CityWalkï¼‰ï¼Œè·¯ä¸Šä¼šç¢°åˆ° Luckyã€é²æ¯”ã€ç±³å°”ï¼ˆä¸€åªå¸…æ°”å¨çŒ›çš„ä¿„ç½—æ–¯é€€å½¹å†›çŠ¬ï¼‰ã€æ¥ç¦ã€å°äº”ã€è™å­ï¼ˆæœ‰ç€æ°´æ±ªæ±ªå¤§çœ¼ç›çš„çŒ›çŠ¬ï¼‰ã€é’±é’±ã€å¯ä¹ï¼Œå¯èƒ½è¿˜æœ‰â€œå§‘å¨˜â€ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;è¿™æ¡è·¯æ˜¯æˆ‘ä¸è±†ç“£çš„è¿æ¥ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ‹¿åˆ°è±†ç“£ Offer çš„é‚£å¤©ï¼ŒLan åœ¨å®¶é‡Œæ¿€åŠ¨çš„è¹¦äº†èµ·æ¥ã€‚æˆ‘ç»˜å£°ç»˜è‰²çš„ç»™å¥¹æè¿°ç€ä¸€å¤´é•¿å‘è¿˜å†™å°è¯´çš„è‹è€å¸ˆæ˜¯æœ‰å¤šé…·ï¼Œè¯´ç€åªåŠ ç¾¤ä½†ä»æ²¡å‚ä¸è¿‡çš„å¾’æ­¥æ´»åŠ¨å¤šæœ‰æ„æ€ï¼Œè¯´ç€åç‚¹åŠåˆ°å…¬å¸åŒäº‹éƒ½æ²¡åˆ°è§‰å¾—è¿™åœ°æ–¹æ¥å¯¹äº†çš„è°ƒä¾ƒï¼Œè¯´ç€ä¸€ç¾¤ç¾æ¶©çš„å·¥ç¨‹å¸ˆè™½ç„¶é¢å¯¹é¢å´åªåœ¨ç¾¤é‡ŒèŠå¤©çš„è¿‡ç¨‹ï¼Œè¯´ç€é¬¼å¤§çˆ·å¦‚ä½•ç”¨ç ´é“œçƒ‚é“ç»„è£…ç©éŸ³ä¹ï¼Œè¯´ç€çˆ±æ¢é©¬ç”²çš„å¢è€å¸ˆã€ç§è¥¿çº¢æŸ¿çš„å­¬çˆ·çˆ·ï¼Œè¯´ç€çˆ±èšé¤çš„ Jintongã€å–å¯ä¹ç¢°æ¯çš„ Xiaofanã€å†™è¯—çš„ kusaç­‰ç­‰ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘è·Ÿ Lan åœ¨è±†ç“£ç›¸è¯†ã€‚è¿™é‡Œæœ‰æˆ‘æœ€ç¾å¥½çš„å›å¿†ã€‚è±†ç“£æ›´åƒä¸€ä¸ªä¹Œæ‰˜é‚¦ï¼Œæ„ç­‘äº†æˆ‘å…³äºå·¥ä½œã€åŒäº‹ã€æŠ€æœ¯çš„å®Œç¾æƒ³è±¡ã€‚ä»é˜¿åŒ—åœ¨è±†ç“£èƒ¡åŒå†™ä¸‹ç¬¬ä¸€è¡Œä»£ç çš„é‚£ä¸€åˆ»ï¼Œæˆ‘æ³¨å®šè¦è¯´ä¸€å¥ï¼šæœ‰å¹¸åŠ å…¥è±†ç“£ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;åœ¨åŒ—äº¬å‘†äº†äº†å…­å¹´ï¼Œæ¬äº†ä¸‰æ¬¡å®¶ï¼Œæ¡äº†æ´¾æ´¾è¿™æ¡æµ·æ·€ç‹—ï¼ˆä»¥åå°±æœ‰å¤§è‰åŸå»ç©äº†ï¼‰ï¼Œåœ¨äº”ç¯ç”Ÿæ´»åŒºè¾—è½¬ï¼Œç•™ä¸‹è®¸å¤šåªåœ¨å˜´é‡Œçš„è¡ŒåŠ¨ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å…«æœˆæœ«çš„è¿™æ—¶å€™å˜å¾—å‡‰å¿«èµ·æ¥ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å†è§è±†ç“£ï¼Œå†è§åŒ—äº¬ğŸ‘‹ğŸ»ã€‚&lt;&#x2F;p&gt;
</content>
    </entry>
    <entry xml:lang="en">
        <title>å’Œå¥¹åœ¨ä¸€èµ·</title>
        <published>2023-07-10T10:18:00+08:00</published>
        <updated>2023-07-10T10:18:00+08:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://chaojie.fun/articles/he-ta-zai-yi-qi/" type="text/html"/>
        <id>https://chaojie.fun/articles/he-ta-zai-yi-qi/</id>
        <content type="html">&lt;p&gt;â€”â€”è‚é²è¾¾&lt;&#x2F;p&gt;
&lt;p&gt;æ­£å› ä¸ºæ—¶ä¸–è‰°è¾›ï¼Œä½ è¦ç­‰ç€æˆ‘ï¼Œ&lt;&#x2F;p&gt;
&lt;p&gt;è®©æˆ‘ä»¬æ€€ç€å¸Œæœ›å»ç”Ÿæ´»ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æŠŠä½ çš„çº¤ç»†çš„å°æ‰‹ç»™æˆ‘ï¼š&lt;&#x2F;p&gt;
&lt;p&gt;è®©æˆ‘ä»¬å»æ”€ç™»å’Œç»å—ï¼Œ&lt;&#x2F;p&gt;
&lt;p&gt;å»æ„Ÿå—å’Œçªç ´ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘ä»¬æ›¾é—¯è¿‡è†æ£˜ä¹‹åœ°ï¼Œ&lt;&#x2F;p&gt;
&lt;p&gt;å±ˆèº«äºçŸ³å—å †ç Œçš„çªé‡Œï¼Œ&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘ä»¬åˆé‡æ–°ç»“æˆä¼´ä¾£ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ­£å› ä¸ºå²æœˆæ¼«é•¿ï¼Œä½ è¦ç­‰ç€æˆ‘ï¼š&lt;&#x2F;p&gt;
&lt;p&gt;å¸¦ä¸Šä¸€åªç¯®å­ï¼Œä½ çš„é“é”¨ã€ä½ çš„è¡£å±¥ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘ä»¬ç°åœ¨è¦åšçš„ï¼Œ&lt;&#x2F;p&gt;
&lt;p&gt;ä¸ä»…ä»…æ˜¯ä¸ºäº†çŸ³ç«¹å’Œä¸é¦™ï¼Œ&lt;&#x2F;p&gt;
&lt;p&gt;ä¹Ÿä¸æ˜¯å»å¯»æ‰¾èœœç³–ï¼Œ&lt;&#x2F;p&gt;
&lt;p&gt;éœ€è¦ç”¨æˆ‘ä»¬çš„æ‰‹ï¼Œ&lt;&#x2F;p&gt;
&lt;p&gt;å»å†²åˆºï¼Œå»æ”¾ç«ï¼Œ&lt;&#x2F;p&gt;
&lt;p&gt;çœ‹è¿™é™©æ¶çš„ä¸–é“æ˜¯å¦æ•¢ï¼Œ&lt;&#x2F;p&gt;
&lt;p&gt;å‘è¿™åšå®šçš„å››åªæ‰‹å’Œå››åªçœ¼ç›æŒ‘æˆ˜ã€‚&lt;&#x2F;p&gt;
</content>
    </entry>
    <entry xml:lang="en">
        <title>About Me</title>
        <published>2023-04-01T00:00:00+00:00</published>
        <updated>2023-04-01T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://chaojie.fun/about/" type="text/html"/>
        <id>https://chaojie.fun/about/</id>
        <content type="html">&lt;blockquote&gt;
&lt;h4 id=&quot;nu-hai-dao-jin-gua-fu&quot;&gt;å¥³æµ·ç›—é‡‘å¯¡å¦‡&lt;&#x2F;h4&gt;
&lt;p&gt;æèµ·â€œå¥³æµ·ç›—â€ä¸€è¯ï¼Œéš¾å…å¼•èµ·ä¸å¤ªèˆ’æœçš„å›å¿†ï¼Œè®©äººæƒ³èµ·ä¸€ä¸ªå·²ç»è¿‡æ—¶çš„è¯´å”±å‰§ï¼Œä½†åœ¨ä»†å¦‡ä¸‹å¥³ä»¬æ´¥æ´¥ä¹é“çš„é—²è°ˆä¸­ï¼Œæ­Œèˆæ¼”å‘˜æ‰®æ¼”çš„å¥³æµ·ç›—æˆäº†å½¢å½¢è‰²è‰²çš„å¡é€šç‰‡é‡Œçš„äººç‰©ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;åœ¨å¥¹é•‡å®šçš„æŒ‡æŒ¥ä¸‹ï¼Œæµ·ç›—èˆ¹é©¶å‘å…¬æµ·å’Œå±é™©ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æœ‰æ¡ä¸ç´Šçš„å†’é™©æŒç»­äº†åä¸‰å¹´ã€‚èˆ¹é˜Ÿç”±å…­ä¸ªå°é˜Ÿç»„æˆï¼Œåˆ†åˆ«æ‚¬æŒ‚çº¢ã€é»„ã€ç»¿ã€é»‘ã€ç´«è‰²æ——å’ŒæŒ‡æŒ¥èˆ°çš„èŸ’è›‡æ——ã€‚å°é˜Ÿå¤´ç›®åå«é¸ŸçŸ³ã€&lt;strong&gt;æ½®æˆ’(chaojie)&lt;&#x2F;strong&gt;ã€é˜Ÿå®ã€é±¼æµªå’Œæ²æ—¥ã€‚é‡‘å¯¡å¦‡äº²è‡ªæ‹Ÿè®¢çš„è§„ç« ä¸¥å‰éå‡¡ï¼Œç®€æ´æ˜äº†çš„æ–‡å­—æ’é™¤äº†å®˜æ ·æ–‡ç« è™šå¼ å£°åŠ¿çš„å†—è¯èµ˜å¥ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å‚æ™šæ—¶åˆ†ï¼Œå¤©ç©ºä¸­æ»¡æ˜¯é¾™æ——ï¼Œè¿™æ¬¡æ˜¯æé»„è‰²çš„ã€‚é‡‘å¯¡å¦‡å–ƒå–ƒè¯´ï¼šâ€œç‹ç‹¸å¯»æ±‚é¾™çš„åº‡æŠ¤ã€‚â€ç„¶åä¸Šäº†å¤§èˆ¹ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;â€”â€”â€”â€” åšå°”èµ«æ–¯ã€Šæ¶æ£åˆ—ä¼ ã€‹&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;h2 id=&quot;about-this-site&quot;&gt;About this site&lt;&#x2F;h2&gt;
&lt;p&gt;Build with &lt;a href=&quot;https:&#x2F;&#x2F;www.getzola.org&#x2F;&quot;&gt;zola&lt;&#x2F;a&gt; and theme &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ischaojie&#x2F;willow&quot;&gt;willow&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
    </entry>
    <entry xml:lang="en">
        <title>How to Run Hatch Within Github Workflow</title>
        <published>2023-01-28T22:10:02+08:00</published>
        <updated>2023-01-28T22:10:02+08:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://chaojie.fun/articles/how-to-run-hatch-within-github-action/" type="text/html"/>
        <id>https://chaojie.fun/articles/how-to-run-hatch-within-github-action/</id>
        <content type="html">&lt;p&gt;Hatch support support define matrix within a environment (&lt;a href=&quot;https:&#x2F;&#x2F;hatch.pypa.io&#x2F;latest&#x2F;config&#x2F;environment&#x2F;advanced&#x2F;#matrix&quot;&gt;matrix docs&lt;&#x2F;a&gt;), this is so useful when you want to run test against different python version. For example:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;toml&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-toml &quot;&gt;&lt;code class=&quot;language-toml&quot; data-lang=&quot;toml&quot;&gt;&lt;span&gt;[tool.hatch.envs.test]
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;dependencies &lt;&#x2F;span&gt;&lt;span&gt;= [
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;pytest&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;]
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;[[tool.hatch.envs.test.matrix]]
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;python &lt;&#x2F;span&gt;&lt;span&gt;= [&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;3.7&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;3.8&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;3.9&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;3.10&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;3.11&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;]
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;[tool.hatch.envs.test.scripts]
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;test &lt;&#x2F;span&gt;&lt;span&gt;= &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;pytest tests&#x2F;&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;But how to run hatch within github workflow? This post will show you how to do it.&lt;&#x2F;p&gt;
&lt;p&gt;In github workflow you can also define matrix to run job against different python version,
maybe you want set CI like this:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;yaml&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-yaml &quot;&gt;&lt;code class=&quot;language-yaml&quot; data-lang=&quot;yaml&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;name&lt;&#x2F;span&gt;&lt;span&gt;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;CI&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;on&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;push&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;branches&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;main&lt;&#x2F;span&gt;&lt;span&gt;]
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pull_request&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;branches&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;main&lt;&#x2F;span&gt;&lt;span&gt;]
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;jobs&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;run&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;name&lt;&#x2F;span&gt;&lt;span&gt;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;tests &amp;amp; coverage&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;runs-on&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ubuntu-latest
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;strategy&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;matrix&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;python-version&lt;&#x2F;span&gt;&lt;span&gt;: [&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;3.7&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;3.8&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;3.9&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;3.10&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;3.11&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;]
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;steps&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;      - &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;uses&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;actions&#x2F;checkout@v3
&lt;&#x2F;span&gt;&lt;span&gt;      - &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;name&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Set up Python ${{ matrix.python-version }}
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;uses&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;actions&#x2F;setup-python@v4
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;with&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;          &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;python-version&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${{ matrix.python-version }}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;      - &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;name&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Install hatch
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;run&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;python -m pip install hatch
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# then run test
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If you directly run &lt;code&gt;hatch run test:test&lt;&#x2F;code&gt;, Hatch will try to set virtualenv for each python version.It will failed, because only one system python is installed at each strategy.&lt;&#x2F;p&gt;
&lt;p&gt;Fortunately, hatch can use &lt;code&gt;+py&lt;&#x2F;code&gt; to specify the python version to run env command, so you can change the CI config like this:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;yaml&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-yaml &quot;&gt;&lt;code class=&quot;language-yaml&quot; data-lang=&quot;yaml&quot;&gt;&lt;span&gt;- &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;name&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Tests
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;run&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;hatch run +py=${{ matrix.python-version }}  test:test
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The full CI config:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;yaml&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-yaml &quot;&gt;&lt;code class=&quot;language-yaml&quot; data-lang=&quot;yaml&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;name&lt;&#x2F;span&gt;&lt;span&gt;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;CI&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;on&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;push&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;branches&lt;&#x2F;span&gt;&lt;span&gt;: [ &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;main &lt;&#x2F;span&gt;&lt;span&gt;]
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pull_request&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;branches&lt;&#x2F;span&gt;&lt;span&gt;: [ &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;main &lt;&#x2F;span&gt;&lt;span&gt;]
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;jobs&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;run&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;name&lt;&#x2F;span&gt;&lt;span&gt;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;tests &amp;amp; coverage&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;runs-on&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ubuntu-latest
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;strategy&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;matrix&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;python-version&lt;&#x2F;span&gt;&lt;span&gt;: [&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;3.7&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;3.8&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;3.9&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;3.10&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;3.11&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;]
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;steps&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;    - &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;uses&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;actions&#x2F;checkout@v3
&lt;&#x2F;span&gt;&lt;span&gt;    - &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;name&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Set up Python ${{ matrix.python-version }}
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;uses&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;actions&#x2F;setup-python@v4
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;with&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;python-version&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;${{ matrix.python-version }}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    - &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;name&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Install hatch
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;run&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;python -m pip install hatch
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    - &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;name&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Lint
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;run&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;hatch run check
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    - &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;name&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Coverage
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;run&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;hatch run +py=${{ matrix.python-version }} test:test
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    - &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;name&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Upload Coverage
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;uses&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;codecov&#x2F;codecov-action@v3
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;with&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;files&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;coverage.xml
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Hope this post can help you.&lt;&#x2F;p&gt;
</content>
    </entry>
    <entry xml:lang="en">
        <title>ä½ å¥½ï¼Œ2022</title>
        <published>2022-01-06T17:14:05+08:00</published>
        <updated>2022-01-06T17:14:05+08:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://chaojie.fun/articles/hello-2022-and-automata/" type="text/html"/>
        <id>https://chaojie.fun/articles/hello-2022-and-automata/</id>
        <content type="html">&lt;blockquote&gt;
&lt;p&gt;1997 å¹´è¿‡å»äº†ï¼Œæˆ‘å¾ˆæ€€å¿µå®ƒã€‚--ã€Šç”²æ–¹ä¹™æ–¹ã€‹&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;22 å²ä¹‹åï¼Œäººç”Ÿè¿‡å¾—å¾ˆä¸å¤ªå¹³ï¼Œå°±åƒé‚£å¤´å—äº†æ¶æ‰“çš„ç‰›ã€‚
å¹¸å¥½æœ‰ lanï¼Œè¿˜æœ‰æ´¾æ´¾ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘è·Ÿ lan å¼€ç©ç¬‘è¯´ï¼šâ€œäººé—´å€¼å¾—æˆ‘ç•™æ‹çš„å¤§æ¦‚åªæœ‰ä½ äº†ï¼Œè¿˜æœ‰ç‹—æ´¾æ´¾ã€‚â€&lt;&#x2F;p&gt;
&lt;p&gt;ç”Ÿæ´»éœ€è¦å‹‡æ°”ã€‚è¿™ä¸ªå°å°çš„å®¶ï¼Œç»™äº†æˆ‘æ‰€æœ‰çš„åŠ¨åŠ›ï¼Œå½“ç„¶ï¼Œè¿˜æœ‰æ¯äº²ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;2021 å¹´ï¼Œæ¯…ç„¶ä»æŸé“¶è¡Œè¾èŒï¼Œä¹Ÿååˆ†æœ‰å¹¸åŠ å…¥è±†ç“£ï¼Œè¿™ä¸ªå’Œ lan æœ€åˆç›¸è¯†çš„åœ°æ–¹ã€‚ä¹Ÿé™ªä¼´æˆ‘èµ°è¿‡éš¾å¿˜çš„æ±‚å­¦æ—¶å…‰ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ–°çš„ä¸€å¹´ï¼Œåªå¸Œæœ›å¹³å¹³å®‰å®‰ï¼Œå¸Œæœ› lan è€ƒç ”é¡ºåˆ©ã€‚&lt;&#x2F;p&gt;
</content>
    </entry>
    <entry xml:lang="en">
        <title>æ•°æ®åº“ç´¢å¼•ç•¥çŸ¥ä¸€äºŒ</title>
        <published>2020-11-09T15:17:05+08:00</published>
        <updated>2020-11-09T15:17:05+08:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://chaojie.fun/articles/shu-ju-ku-suo-yin-lve-zhi-yi-er/" type="text/html"/>
        <id>https://chaojie.fun/articles/shu-ju-ku-suo-yin-lve-zhi-yi-er/</id>
        <content type="html">&lt;p&gt;è¯´åˆ°ç´¢å¼•ï¼Œå¾ˆå¤šäººè‚¯å®šä¼šç«‹é©¬æƒ³åˆ° MySQL ä¸­ä½¿ç”¨äº† B+ æ ‘è¿™ç§ç´¢å¼•ç»“æ„ï¼Œæ¯•ç«Ÿæ˜¯é¢è¯•å¸¸è€ƒé¢˜å‹ã€‚æˆ‘åœ¨å‡†å¤‡é¢è¯•çš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿåªæ˜¯æµ…æ˜¾çš„äº†è§£åˆ° MySQL åœ¨åˆ›å»ºä¸»é”®æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªä¸»é”®ç´¢å¼•ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰è”åˆç´¢å¼•ã€å”¯ä¸€ç´¢å¼•ç­‰ç´¢å¼•ç»“æ„ã€‚åˆ›å»ºä¸»é”®ç´¢å¼•çš„æ—¶å€™ä¼šé€šè¿‡ B+ æ ‘æ¥å­˜å‚¨æ•°æ®ã€‚æ‰€ä»¥ï¼ŒMySQL ä¸ºä»€ä¹ˆè¦ä½¿ç”¨B+ æ ‘ä½œä¸ºç´¢å¼•ï¼Ÿè¿˜æœ‰æ²¡æœ‰å…¶ä»–ç´¢å¼•ç»“æ„ï¼Ÿç´¢å¼•åˆ°åº•æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿå¸¦ç€è¿™äº›ç–‘é—®ï¼Œæˆ‘æŸ¥é˜…äº†ç›¸å…³çš„èµ„æ–™ï¼ŒåŒæ—¶ä»¥é¡¹ç›®èƒŒæ™¯ä¸ºå‡ºå‘ç‚¹ï¼Œå¸Œæœ›å¯¹ç´¢å¼•åšä¸€æ¬¡é‡æ–°è®¤è¯†ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;è¦å®ç°ä¸€ä¸ªæœ€æœ€ç®€å•çš„æ•°æ®åº“ï¼Œåˆ©ç”¨ Bash å‡½æ•°å°±å¯ä»¥åšåˆ°ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;#!&#x2F;bin&#x2F;bash
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;db_set &lt;&#x2F;span&gt;&lt;span&gt;() {
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;echo &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &amp;gt;&amp;gt; database
&lt;&#x2F;span&gt;&lt;span&gt;} 
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;db_get &lt;&#x2F;span&gt;&lt;span&gt;() {
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;grep &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;^&lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; database | &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sed -e &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;s&#x2F;^&lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;,&#x2F;&#x2F;&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; | &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;tail -n&lt;&#x2F;span&gt;&lt;span&gt; 1
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;è¿™ä¸¤ä¸ªå‡½æ•°å°±æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„é”®å€¼æ•°æ®åº“ï¼Œå­˜æ•°æ®æ—¶ï¼Œä¸æ–­åœ¨ database æ–‡ä»¶æœ«å°¾æ·»åŠ ä¸€è¡Œé”®å€¼å¯¹å³å¯ï¼ŒæŸ¥æ•°æ®æ—¶ï¼Œé€šè¿‡ grep ä¼šæ‰¾åˆ°æ•°æ®åŠä¹‹å‰æ‰€æœ‰çš„ä¿®æ”¹è®°å½•ã€‚è¿™ä¸ªæ•°æ®åº“æ–‡ä»¶å°±åƒä¸€ä¸ªæ—¥å¿—ï¼Œä¸æ–­çš„åœ¨æœ«å°¾è¿½åŠ æ•°æ®ï¼Œç”±äºä¼ ç»Ÿç£ç›˜å¯¹é¡ºåºå†™è¡¨ç°å‡ºçš„ä¼˜å¼‚æ€§èƒ½ï¼Œæ•°æ®åº“çš„å†™å…¥æ€§èƒ½ä¼šå¾ˆé«˜ã€‚ä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœä¸€ç›´å¾€è¯¥æ–‡ä»¶ä¸­æ·»åŠ æ•°æ®ï¼Œä¹…è€Œä¹…ä¹‹ï¼Œè¿™ä¸ªæ–‡ä»¶ä¼šå˜å¾—å¼‚å¸¸å¤§ï¼Œæ–‡ä»¶ä¸­ä¼šå‡ºç°å¾ˆå¤šé‡å¤çš„æ•°æ®ï¼ŒåŒæ—¶ï¼ŒæŸ¥æ‰¾æ•°æ®ä¹Ÿæ˜¯ä¸ªé—®é¢˜ï¼Œæ¯æ¬¡éƒ½è¦ä»å¤´åˆ°å°¾æ‰¾ä¸€æ¬¡ï¼Œåˆ«äººéƒ½ä¸‹ç­äº†ï¼Œä½ è¿˜åœ¨ç­‰ç€æŸ¥è¯¢ç»“æœã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ—¢ç„¶æ–‡ä»¶å¾ˆå¤§ï¼ŒæŠŠå®ƒæ‹†åˆ†æˆä¸€ä¸ªä¸ªå°æ–‡ä»¶ä¸å°±è¡Œäº†ï¼ŒåŒæ—¶å®šæœŸå¯¹è¿™äº›å°æ–‡ä»¶è¿›è¡Œå‹ç¼©ï¼Œå‰”é™¤æ‰é‡å¤çš„å’Œä¸è¦çš„æ•°æ®ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´ã€‚ä½†æ˜¯æŸ¥æ•°æ®çš„é—®é¢˜æ€ä¹ˆè§£å†³ï¼Œç°åœ¨çš„æ–¹å¼ï¼Œæ¯æ¬¡æ‰¾æ•°æ®éƒ½è¦å¯¹æ•´ä¸ªè¡¨æ‰«æä¸€æ¬¡ï¼Œé»„èŠ±èœéƒ½å‡‰äº†ã€‚è§£å†³åŠæ³•å°±æ˜¯ä½¿ç”¨ç´¢å¼•ã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;suo-yin-shi-shi-yao&quot;&gt;ç´¢å¼•æ˜¯ä»€ä¹ˆ&lt;&#x2F;h3&gt;
&lt;blockquote&gt;
&lt;p&gt;ç´¢å¼•çš„æœ¬è´¨å°±åƒä¸€éƒ¨å­—å…¸å‰é¢çš„æ£€ç´¢é¡µï¼ŒæŸ¥å­—å…¸æ—¶ï¼Œé€šè¿‡æ‹¼éŸ³å¼€å¤´çš„å­—æ¯å¯ä»¥å¿«é€ŸæŸ¥æ‰¾åˆ°æŸä¸ªå­—çš„ä½ç½®ï¼Œç´¢å¼•ä¹Ÿä¸€æ ·ï¼Œé€šè¿‡ç»™æ•°æ®åº“ä¸­çš„æ•°æ®æ·»åŠ ç±»ä¼¼è·¯æ ‡çš„è®°å·ï¼Œè¿™æ ·ä»ç´¢å¼•ä¸­å°±å¯ä»¥ç›´æ¥æ£€ç´¢åˆ°è¯¥æ•°æ®çš„ä½ç½®ã€‚&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;è®©æˆ‘ä»¬ç”¨æœ€ç®€å•çš„ &lt;strong&gt;å“ˆå¸Œç´¢å¼•&lt;&#x2F;strong&gt; è¯•è¯•ï¼Œå“ˆå¸Œç´¢å¼•å°±æ˜¯ &lt;strong&gt;åœ¨å†…å­˜ä¸­å°†æ¯ä¸ªé”®éƒ½æ˜ å°„åˆ°æ•°æ®æ–‡ä»¶ä¸­çš„å­—èŠ‚åç§»é‡&lt;&#x2F;strong&gt;ï¼Œè¿™ä¸ªåç§»é‡å°±æ˜¯é”®å¯¹åº”å€¼çš„ä½ç½®ã€‚æŸ¥æ‰¾æ—¶ï¼Œåªè¦é€šè¿‡å“ˆå¸Œæ˜ å°„æ‰¾åˆ°åç§»é‡ï¼Œç„¶åå¯»æ‰¾è¯¥ä½ç½®è¯»å–å³å¯ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;shiniao.fun&#x2F;images&#x2F;image-20201110105059407.png&quot; alt=&quot;hashç´¢å¼•&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;å¬èµ·æ¥æ˜¯ä¸ªä¸é”™çš„åŠæ³•ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†æ•°æ®åº“éƒ½ä¸ä¼šä½¿ç”¨å“ˆå¸Œç´¢å¼•ï¼Œå› ä¸ºå®é™…çš„æ•°æ®åº“ç³»ç»Ÿéœ€è¦è€ƒè™‘çš„ä¸œè¥¿å¾ˆå¤šï¼Œæ¯”å¦‚å‘ç”Ÿå´©æºƒåæ€ä¹ˆå¤„ç†ï¼Œæ•°æ®å¦‚ä½•ä¿è¯ä¸ä¸¢å¤±ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå“ˆå¸Œç´¢å¼•éœ€è¦æ•´ä¸ªæ”¾è¿›å†…å­˜ä¸­ï¼Œå¦‚æœæˆ‘çš„é”®å¾ˆå¤šï¼Œæ•£åˆ—å†²çªçš„å¯èƒ½æ€§ä¹Ÿä¼šå˜å¤§ï¼ŒåŒæ—¶ï¼Œå¯¹äºæ•°æ®çš„èŒƒå›´æŸ¥è¯¢æ”¯æŒä¹Ÿä¸å¤Ÿã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æœ‰æ²¡æœ‰æ›´å¥½çš„åŠæ³•ï¼Ÿ&lt;&#x2F;p&gt;
&lt;h3 id=&quot;lsm-tree-suo-yin&quot;&gt;LSM-Tree ç´¢å¼•&lt;&#x2F;h3&gt;
&lt;p&gt;èªæ˜çš„å¤§è„‘å·²ç»å¸®æˆ‘ä»¬æƒ³å‡ºäº†è§£å†³åŠæ³•ã€‚Googleä¼ å¥‡å·¥ç¨‹å¸ˆ Jeff Deanç­‰äººå¼€å‘äº†ä¸€ä¸ªå¯æŒä¹…åŒ–çš„é”®å€¼æ•°æ®åº“ LevelDBã€‚LevelDB ä½¿ç”¨äº†ä¸€ç§ç§°ä¹‹ä¸º SSTableï¼ˆSorted String Tableï¼‰çš„è¡¨ç»“æ„ï¼Œé¡¾åæ€ä¹‰ï¼ŒSSTable ä¸­æ•°æ®ä¼šæŒ‰ç…§é”®çš„é¡ºåºæ’åˆ—ï¼ŒåŒæ—¶ LevelDB åœ¨å†…å­˜ä¸­ç»´æŠ¤ç€ä¸€ä¸ªç§°ä¹‹ä¸º &lt;strong&gt;LSM-Tree&lt;&#x2F;strong&gt; ï¼ˆLog Structured Merge Treeï¼‰çš„ç´¢å¼•ç»“æ„ï¼ŒLSM-Tree é€šè¿‡æŸç§å¹³è¡¡æ ‘ï¼ˆæ¯”å¦‚åŸºæ•°æ ‘ï¼‰ç»“æ„ä¿è¯é”®çš„æœ‰åºï¼Œåœ¨è¶…å‡ºæ ‘çš„å®¹é‡åï¼Œå°±å°†å…¶ä½œä¸º SSTable å†™å…¥ç£ç›˜ä¸­ï¼ŒåŒæ—¶æ–°çš„æ•°æ®ä¼šè¢«å†™å…¥ä¸€ä¸ªæ–°çš„ LSM-Tree ä¸­ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;shiniao.fun&#x2F;images&#x2F;20201109154404.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;æ­£å¦‚æ–‡ç« ä¹‹å‰è¯´çš„ï¼ŒLevelDB ä¼šå®šæœŸçš„åœ¨åå°æ‰§è¡Œåˆå¹¶æ“ä½œï¼Œå°†å¤šä¸ª SSTable å‹ç¼©ä¸ºä¸€ä¸ªï¼Œä»¥å»é™¤é‡å¤çš„æˆ–åˆ é™¤ä¸ç”¨çš„æ•°æ®ã€‚é‚£ä¹ˆå¦‚ä½•æŸ¥æ‰¾æ•°æ®å‘¢ï¼Ÿæ—¢ç„¶é”®æ˜¯æœ‰åºçš„ï¼ŒæŸ¥æ‰¾å°±å¥½åŠå¤šäº†ï¼Œæ¯”å¦‚ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œæ—¶é—´å¤æ‚åº¦å¯ä»¥é™åˆ° O(log2n) ã€‚LevelDB ä¼šå…ˆåœ¨å†…å­˜ä¸­æŸ¥æ‰¾å…³é”®å­—ï¼Œç„¶ååœ¨æœ€è¿‘çš„ SSTable ä¸­æŸ¥æ‰¾ï¼Œç„¶ååœ¨ä¹‹å‰çš„è¡¨ä¸­æŸ¥æ‰¾ã€‚å½“ç„¶ï¼Œåœ¨å®é™…çš„å®ç°ä¸­ï¼ŒLevelDB å¯¹ç»†èŠ‚åšäº†å¾ˆå¤šçš„ä¼˜åŒ–ï¼Œæ¯”å¦‚ä½¿ç”¨å¤šå±‚å‹ç¼©æ¥æå‡æ€§èƒ½ï¼Œè¿™äº›éƒ½æ˜¯åè¯äº†ã€‚&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;é™¤äº† LevelDBï¼ŒFacebook åŸºäº LevelDB å¼€å‘äº†æ€§èƒ½æ›´å¥½çš„ RocksDBï¼Œå›½å†…å¤§åé¼é¼çš„åˆ†å¸ƒå¼æ•°æ®åº“ TiDB åº•å±‚å­˜å‚¨å°±ä½¿ç”¨çš„ RocksDBã€‚&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;h3 id=&quot;b-tree-suo-yin&quot;&gt;B+Tree ç´¢å¼•&lt;&#x2F;h3&gt;
&lt;p&gt;èƒ½ä¸èƒ½ä½¿ç”¨B+æ ‘æ¥åšç´¢å¼•ï¼Ÿ&lt;&#x2F;p&gt;
&lt;p&gt;å½“ç„¶å¯ä»¥ï¼Œå¼€æºæ•°æ®åº“ BoltDB å°±ä½¿ç”¨ B+ æ ‘æ¥å®ç°ç´¢å¼•ï¼Œè€Œ etcd çš„åº•å±‚å°±ä½¿ç”¨çš„BoltDBã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå¸¸è§çš„å…³ç³»å‹æ•°æ®åº“ï¼ˆæ¯”å¦‚MySQLã€PostgresSQLç­‰ï¼‰ä¹Ÿå¸¸å¸¸ä½¿ç”¨ B+ æ ‘æ¥å®ç°ç´¢å¼•ã€‚ç›¸è¾ƒäºé”®å€¼æ•°æ®åº“ï¼ŒMySQL ç­‰å…³ç³»å‹æ•°æ®åº“åœ¨æ•°æ®å­˜å‚¨ä¸Šæ›´ä¸ºå¤æ‚ï¼Œæ¯”å¦‚ Compactã€Dynamic è¡Œæ ¼å¼ç­‰ï¼Œæ­¤å¤„ä¸åšæ·±ç©¶ã€‚æ‰€ä»¥ï¼ŒB+ æ ‘ç´¢å¼•æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Œä¸ºä»€ä¹ˆè¦ç”¨å®ƒæ¥åšç´¢å¼•ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;åŸºäº LSM-Tree ç´¢å¼•çš„æ•°æ®åº“ç”±äºé¡ºåºå†™å…¥çš„ç‰¹ç‚¹ï¼Œæœ‰ç€å¾ˆé«˜çš„å†™å…¥ååé‡ï¼Œå› ä¸ºæ‰€æœ‰çš„å‰å°å†™å…¥éƒ½å‘ç”Ÿåœ¨å†…å­˜ä¸­ï¼Œå¹¶ä¸”æ‰€æœ‰åå°å†™å…¥éƒ½ä¿æŒç€é¡ºåºè®¿é—®çš„æ¨¡å¼ã€‚ä½†æ˜¯å¯¹äºæŸ¥è¯¢æ¥è¯´ï¼Œå¾€å¾€éœ€è¦åœ¨å¤šä¸ª SSTable ä¸­ä¾æ¬¡æŸ¥æ‰¾ï¼Œå¯¼è‡´è¯»å–çš„ååé‡ä¸‹é™ã€‚è€Œ B+ æ ‘å°±ä¸åŒäº†ï¼Œåœ¨B+æ ‘ä¸­åªæœ‰å¶å­èŠ‚ç‚¹å­˜å‚¨ç€æ•°æ®ï¼Œå¹¶ä¸”å¶å­èŠ‚ç‚¹ä¹‹é—´é€šè¿‡é“¾è¡¨é¡ºåºè¿æ¥ï¼Œåœ¨æŸ¥æ‰¾æ—¶ï¼Œé€šè¿‡æ ¹èŠ‚ç‚¹ç¡®å®šæ•°æ®çš„èŒƒå›´ï¼Œç„¶åé¡ºç€å¶å­èŠ‚ç‚¹çš„é“¾è¡¨æŸ¥æ‰¾å³å¯ã€‚åœ¨æ‰¾åˆ°æ•°æ®è¡Œå¯¹åº”çš„é¡µä¹‹åï¼Œæ•°æ®åº“ä¼šæŠŠæ•´ä¸ªé¡µè¯»å…¥åˆ°å†…å­˜ä¸­ï¼Œå¹¶åœ¨å†…å­˜ä¸­æŸ¥æ‰¾å…·ä½“çš„æ•°æ®è¡Œã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;shiniao.fun&#x2F;images&#x2F;image-20201110095541689.png&quot; alt=&quot;B+Tree&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ MySQL ç­‰æ•°æ®åº“ä¸ä½¿ç”¨ B æ ‘æ¥å®ç°ç´¢å¼•çš„åŸå› ï¼ŒB æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šå­˜å‚¨æ•°æ®ï¼Œåœ¨æŸ¥æ‰¾æ—¶ï¼Œæ€»æ˜¯éœ€è¦ä»æ ¹èŠ‚ç‚¹å‘ä¸‹éå†å­æ ‘æŸ¥æ‰¾æ»¡è¶³æ¡ä»¶çš„æ•°æ®è¡Œï¼Œè¿™ä¸ªç‰¹ç‚¹å¸¦æ¥äº†å¤§é‡çš„éšæœº I&#x2F;Oã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä» B+ æ ‘çš„ç‰¹ç‚¹ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½çœ‹åˆ°ï¼Œå…¶å¯¹äºè¯»å–æ•°æ®æœ‰ç€å¾ˆå¥½çš„æ€§èƒ½ï¼ŒåŒæ—¶å¯¹äºæ¡ä»¶èŒƒå›´æŸ¥è¯¢ä¹Ÿèƒ½å¾ˆå¥½çš„æ”¯æŒï¼Œä½†æ˜¯ç”±äºå­˜å‚¨æ•°æ®æ—¶ä¼šå‘ç”Ÿé‡å¤çš„éšæœºç£ç›˜å†™å…¥ï¼Œå†™å…¥æ€§èƒ½è¾ƒå·®ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä¹Ÿé€šè¿‡å®éªŒæ¯”è¾ƒäº†å‡ ç§ä½¿ç”¨ä¸åŒç´¢å¼•ç»“æ„çš„æ•°æ®åº“ï¼Œå®éªŒè®¾å¤‡ä¸ºå…¬å¸ç”µè„‘ï¼Œç¯å¢ƒä¸ºCentos7 è™šæ‹Ÿæœºï¼ˆ4core+4GB+40GBç£ç›˜ï¼‰ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;shiniao.fun&#x2F;images&#x2F;chart.png&quot; alt=&quot;chart&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼ŒåŸºäº B+ æ ‘ç´¢å¼•çš„ boltdb å’Œ bboltdb çš„è¯»å–ååé‡å¾ˆé«˜ï¼Œä½†æ˜¯å†™å…¥ååé‡å´å¾ˆä½ï¼Œè€Œ rocksdb å’Œ leveldb ç­‰åŸºäº LSM çš„æ•°æ®åº“åœ¨å†™å…¥ååé‡ä¸Šè¡¨ç°ä¼˜å¼‚ï¼Œè¯»å–ç¨é€Šã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;zong-jie&quot;&gt;æ€»ç»“&lt;&#x2F;h3&gt;
&lt;p&gt;æ•°æ®åº“ä½¿ç”¨ç´¢å¼•å¯ä»¥åŠ å¿«æŸ¥è¯¢çš„é€Ÿåº¦ï¼ŒLSMæ ‘ç´¢å¼•çš„å†™å…¥æ€§èƒ½ä¼˜å¼‚ï¼Œè€ŒB+æ ‘ç´¢å¼•çš„è¯»å–æ€§èƒ½æ›´é«˜ï¼Œæ¯æ¡è·¯ä¸Šéƒ½æœ‰è‡ªå·±ç‹¬ç‰¹çš„é£æ™¯ï¼Œæˆ‘ä»¬éœ€è¦åœºæ™¯æ¥é€‰æ‹©åˆé€‚çš„ç´¢å¼•ç»“æ„ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨ç€ä¸ºæœç´¢å¼•æ“è®¾è®¡çš„å…¨æ–‡ç´¢å¼•ã€æ¨¡ç³Šç´¢å¼•ç­‰ã€‚è€Œå¼•å…¥ç´¢å¼•çš„è¿‡ç¨‹ä¹Ÿé€ æˆäº†å†™çš„ç¼“æ…¢ï¼Œè¿™ä¹Ÿæ˜¯éœ€è¦æƒè¡¡çš„äº‹ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ï¼ˆç”±äºæˆ‘çš„æ°´å¹³æœ‰é™ï¼Œæ–‡ä¸­éš¾å…å‡ºç°é”™è¯¯ï¼Œè¿˜æœ›æŒ‡æ­£ã€‚ï¼‰&lt;&#x2F;p&gt;
&lt;h3 id=&quot;can-kao-wen-xian&quot;&gt;å‚è€ƒæ–‡çŒ®&lt;&#x2F;h3&gt;
&lt;ol&gt;
&lt;li&gt;https:&#x2F;&#x2F;draveness.me&#x2F;whys-the-design-mysql-b-plus-tree&#x2F;&lt;&#x2F;li&gt;
&lt;li&gt;ã€Šdesign data intensive applicationã€‹â€”â€”Martin Kleppmann&lt;&#x2F;li&gt;
&lt;li&gt;https:&#x2F;&#x2F;github.com&#x2F;boltdb&#x2F;bolt&lt;&#x2F;li&gt;
&lt;li&gt;https:&#x2F;&#x2F;github.com&#x2F;google&#x2F;leveldb&lt;&#x2F;li&gt;
&lt;li&gt;https:&#x2F;&#x2F;shiniao.fun&#x2F;posts&#x2F;%E5%9F%BA%E4%BA%8Elsm%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E9%94%AE%E5%80%BC%E5%AD%98%E5%82%A8&#x2F;&lt;&#x2F;li&gt;
&lt;li&gt;https:&#x2F;&#x2F;yetanotherdevblog.com&#x2F;lsm&#x2F;&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
</content>
    </entry>
    <entry xml:lang="en">
        <title>åŸºäºLSMç´¢å¼•çš„æ•°æ®åº“é”®å€¼å­˜å‚¨</title>
        <published>2020-10-28T11:19:00+08:00</published>
        <updated>2020-10-28T11:19:00+08:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://chaojie.fun/articles/ji-yu-lsm-de-shu-ju-ku-jian-zhi-cun-chu/" type="text/html"/>
        <id>https://chaojie.fun/articles/ji-yu-lsm-de-shu-ju-ku-jian-zhi-cun-chu/</id>
        <content type="html">&lt;blockquote&gt;
&lt;p&gt;ERROR&lt;&#x2F;p&gt;
&lt;p&gt;æ–‡ç« æœ‰è¯¯ï¼Œå¾…æ›´æ–°ã€‚ã€‚ã€‚&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;æ•°æ®åº“ä¸­ä½¿ç”¨ç´¢å¼•å¯ä»¥åŠ å¿«æŸ¥è¯¢çš„é€Ÿåº¦ï¼Œç´¢å¼•çš„æ„æ€æ˜¯è¯´ï¼Œç»™æŸäº›æ•°æ®æ·»åŠ ç±»ä¼¼è·¯æ ‡çš„è®°å·ï¼Œè¿™æ ·ä»ç´¢å¼•ä¸­å°±å¯ä»¥ç›´æ¥æ£€ç´¢åˆ°è¯¥æ•°æ®çš„ä½ç½®ã€‚ä»¥MySQLä¸ºä¾‹ï¼Œæ·»åŠ ä¸»é”®æ—¶é»˜è®¤ä¼šä¸ºè¯¥å±æ€§åŠ ä¸Šä¸»é”®ç´¢å¼•ï¼Œé™¤æ­¤ä¹‹å¤–ï¼ŒMySQLä¸­è¿˜æœ‰è”åˆç´¢å¼•ã€å”¯ä¸€ç´¢å¼•ç­‰ã€‚ä»¥MySQLç­‰ä¸ºä»£è¡¨çš„å…³ç³»å‹æ•°æ®ä¸­ç´¢å¼•å¸¸å¸¸ç”¨B+æ ‘æ¥å®ç°ï¼Œåœ¨B+æ ‘ä¸­ï¼Œå¶å­èŠ‚ç‚¹åŒ…å«äº†æ‰€æœ‰çš„å…³é”®å­—çš„ä¿¡æ¯ï¼Œå¹¶ä¸”æŒ‰ç…§ä¸»é”®å¤§å°æ’åˆ—ï¼Œéå¶å­èŠ‚ç‚¹ä¸­å­˜æ”¾ç€æŒ‡å‘å¶å­èŠ‚ç‚¹ä¸­çš„æŒ‡é’ˆï¼ˆé¡µå·å’Œé¡µå¯¹åº”åˆ—çš„æœ€å°è®°å½•ï¼‰ã€‚é™¤äº†ç”¨B+æ ‘å®ç°ç´¢å¼•å¤–ï¼Œå¸¸è§çš„è¿˜æœ‰Hashç´¢å¼•ã€å…¨æ–‡ç´¢å¼•ä»¥åŠLSMæ ‘ç´¢å¼•ã€‚æœ€ç®€å•çš„æ˜¯Hashç´¢å¼•ï¼Œæ ‡æ³¨é”®åœ¨æ•°æ®åº“çš„ä½ç½®ï¼Œç›´æ¥é€šè¿‡hashæ˜ å°„æ‰¾åˆ°é”®çš„ä½ç½®å³å¯ã€‚è€ŒLSMæ ‘å¸¸å¸¸ç”¨åœ¨é”®å€¼æ•°æ®åº“çš„ç´¢å¼•å®ç°ä¸Šã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;lsmshu&quot;&gt;LSMæ ‘&lt;&#x2F;h3&gt;
&lt;p&gt;LSMï¼ˆLog-Structured Merge Treeï¼‰æ ‘ç´¢å¼•ä¼´éšç€&lt;strong&gt;é”®å€¼æ•°æ®åº“&lt;&#x2F;strong&gt;è€Œå‡ºç°ï¼Œä»¥RocksDBã€LevelDBä¸ºä»£è¡¨ï¼Œæ¯”å¦‚å›½å†…è‘—åçš„åˆ†å¸ƒå¼æ•°æ®åº“TiDBçš„åº•å±‚å­˜å‚¨å®ç°å°±æ˜¯ç”¨çš„RocksDBã€‚å­˜é”®å€¼å¯¹æœ€ç®€å•çš„æ–¹å¼æ˜¯ç›´æ¥ä»¥è¿½åŠ å†™çš„æ–¹å¼å†™å…¥ä¸€ä¸ªæ–‡ä»¶å³å¯ï¼Œä½†æ˜¯ä¸èƒ½ä¸€ç›´å†™å‘€ï¼Œå¦åˆ™è¿™ä¸ªæ–‡ä»¶ä¼šå˜å¾—å¾ˆå¤§ï¼ŒåŒæ—¶å¯èƒ½å­˜åœ¨å¾ˆå¤šé‡å¤çš„å€¼ï¼ˆæ¯”å¦‚å¯¹è®¿é—®é‡çš„è®¡æ•°ï¼‰ï¼Œæ‰€ä»¥è¦æŠŠæ–‡ä»¶åˆ†æˆå¤šä¸ªæ®µï¼Œè¿™æ ·ä¸€ä¸ªæ–‡ä»¶å†™æ»¡ä¹‹åè¿›è¡Œå‹ç¼©ï¼Œå‰”é™¤é‡å¤çš„ã€ä¸è¦çš„æ•°æ®ï¼Œç„¶ååœ¨æ–°çš„æ–‡ä»¶ä¸­å†™å…¥ã€‚å› ä¸ºç£ç›˜çš„ç‰¹æ€§ï¼Œé¡ºåºå†™å…¥çš„æ€§èƒ½å¾ˆé«˜ï¼Œä½†æ˜¯æŸ¥æ‰¾æ•°æ®æ˜¯ä¸ªé—®é¢˜ï¼Œæ¯æ¬¡éƒ½è¦å…¨è¡¨æ‰«æï¼Œå¦‚æœç£ç›˜ä¸­çš„æ•°æ®æ˜¯æœ‰åºçš„å°±å¥½äº†ï¼ŒæŸ¥æ‰¾å°±ä¼šå¾ˆå¿«ï¼ˆäºŒåˆ†æŸ¥æ‰¾ï¼‰ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;shiniao.fun&#x2F;images&#x2F;20201028165410.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;è¿™ç§æ•°æ®å­˜å‚¨çš„æ–¹å¼å…¶å®å«åš&lt;strong&gt;SSTable&lt;&#x2F;strong&gt;ï¼ˆæ’åºå­—ç¬¦ä¸²è¡¨ï¼‰ï¼Œåœ¨æ¯ä¸ªSSTableæ–‡ä»¶ä¸­ï¼Œæ•°æ®æŒ‰ç…§é”®çš„é¡ºåºæ’åºï¼Œå½“ä¸€ä¸ªSSTableæ»¡äº†ä¹‹åï¼Œé€šè¿‡åˆå¹¶å‹ç¼©çš„æ–¹å¼ï¼Œåˆ é™¤æ—§å€¼ä»¥åŠé‡å¤çš„å€¼ã€‚å¦å¤–ï¼Œæ•°æ®è‚¯å®šä¸ä¼šç›´æ¥å†™å…¥ç£ç›˜ä¸­çš„SSTableï¼Œé¦–å…ˆä¼šå†™å…¥å†…å­˜ä¸­ï¼Œä¹Ÿå«åšå†…å­˜è¡¨ï¼Œå½“å†…å­˜è¡¨è¶…å‡ºå¤§å°åæ‰ä½œä¸ºSSTableæ–‡ä»¶å†™å…¥ç£ç›˜ï¼Œç„¶ååœ¨åå°å®šæœŸå‹ç¼©ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;é‚£ä¹ˆå¦‚ä½•ä¿è¯å†™å…¥å†…å­˜è¡¨çš„é”®å€¼å¯¹æ˜¯æœ‰åºçš„ï¼Ÿå¯ä»¥ä½¿ç”¨çº¢é»‘æ ‘ã€B+æ ‘æ¥å®ç°ï¼Œä¹Ÿæœ‰ä½¿ç”¨&lt;strong&gt;åŸºæ•°æ ‘&lt;&#x2F;strong&gt;æ¥å®ç°çš„ï¼ˆæ¯”å¦‚ä¸‹é¢ä»‹ç»çš„bitcaskå°±ä½¿ç”¨åŸºæ•°æ ‘æ¥å¯¹é”®å€¼å¯¹æ’åºï¼‰ã€‚è¿™ç§å…ˆåœ¨å†…å­˜ä¸­æ„å»ºä¸€é¢—æœ‰åºæ ‘ï¼Œå½“å¤§å°è¶…å‡ºåå†™å…¥ç£ç›˜çš„æ–¹å¼å°±æ˜¯&lt;strong&gt;LSMæ ‘&lt;&#x2F;strong&gt;ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;shiniao.fun&#x2F;images&#x2F;20201028141704.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;åœ¨è¯»å–æ•°æ®çš„æ—¶å€™ï¼Œé¦–å…ˆåœ¨å†…å­˜è¡¨ä¸­æŸ¥æ‰¾é”®æ‰€åœ¨çš„æ–‡ä»¶ä½ç½®ï¼Œç„¶ååœ¨æœ€è¿‘çš„SSTableä¸­æŸ¥æ‰¾ï¼Œæ²¡æœ‰çš„è¯ç»§ç»­æ‰¾ä¹‹å‰çš„ã€‚åŒæ—¶ç£ç›˜ä¸­çš„SSTableä¼šå®šæœŸåˆå¹¶å‹ç¼©ï¼Œæˆä¸ºæ–°çš„SSTableï¼Œè¿™æ ·å¯ä»¥èŠ‚çœç©ºé—´ï¼Œæé«˜æ€§èƒ½ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;shiniao.fun&#x2F;images&#x2F;20201028150112.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;LSMæ ‘çš„ä¸»è¦ä¼˜ç‚¹æ˜¯æ‰€æœ‰å‰å°å†™å…¥éƒ½å‘ç”Ÿåœ¨å†…å­˜ä¸­ï¼Œå¹¶ä¸”æ‰€æœ‰åå°å†™å…¥éƒ½ä¿æŒé¡ºåºè®¿é—®æ¨¡å¼ã€‚æœ‰ç€å¾ˆé«˜çš„å†™å…¥ååé‡ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä¸Šæ–‡è¯´çš„LevelDBæ¥æºäºGoogleçš„SSTableè®ºæ–‡ï¼Œè€ŒRocksDBæ˜¯å¯¹levelDBçš„ä¸€äº›æ”¹è¿›ï¼Œä¸ºäº†æ›´åŠ æ·±å…¥çš„äº†è§£LSMä»¥åŠSSTableï¼Œæœ¬æ–‡ä»¥ç±»ä¼¼çš„é”®å€¼æ•°æ®åº“&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;prologic&#x2F;bitcask&quot;&gt;bitcask&lt;&#x2F;a&gt;ä¸ºä¾‹ï¼Œçœ‹çœ‹å®ƒä»¬å…·ä½“æ˜¯æ€ä¹ˆå®ç°çš„ã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;bitcask&quot;&gt;bitcask&lt;&#x2F;h3&gt;
&lt;p&gt;bitcaskåœ¨ä¿è¯é”®çš„é¡ºåºä¸Šä½¿ç”¨äº†ä¸€ç§&lt;strong&gt;è‡ªé€‚åº”åŸºæ•°æ ‘&lt;&#x2F;strong&gt;ï¼ˆARTï¼‰çš„ç®—æ³•ç»“æ„ï¼Œè®ºæ–‡åœ¨è¿™ï¼š&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;https:&#x2F;&#x2F;db.in.tum.de&#x2F;~leis&#x2F;papers&#x2F;ART.pdf&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;ARTæ˜¯å¯¹åŸºæ•°æ ‘çš„ä¸€ç§æ”¹è¿›ç®—æ³•ï¼ŒåŸºæ•°æ ‘å°±æ˜¯å‰ç¼€ï¼ˆTrieï¼‰æ ‘ï¼Œåªä¸è¿‡æ›´èŠ‚çœç©ºé—´ã€‚åœ¨å‰ç¼€æ ‘ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹æ˜¯ä¸€ä¸ªå•è¯ï¼Œè€ŒåŸºæ•°æ ‘ä¸­ï¼Œå¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ˜¯çˆ¶èŠ‚ç‚¹çš„å”¯ä¸€å­èŠ‚ç‚¹çš„è¯ï¼Œé‚£ä¹ˆè¯¥å­èŠ‚ç‚¹å°†ä¼šä¸çˆ¶èŠ‚ç‚¹è¿›è¡Œåˆå¹¶ã€‚ä»¥æ’å…¥helloã€hatã€haveä¸‰ä¸ªå•è¯ä¸ºä¾‹ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;shell&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-shell &quot;&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;&lt;span&gt;# trie
&lt;&#x2F;span&gt;&lt;span&gt;		e - l - l - o
&lt;&#x2F;span&gt;&lt;span&gt;	  &#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;* - h - a - t
&lt;&#x2F;span&gt;&lt;span&gt;	      \
&lt;&#x2F;span&gt;&lt;span&gt;	       v - e
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;# radix
&lt;&#x2F;span&gt;&lt;span&gt;			*
&lt;&#x2F;span&gt;&lt;span&gt;           &#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;        (ello)
&lt;&#x2F;span&gt;&lt;span&gt;         &#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;* - h - * -(a) - * - (t) - *
&lt;&#x2F;span&gt;&lt;span&gt;                 \
&lt;&#x2F;span&gt;&lt;span&gt;                 (ve)
&lt;&#x2F;span&gt;&lt;span&gt;                   \
&lt;&#x2F;span&gt;&lt;span&gt;                    *
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;å‰ç¼€ç®—æ³•éœ€è¦åä¸ªèŠ‚ç‚¹ï¼Œè€ŒåŸºæ•°æ ‘ç®—æ³•åªéœ€è¦äº”ä¸ªèŠ‚ç‚¹å°±èƒ½è¡¨ç¤ºã€‚&lt;&#x2F;p&gt;
&lt;p&gt;åœ¨bitcaskä¸­ï¼ŒSSTableè¡¨ç¤ºå¦‚ä¸‹ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;go&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-go &quot;&gt;&lt;code class=&quot;language-go&quot; data-lang=&quot;go&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;type &lt;&#x2F;span&gt;&lt;span&gt;datafile &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;struct &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sync&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;RWMutex
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;id           &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;r            &lt;&#x2F;span&gt;&lt;span&gt;*&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;os&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;File
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ra           &lt;&#x2F;span&gt;&lt;span&gt;*&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mmap&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;ReaderAt
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;w            &lt;&#x2F;span&gt;&lt;span&gt;*&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;os&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;File
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;offset       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int64
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; decode and encode äºŒè¿›åˆ¶
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;dec          &lt;&#x2F;span&gt;&lt;span&gt;*&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;codec&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;Decoder
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;enc          &lt;&#x2F;span&gt;&lt;span&gt;*&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;codec&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;Encoder
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;maxKeySize   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;uint32
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;maxValueSize &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;uint64
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;åœ¨æŸ¥æ‰¾æ•°æ®çš„æ—¶å€™ï¼Œé¦–å…ˆä¼šä»åŸºäºARTå®ç°çš„ç´¢å¼•ä¸­æ‰¾åˆ°é”®æ‰€åœ¨çš„ä½ç½®ï¼Œç„¶ååœ¨å½“å‰SSTableå’Œä¹‹å‰çš„åˆ†åˆ«æŸ¥æ‰¾ã€‚&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;go&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-go &quot;&gt;&lt;code class=&quot;language-go&quot; data-lang=&quot;go&quot;&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; Get retrieves the value of the given key. If the key is not found or an&#x2F;I&#x2F;O
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; error occurs a null byte slice is returned along with the error.
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;func &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b &lt;&#x2F;span&gt;&lt;span&gt;*&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;Bitcask&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;Get&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;key &lt;&#x2F;span&gt;&lt;span&gt;[]&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;byte&lt;&#x2F;span&gt;&lt;span&gt;) ([]&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;byte&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;error&lt;&#x2F;span&gt;&lt;span&gt;) {
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;var &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;df data&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;Datafile
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mu&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;RLock&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; ä¼˜åŒ–ï¼Œå¯ä»¥é€šè¿‡bloom ç®—æ³•åˆ¤æ–­é”®å­˜ä¸å­˜åœ¨ï¼Œå­˜åœ¨çš„è¯ç»§ç»­search
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; ä¸å­˜åœ¨çš„è¯ç›´æ¥error
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; ä» ART ç´¢å¼•æ‰¾åˆ°é”®çš„ä½ç½®
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; key: [fileid, offset, size]
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;value&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;found &lt;&#x2F;span&gt;&lt;span&gt;:= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;trie&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Search&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;!&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;found &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mu&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;RUnlock&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;nil&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ErrKeyNotFound
&lt;&#x2F;span&gt;&lt;span&gt;	}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;item &lt;&#x2F;span&gt;&lt;span&gt;:= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;value&lt;&#x2F;span&gt;&lt;span&gt;.(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;internal&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;Item&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; å¦‚æœè¿™ä¸ªé”®åœ¨å½“å‰ SSTableä¸­
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;item&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;FileID &lt;&#x2F;span&gt;&lt;span&gt;== &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;curr&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;FileID&lt;&#x2F;span&gt;&lt;span&gt;() {
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; æŸ¥å½“å‰
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;df &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;curr
&lt;&#x2F;span&gt;&lt;span&gt;	} &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; æŸ¥ä¹‹å‰SSTableï¼ˆç£ç›˜ä¸­ï¼‰
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;df &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;datafiles&lt;&#x2F;span&gt;&lt;span&gt;[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;item&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;FileID&lt;&#x2F;span&gt;&lt;span&gt;]
&lt;&#x2F;span&gt;&lt;span&gt;	}
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; è¯»å–
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;e&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;err &lt;&#x2F;span&gt;&lt;span&gt;:= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;df&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ReadAt&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;item&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Offset&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;item&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Size&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mu&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;RUnlock&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;err &lt;&#x2F;span&gt;&lt;span&gt;!= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;nil &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;nil&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;err
&lt;&#x2F;span&gt;&lt;span&gt;	}
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; æ ¡éªŒ
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;checksum &lt;&#x2F;span&gt;&lt;span&gt;:= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;crc32&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ChecksumIEEE&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;e&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Value&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;checksum &lt;&#x2F;span&gt;&lt;span&gt;!= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;e&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Checksum &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;nil&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ErrChecksumFailed
&lt;&#x2F;span&gt;&lt;span&gt;	}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;e&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Value&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;nil
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;å†™å…¥é”®å€¼å¯¹çš„æ—¶å€™ï¼Œ&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;å¦‚æœSSTableè¶…å‡ºå¤§å°äº†ï¼Œå…³é—­å½“å‰SSTableï¼Œå¹¶å†æ¬¡æ‰“å¼€ï¼Œä¸è¿‡è¿™æ¬¡åªèƒ½è¯»äº†ï¼Œä¸èƒ½å†™å…¥ï¼ˆå½’æ¡£ï¼‰&lt;&#x2F;li&gt;
&lt;li&gt;æ–°å»ºä¸€ä¸ªSSTableï¼Œåˆ†é…è¯»å†™æƒé™&lt;&#x2F;li&gt;
&lt;li&gt;å¦‚æœæ²¡æœ‰è¶…å‡ºå¤§å°ï¼Œå†™å…¥å³å¯ï¼ˆencodeï¼‰&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;pre data-lang=&quot;go&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-go &quot;&gt;&lt;code class=&quot;language-go&quot; data-lang=&quot;go&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; Put stores the key and value in the database.
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;func &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b &lt;&#x2F;span&gt;&lt;span&gt;*&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;Bitcask&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;Put&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;value &lt;&#x2F;span&gt;&lt;span&gt;[]&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;byte&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;error &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;	......
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mu&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Lock&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; å†™å…¥
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;offset&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;n&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;err &lt;&#x2F;span&gt;&lt;span&gt;:= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;put&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;value&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;	......
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;item &lt;&#x2F;span&gt;&lt;span&gt;:= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;internal&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Item&lt;&#x2F;span&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;FileID&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;curr&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;FileID&lt;&#x2F;span&gt;&lt;span&gt;(), &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Offset&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;offset&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Size&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;n&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; åŠ å…¥ARTç´¢å¼•
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;trie&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Insert&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;item&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mu&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Unlock&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;nil
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; put inserts a new (key, value). Both key and value are valid inputs.
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;func &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b &lt;&#x2F;span&gt;&lt;span&gt;*&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;Bitcask&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;put&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;value &lt;&#x2F;span&gt;&lt;span&gt;[]&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;byte&lt;&#x2F;span&gt;&lt;span&gt;) (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int64&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int64&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;error&lt;&#x2F;span&gt;&lt;span&gt;) {
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;size &lt;&#x2F;span&gt;&lt;span&gt;:= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;curr&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Size&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; ä¸€ä¸ªSSTableï¼ˆé»˜è®¤1MBï¼‰è£…ä¸ä¸‹äº†
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;size &lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;int64&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;config&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;MaxDatafileSize&lt;&#x2F;span&gt;&lt;span&gt;) {
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; å…³é—­å½“å‰SSTable
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;err &lt;&#x2F;span&gt;&lt;span&gt;:= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;curr&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Close&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;err &lt;&#x2F;span&gt;&lt;span&gt;!= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;nil &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;			&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;err
&lt;&#x2F;span&gt;&lt;span&gt;		}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;id &lt;&#x2F;span&gt;&lt;span&gt;:= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;curr&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;FileID&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; å°†å½“å‰SSTableå½’æ¡£ï¼Œè®¾ä¸ºåªè¯»
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;df&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;err &lt;&#x2F;span&gt;&lt;span&gt;:= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;data&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;NewDatafile&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;path&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;id&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;true&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;config&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;MaxKeySize&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;config&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;MaxValueSize&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;err &lt;&#x2F;span&gt;&lt;span&gt;!= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;nil &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;			&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;err
&lt;&#x2F;span&gt;&lt;span&gt;		}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;datafiles&lt;&#x2F;span&gt;&lt;span&gt;[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;id&lt;&#x2F;span&gt;&lt;span&gt;] = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;df
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;id &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;curr&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;FileID&lt;&#x2F;span&gt;&lt;span&gt;() + &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; æ–°å»ºSSTableæ–‡ä»¶ï¼ˆid+1ï¼‰ï¼Œå¹¶åˆ†é…è¯»å†™æƒé™
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;curr&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;err &lt;&#x2F;span&gt;&lt;span&gt;:= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;data&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;NewDatafile&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;path&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;id&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;false&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;config&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;MaxKeySize&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;config&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;MaxValueSize&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;err &lt;&#x2F;span&gt;&lt;span&gt;!= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;nil &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;			&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;err
&lt;&#x2F;span&gt;&lt;span&gt;		}
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;curr &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;curr
&lt;&#x2F;span&gt;&lt;span&gt;	}
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; å†™å…¥ key-value
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;e &lt;&#x2F;span&gt;&lt;span&gt;:= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;internal&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;NewEntry&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;value&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;curr&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Write&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;e&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;è€Œåˆå¹¶å’Œå‹ç¼©SSTableä¼šåœ¨åå°å‘¨æœŸæ€§çš„æ‰§è¡Œï¼š&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;åˆ›å»ºä¸´æ—¶è¡¨&lt;&#x2F;li&gt;
&lt;li&gt;æŸ¥æ‰¾é”®æ˜¯å¦åœ¨ ART ç´¢å¼•å¶å­èŠ‚ç‚¹ä¸Šï¼Œå°†å­˜åœ¨çš„æ”¾å…¥ä¸´æ—¶è¡¨ä¸­ï¼ˆåˆå¹¶å‹ç¼©ï¼Œè€çš„ä¼šè¢«æ–°çš„ä»£æ›¿ï¼‰&lt;&#x2F;li&gt;
&lt;li&gt;ç§»é™¤æ‰€æœ‰SSTable&lt;&#x2F;li&gt;
&lt;li&gt;é‡å‘½åä¸´æ—¶è¡¨ä¸ºæ–°çš„SSTable&lt;&#x2F;li&gt;
&lt;li&gt;é‡æ–°æ‰“å¼€æ•°æ®åº“&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;pre data-lang=&quot;go&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-go &quot;&gt;&lt;code class=&quot;language-go&quot; data-lang=&quot;go&quot;&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; Rewrite all key&#x2F;value pairs into merged database
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; Doing this automatically strips deleted keys and
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; old key&#x2F;value pairs
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;err &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Fold&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;func&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;key &lt;&#x2F;span&gt;&lt;span&gt;[]&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;byte&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;error &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; b.Getçš„keyéƒ½æ˜¯ç»è¿‡ARTå¤„ç†è¿‡çš„
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;value&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;err &lt;&#x2F;span&gt;&lt;span&gt;:= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Get&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;err &lt;&#x2F;span&gt;&lt;span&gt;!= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;nil &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;			&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;err
&lt;&#x2F;span&gt;&lt;span&gt;		}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;err &lt;&#x2F;span&gt;&lt;span&gt;:= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mdb&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Put&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;value&lt;&#x2F;span&gt;&lt;span&gt;); &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;err &lt;&#x2F;span&gt;&lt;span&gt;!= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;nil &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;			&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;err
&lt;&#x2F;span&gt;&lt;span&gt;		}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;nil
&lt;&#x2F;span&gt;&lt;span&gt;	})
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; Fold iterates over all keys in the database calling the function `f` for
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; each key. If the function returns an error, no further keys are processed
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; and the error returned.
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;func &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b &lt;&#x2F;span&gt;&lt;span&gt;*&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;Bitcask&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;Fold&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;f &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;func&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;key &lt;&#x2F;span&gt;&lt;span&gt;[]&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;byte&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;error&lt;&#x2F;span&gt;&lt;span&gt;) (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;err &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;error&lt;&#x2F;span&gt;&lt;span&gt;) {
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mu&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;RLock&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;defer &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mu&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;RUnlock&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; keyåœ¨ARTçš„å¶å­èŠ‚ç‚¹ï¼Œè¿”å›trueï¼Œå¦åˆ™è¿”å›falseï¼Œä¸å¤„ç†
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;trie&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ForEach&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;func&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;node art&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;Node&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;bool &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;err &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;node&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Key&lt;&#x2F;span&gt;&lt;span&gt;()); &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;err &lt;&#x2F;span&gt;&lt;span&gt;!= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;nil &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;			&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;false
&lt;&#x2F;span&gt;&lt;span&gt;		}
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;true
&lt;&#x2F;span&gt;&lt;span&gt;	})
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;å‚è€ƒæ–‡çŒ®ï¼š&lt;&#x2F;p&gt;
&lt;p&gt;[1]  &amp;quot;The Adaptive Radix Tree:ARTful Indexing for Main-Memory Databases&amp;quot;, Viktor Leis, Alfons Kemper, Thomas Neumann.&lt;&#x2F;p&gt;
&lt;p&gt;[2] ã€Šè®¾è®¡æ•°æ®å¯†é›†å‹åº”ç”¨ã€‹&lt;&#x2F;p&gt;
&lt;p&gt;[3] https:&#x2F;&#x2F;github.com&#x2F;prologic&#x2F;bitcask&lt;&#x2F;p&gt;
&lt;p&gt;[4] https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;14708134&#x2F;what-is-the-difference-between-trie-and-radix-trie-data-structures&lt;&#x2F;p&gt;
</content>
    </entry>
    <entry xml:lang="en">
        <title>åˆ†å¸ƒå¼NewSQLæ•°æ®åº“ç®€ä»‹</title>
        <published>2020-09-28T15:34:42+08:00</published>
        <updated>2020-09-28T15:34:42+08:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://chaojie.fun/articles/fen-bu-shi-shu-ju-ku-jian-jie/" type="text/html"/>
        <id>https://chaojie.fun/articles/fen-bu-shi-shu-ju-ku-jian-jie/</id>
        <content type="html">&lt;p&gt;æ•°æ®åº“çš„å‘å±•ç»å†äº†ä»ä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“ã€NoSQLï¼ˆNot Only SQLï¼‰æ•°æ®åº“åˆ°è¿‘å‡ å¹´æ–°å‡ºç°çš„åˆ†å¸ƒå¼ NewSQL æ•°æ®åº“ï¼Œæ•´ä¸ªè¶‹åŠ¿ç”±å•æœºé€æ¸å‘åˆ†å¸ƒå¼æ–¹å‘å‘å±•ã€‚å…³ç³»å‹æ•°æ®åº“è‡ª1970å¹´ç”± Edgar Codd æå‡ºä»¥æ¥[1]ï¼Œåœ¨ç›¸å½“é•¿çš„ä¸€æ®µæ—¶é—´å†…ï¼Œæˆä¸ºå¸‚åœºå æœ‰é‡æœ€å¤§çš„æ•°æ®åº“äº§å“ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œç½‘ç»œå‹æ•°æ®åº“å’Œåˆ†å±‚å‹æ•°æ®åº“ä¹Ÿåœ¨ä¸€æ®µæ—¶é—´å†…çŸ­æš‚å‡ºç°è¿‡ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ç„¶è€Œå…³ç³»å‹æ•°æ®åº“æœ‰è‡ªèº«çš„ä¸è¶³ä¹‹å¤„ï¼Œå…¶æ•°æ®å…³ç³»æ¨¡å‹è¡¨è¾¾ä¸å®é™…åº”ç”¨å±‚ä¹‹é—´å­˜åœ¨ä¸è¿è´¯æ€§ï¼Œä¸”æ— æ³•é«˜æ•ˆçš„æ‰©å±•åˆ°å¤šä¸ªèŠ‚ç‚¹ï¼Œä»¥åŠå¯¹äºå¤§æ•°æ®é‡ã€é«˜ååé‡çš„å†™å…¥æ”¯æŒæœ‰é™ç­‰ã€‚ NoSQL çš„å‡ºç°æ—¨åœ¨è§£å†³è¿™äº›ä¸è¶³ï¼ŒNoSQL è¢«è§£é‡Šä¸ºâ€œä¸ä»…ä»…æ˜¯ SQL â€ï¼Œä»¥ Google çš„BigTable[2] å’Œ Amazon çš„ DynamoDB[3] ä¸ºä»£è¡¨ï¼Œå…¶åœ¨æ¨¡å‹ä¸Šæ›´åŠ çµæ´»ï¼ŒåŒ…æ‹¬æ–‡æ¡£ã€é”®å€¼ã€åˆ—æ—ã€å›¾ç­‰å¤šç§æ•°æ®æ¨¡å‹ã€‚ä»¥å¼€æº NoSQL æ•°æ®åº“ MongoDB ä¸ºä¾‹ï¼Œå…¶æ•°æ®æ¨¡å‹ä»¥æ–‡æ¡£ä½œä¸ºåŸºæœ¬ç»“æ„ï¼Œæ–‡æ¡£ä¸­å¯ä»»æ„å­˜æ”¾é”®å€¼å¯¹ï¼Œæ•°æ®æ¨¡å‹ç”±å­˜å…¥æ•°æ®çš„ç»“æ„å†³å®šã€‚&lt;&#x2F;p&gt;
&lt;p&gt;åœ¨æ•°æ®å…³ç³»çš„è¡¨è¾¾ä¸Šï¼ŒNoSQL å¯¹äºä¸€å¯¹å¤šå…³ç³»æœ‰æ›´å¼ºçš„çµæ´»æ€§ï¼Œå¯¹æŸ¥è¯¢æ›´å‹å¥½ï¼Œä¸éœ€è¦è·¨è¡¨è¿æ¥ï¼Œä½†æ˜¯å¯¹äºå¤šå¯¹å¤šå…³ç³»ï¼Œä¸¤ç§æ•°æ®åº“å¹¶æ²¡æœ‰å¤šå¤§ä¸åŒã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒNoSQL æ•°æ®åº“å¾€å¾€é’ˆå¯¹å¯æ‰©å±•æ€§ã€é«˜å¯ç”¨æ€§ç­‰ä¸“é—¨è®¾è®¡ï¼Œè¿™ä½¿å¾—å…¶æ”¯æŒæ›´å¤æ‚çš„å¤šæ•°æ®ä¸­å¿ƒæ¶æ„ï¼Œæ€§èƒ½ä¹Ÿæ›´å¼ºã€‚ç„¶è€Œä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“è¿‘äº›å¹´åœ¨å…¶æ•°æ®æ¨¡å‹å’Œé«˜å¯ç”¨æ€§ç­‰æ–¹é¢ä¹Ÿæ·»åŠ äº†ç›¸åº”æ”¯æŒï¼Œæ¯”å¦‚å¼€æºæ•°æ®åº“ PostgreSQL åœ¨å…¶ 9.3 ç‰ˆæœ¬ä¹‹åï¼Œæ·»åŠ äº†å¯¹æ–‡æ¡£æ¨¡å‹çš„æ”¯æŒã€‚åœ¨é«˜å¯ç”¨ä¸Šï¼ŒMySQL ä¹Ÿæ”¯æŒä¸»ä»å¤åˆ¶ä»¥åŠè‡ª 5.7 ç‰ˆæœ¬ä¹‹åå‡ºç°çš„ MySQL Group Replication æŠ€æœ¯ï¼Œè¿›ä¸€æ­¥å¢å¼ºäº†åœ¨æ‰©å±•æ€§å’Œé«˜å¯ç”¨æ€§ä¸Šçš„æ”¯æŒã€‚å¯ä»¥è¯´ï¼Œå…³ç³»å‹æ•°æ®åº“å’Œ NoSQL æ•°æ®åº“ç›¸äº’å€Ÿé‰´å„è‡ªçš„ä¼˜ç‚¹ï¼ŒååŒå‘å±•ï¼Œå‘ˆç°å‡ºæ··åˆæŒä¹…åŒ–çš„çŠ¶æ€ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;åˆ†å¸ƒå¼NewSQLæ•°æ®åº“çš„å‡ºç°åŸºäºå¯æ‰©å±•æ€§ã€é«˜å¯ç”¨æ€§ã€æ•°æ®ä¸€è‡´æ€§ç­‰æ–¹é¢çš„è€ƒè™‘ã€‚å…¶ä¸­å¯æ‰©å±•æ€§æ˜¯æŒ‡æ°´å¹³æ–¹å‘ï¼ˆå‚ç›´æ‰©å±•æŒ‡çš„æ˜¯æ‰©å±•å•æœºï¼Œä»¥å…±äº«å†…å­˜æˆ–è€…å…±äº«ç£ç›˜çš„æ–¹å¼å­˜åœ¨ï¼‰çš„æ‰©å±•ï¼Œå°†å•å°æœºå™¨çš„è´Ÿè½½åˆ†æ•£åˆ°å¤šå°æœºå™¨ä¸Šï¼Œæä¾›æ›´å¼ºçš„å¤„ç†èƒ½åŠ›ã€‚é«˜å¯ç”¨ä¿éšœäº†åœ¨å•å°æœºå™¨å‡ºç°æ•…éšœçš„æƒ…å†µä¸‹ï¼Œç³»ç»Ÿä»èƒ½ç»§ç»­æä¾›æœåŠ¡ã€‚æ•°æ®ä¸€è‡´æ€§ä½œä¸ºåˆ†å¸ƒå¼äº‹åŠ¡çš„å¿…è¦æ¡ä»¶ï¼Œä¿è¯äº†æ‰€æœ‰èŠ‚ç‚¹å¯¹æŸä¸ªäº‹ä»¶è¾¾æˆä¸€è‡´ã€‚NewSQL æ¦‚å¿µçš„äº§ç”Ÿæ¥æºäº Google äº 2012 å¹´å‘è¡¨çš„Spanner[4] æ•°æ®åº“ï¼Œè¯¥è®ºæ–‡å°†ä¼ ç»Ÿå…³ç³»æ¨¡å‹ä»¥åŠ NoSQL æ•°æ®åº“çš„æ‰©å±•æ€§ç›¸ç»“åˆï¼Œä½¿å¾—æ•°æ®åº“åŒæ—¶æ”¯æŒåˆ†å¸ƒå¼åˆå…·æœ‰ä¼ ç»Ÿ SQL çš„èƒ½åŠ›ã€‚é™¤äº† Spanner æ•°æ®åº“ï¼Œå›½å¤–çš„CockroachDB ä»¥åŠå›½å†…çš„ TDSQLã€MyCATã€TiDB[5]ã€OceanBaseã€SequoiaDB ç­‰éƒ½æ˜¯æ–°å…´çš„åˆ†å¸ƒå¼æ•°æ®åº“äº§å“ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;åˆ†å¸ƒå¼æ•°æ®åº“ä»å®ç°ä¸Šå¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼š&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€ç±»æ˜¯ä»¥ä¼ ç»Ÿæ•°æ®åº“ç»„æˆé›†ç¾¤ï¼Œåˆ©ç”¨ä¸»ä»å¤åˆ¶ç­‰å®ç°åˆ†å¸ƒå¼ï¼Œæ¯”å¦‚ MySQL é›†ç¾¤æ–¹æ¡ˆ&lt;&#x2F;li&gt;
&lt;li&gt;ä¸€ç±»æ˜¯åœ¨ç°æœ‰æ•°æ®åº“ä¹‹ä¸Šä»¥ä¸­é—´ä»¶ä»£ç†çš„å½¢å¼ï¼Œæä¾›è‡ªåŠ¨åˆ†åº“åˆ†è¡¨ã€æ•…éšœåˆ‡æ¢ã€åˆ†å¸ƒå¼äº‹åŠ¡ç­‰æ”¯æŒï¼Œä»¥ MyCATã€TDSQL ç­‰ä¸ºä»£è¡¨ã€‚&lt;&#x2F;li&gt;
&lt;li&gt;ä¸€ç±»æ˜¯åŸç”Ÿçš„åˆ†å¸ƒå¼æ¶æ„ï¼Œé€šè¿‡å…±è¯†ç®—æ³•å®ç°é«˜å¯ç”¨æ€§ã€æ‰©å±•æ€§ã€æ•°æ®ä¸€è‡´æ€§ç­‰æ”¯æŒï¼Œä»¥ TiDBã€OceanBase ç­‰ä¸ºä»£è¡¨ã€‚&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;åˆ†å¸ƒå¼ CAP ç†è®ºæŒ‡å‡º[6]ï¼Œä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸å¯èƒ½åŒæ—¶æ»¡è¶³ä¸€è‡´æ€§ã€å¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™æ€§è¿™ä¸‰ä¸ªç‰¹ç‚¹ï¼Œå…¶ä¸­åˆ†åŒºå®¹é”™æ€§æ— æ³•é¿å…ï¼ŒåŠ¿å¿…è¦åœ¨ä¸€è‡´æ€§å’Œå¯ç”¨æ€§ä¸­åšå‡ºæƒè¡¡ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å¯ç”¨æ€§çš„ä¿è¯å¯ä»¥é€šè¿‡&lt;strong&gt;å¤åˆ¶&lt;&#x2F;strong&gt;æŠ€æœ¯å®ç°ï¼Œé€šè¿‡åœ¨å¤šå°æœºå™¨ä¸Šä¿å­˜æ•°æ®å‰¯æœ¬ï¼Œæé«˜ç³»ç»Ÿå¯ç”¨æ€§å’Œè¯»å–ååé‡ã€‚MyCAT ä»¥åŠ TDSQL å‡æ”¯æŒä¸»ä»å¤åˆ¶çš„æ–¹å¼ã€‚ä¼ ç»Ÿä¸»ä»å¤åˆ¶æ–¹å¼çš„é—®é¢˜åœ¨äºæ— æ³•ä¿è¯æ•°æ®çš„å¼ºä¸€è‡´æ€§ï¼Œå¦‚æœä¸»åº“æ•…éšœï¼Œå¯èƒ½ä¼šå‡ºç°å¤šä¸ªèŠ‚ç‚¹æˆä¸ºä¸»åº“ï¼ˆè„‘è£‚é—®é¢˜ï¼‰ï¼Œå¯¼è‡´æ•°æ®ä¸¢å¤±æˆ–æŸåã€‚MySQL åœ¨ 5.7 ç‰ˆæœ¬æ¨å‡ºäº† MySQL Group Replication åŠŸèƒ½ï¼Œå®ç°äº†åŸºäº Paxos å…±è¯†ç®—æ³•çš„é«˜å¯ç”¨æ€§å’Œæ•°æ®å¼ºä¸€è‡´æ€§ä¿è¯ï¼ŒTiDB åŸºäº Raft å…±è¯†ç®—æ³•[7]ä¿è¯äº†æ•°æ®çš„å¼ºä¸€è‡´ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;åˆ†å¸ƒå¼æ•°æ®åº“çš„å¦ä¸€ä¸ªç‰¹ç‚¹æ˜¯å¯¹&lt;strong&gt;äº‹åŠ¡&lt;&#x2F;strong&gt;çš„æ”¯æŒï¼Œåˆ†å¸ƒå¼åœºæ™¯ä¸‹ä¿éšœäº‹åŠ¡çš„ ACID åŸåˆ™å¸¸è§çš„åŠæ³•æœ‰ 2PC åè®®ã€TCC åè®®ä»¥åŠ SAGA åè®®ï¼ŒTiDBã€OceanBase ç­‰å‡ä½¿ç”¨ä¸¤é˜¶æ®µæäº¤åè®®ï¼ˆ2PCï¼‰æ¥å®ç°è·¨å¤šä¸ªèŠ‚ç‚¹çš„äº‹åŠ¡æäº¤ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;åŠ¨æ€æ‰©å±•çš„å®ç°å¯ä½¿ç”¨åˆ†åŒºçš„æ–¹å¼ï¼Œå°†åŸæœ‰å•ä¸ªèŠ‚ç‚¹çš„å‹åŠ›åˆ†æ•£åˆ°å¤šä¸ªèŠ‚ç‚¹ï¼Œæå‡ç³»ç»Ÿæ€§èƒ½ã€‚åˆ†åŒºé¢ä¸´çš„é—®é¢˜æ˜¯å¦‚ä½•å°†æ•°æ®å’ŒæŸ¥è¯¢è´Ÿè½½å‡åŒ€åˆ†å¸ƒåœ¨å„ä¸ªèŠ‚ç‚¹ï¼Œå¸¸è§çš„è§£å†³åŠæ³•æœ‰åŸºäº Hash çš„åˆ†åŒºå’ŒåŸºäº Range çš„åˆ†åŒºï¼ŒTiDB ä½¿ç”¨ Range çš„æ–¹å¼åˆ†åŒºï¼Œè€Œ OceanBase ä¸¤ç§éƒ½æ”¯æŒã€‚é™¤äº†å¯¹ä»¥ä¸Šç‰¹ç‚¹çš„æ”¯æŒï¼Œåˆ†å¸ƒå¼æ•°æ®åº“è¿˜å…·æœ‰ HTAPã€SQL å¼•æ“ã€å…¼å®¹æ€§ç­‰ç‰¹ç‚¹ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å‚è€ƒæ–‡çŒ®ï¼š&lt;&#x2F;p&gt;
&lt;p&gt;[1] Edgar F. Codd: â€œA Relational Model of Data for Large Shared Data Banks,â€ Communications of the ACM, volume 13, number 6, pages 377â€“387, June 1970. &lt;&#x2F;p&gt;
&lt;p&gt;[2] CHANG, Fay, DEAN, et al. Bigtable : A Distributed Storage System for Structured Data[J]. Acm Transactions on Computer Systems, 2008, 26(2):1-26.&lt;&#x2F;p&gt;
&lt;p&gt;[3] Decandia G, Hastorun D, Jampani M, et al. Dynamo: Amazon&#x27;s Highly Available Key-value Store[J]. Acm Sigops Operating Systems Review, 2007, 41(6):205-220.&lt;&#x2F;p&gt;
&lt;p&gt;[4] J. C. Corbett, J. Dean, M. Epstein, A. Fikes, et al. Spanner: Googleâ€™s Globally Distributed Database. ACMTrans. Comput. Syst., 31(3):8:1â€“8:22, 2013.&lt;&#x2F;p&gt;
&lt;p&gt;[5] Dongxu Huang, Qi Liu, Qiu Cui, Zhuhe Fang, Xiaoyu Ma, Fei Xu, Li Shen, Liu Tang, Yuxing Zhou, Menglong Huang, Wan Wei, Cong Liu, Jian Zhang, Jianjun Li, Xuelian Wu, Lingyu Song, Ruoxi Sun, Shuaipeng Yu, Lei Zhao, Nicholas Cameron, Liquan Pei, Xin Tang. TiDB: A Raft-based HTAP Database. PVLDB, 13(12): 3072-3084, 2020.&lt;&#x2F;p&gt;
&lt;p&gt;[6] Seth Gilbert and Nancy Lynch: â€œPerspectives on the CAP Theorem,â€ IEEE Computer Magazine, volume 45, number 2, pages 30â€“36, February 2012.&lt;&#x2F;p&gt;
&lt;p&gt;[7] Heidi Howard, Malte Schwarzkopf, Anil Madhavapeddy, and Jon Crowcroft: â€œRaft Refloated: Do We Have Consensus?,â€ ACM SIGOPS Operating Systems Review, volume 49, number 1, pages 12â€“21, January 2015. doi:10.1145&#x2F;2723872.2723876&lt;&#x2F;p&gt;
</content>
    </entry>
    <entry xml:lang="en">
        <title>Lock Freeæ˜¯ä»€ä¹ˆ</title>
        <published>2020-08-28T15:17:05+08:00</published>
        <updated>2020-08-28T15:17:05+08:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://chaojie.fun/articles/lock-free-shi-shen-me/" type="text/html"/>
        <id>https://chaojie.fun/articles/lock-free-shi-shen-me/</id>
        <content type="html">&lt;p&gt;ä»€ä¹ˆæ˜¯Lock-Freeï¼Ÿ&lt;&#x2F;p&gt;
&lt;p&gt;åœ¨å¹¶å‘è®¿é—®æŸä¸ªèµ„æºçš„å®ç°ä¸­ï¼Œç»å¸¸åˆ©ç”¨é”æœºåˆ¶æ¥ä¿è¯å¯¹èµ„æºçš„æ­£ç¡®è®¿é—®ã€‚ä½†æ˜¯é”æœºåˆ¶çš„é—®é¢˜åœ¨äºä¼šå‡ºå…ˆæ­»é”ã€æ´»é”æˆ–è€…çº¿ç¨‹è°ƒåº¦ä¼˜å…ˆçº§è¢«æŠ¢å ç­‰é—®é¢˜ï¼ŒåŒæ—¶é”çš„å¢åŠ å’Œé‡Šæ”¾éƒ½ä¼šæ¶ˆè€—æ—¶é—´ï¼Œå¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;Lock-FreeæŒ‡çš„æ˜¯ä¸é€šè¿‡é”æœºåˆ¶æ¥ä¿è¯èµ„æºçš„å¹¶å‘è®¿é—®ã€‚ä¹Ÿå°±æ˜¯è¯´çº¿ç¨‹é—´ä¸ä¼šç›¸äº’é˜»å¡äº†ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;shiniao.fun&#x2F;images&#x2F;lockfree.png&quot; alt=&quot;lock-free&quot; &#x2F;&gt;)&lt;&#x2F;p&gt;
&lt;p&gt;å®ç°Lock-Freeå¸¸è§çš„è§£å†³åŠæ³•æ˜¯åˆ©ç”¨CASæ“ä½œï¼ŒCASæ˜¯å•¥ï¼Ÿ&lt;&#x2F;p&gt;
&lt;p&gt;CASï¼ˆCompare and Swapï¼‰æ˜¯ä¸€ç§åŸå­æ“ä½œï¼ŒåŸå­å¾ˆå¥½ç†è§£ï¼Œä¸å¯åˆ†å‰²ï¼ˆæ¯”å¦‚åŸå­äº‹åŠ¡ï¼‰ï¼ŒåŸå­æ“ä½œæ„å‘³ç€CPUåœ¨æ“ä½œå†…å­˜æ—¶ï¼ˆè¯»å†™ï¼‰è¦ä¹ˆä¸€æ¬¡å®Œæˆï¼Œè¦ä¹ˆå¤±è´¥ï¼Œä¸ä¼šå‡ºç°åªå®Œæˆä¸€éƒ¨åˆ†çš„ç°è±¡ã€‚ç°ä»£CPUå¯¹åŸå­çš„è¯»å†™æ“ä½œéƒ½æœ‰ç›¸åº”çš„æ”¯æŒï¼Œæ¯”å¦‚X86&#x2F;64æ¶æ„å°±é€šè¿‡CASçš„æ–¹å¼æ¥å®ç°ï¼Œè€ŒARMé€šè¿‡LL&#x2F;SCï¼ˆLoad-Link&#x2F;Store-Conditionalï¼‰æ¥å®ç°ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;åœ¨Goè¯­è¨€ä¸­ï¼Œå¯é€šè¿‡ atomic åŒ…ä¸­çš„ CompareAndSwap** æ–¹æ³•æ¥ç¼–ç¨‹å®ç°CASï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;go&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-go &quot;&gt;&lt;code class=&quot;language-go&quot; data-lang=&quot;go&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;func &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;CompareAndSwapPointer&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;addr &lt;&#x2F;span&gt;&lt;span&gt;*&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;unsafe&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;Pointer&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;old&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;new unsafe&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;Pointer&lt;&#x2F;span&gt;&lt;span&gt;) (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;swapped &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;bool&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;ä½¿ç”¨CASçš„è¿‡ç¨‹ä¸­æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œè€ƒè™‘å¦‚ä¸‹çŠ¶å†µï¼š&lt;&#x2F;p&gt;
&lt;p&gt;å¦‚æœçº¿ç¨‹1è¯»å–å…±äº«å†…å­˜åœ°å€å¾—åˆ°Aï¼Œè¿™æ—¶å€™çº¿ç¨‹2æŠ¢å çº¿ç¨‹1ï¼Œå°†Açš„å€¼ä¿®æ”¹ä¸ºBï¼Œç„¶ååˆæ”¹å›Aï¼Œçº¿ç¨‹1å†æ¬¡è¯»å–å¾—åˆ°Aï¼Œè™½ç„¶ç»“æœç›¸åŒï¼Œä½†æ˜¯Aå·²ç»è¢«ä¿®æ”¹è¿‡äº†ï¼Œè¿™ä¸ªå°±æ˜¯&lt;strong&gt;ABAé—®é¢˜&lt;&#x2F;strong&gt;ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä¸€ç§åŠæ³•æ˜¯é€šè¿‡ç±»ä¼¼ç‰ˆæœ¬å·çš„æ–¹å¼æ¥è§£å†³ï¼Œæ¯æ¬¡æ›´æ–°çš„æ—¶å€™ counter+1ï¼Œæ¯”å¦‚å¯¹äºä¸Šé¢çš„é—®é¢˜ï¼Œåœ¨çº¿ç¨‹2ä¿®æ”¹çš„æ—¶å€™ï¼Œå› ä¸ºå¢åŠ äº†ç‰ˆæœ¬å·ï¼Œå¯¼è‡´ä¿®æ”¹å‰åçš„Aå€¼å¹¶ä¸ç›¸åŒï¼š&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;1A--2B--3A
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;åœ¨è®ºæ–‡&lt;a href=&quot;https:&#x2F;&#x2F;www.cs.rochester.edu&#x2F;u&#x2F;scott&#x2F;papers&#x2F;1996_PODC_queues.pdf&quot;&gt;ã€Š Simple, Fast, and Practical Non-Blocking and Blocking Concurrent Queue Algorithmsã€‹&lt;&#x2F;a&gt; ä¸­ï¼Œæè¿°äº†ä¸€ç§åˆ©ç”¨CASçš„Lock-Free é˜Ÿåˆ—çš„å®ç°ï¼Œé€šè¿‡ &lt;strong&gt;counter æœºåˆ¶&lt;&#x2F;strong&gt;è§£å†³äº†CASä¸­çš„ABAé—®é¢˜ï¼Œå¹¶ä¸”ç»™å‡ºäº†è¯¦ç»†çš„ä¼ªä»£ç å®ç°ï¼Œå¯æŸ¥çœ‹è®ºæ–‡ä¸­çš„è¯¦ç»†ä»‹ç»ã€‚&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;structure pointer_t {ptr: pointer to node_t, count: unsigned integer}
&lt;&#x2F;span&gt;&lt;span&gt; structure node_t {value: data type, next: pointer_t}
&lt;&#x2F;span&gt;&lt;span&gt; structure queue_t {Head: pointer_t, Tail: pointer_t}
&lt;&#x2F;span&gt;&lt;span&gt; 
&lt;&#x2F;span&gt;&lt;span&gt; initialize(Q: pointer to queue_t)
&lt;&#x2F;span&gt;&lt;span&gt;    node = new_node()		&#x2F;&#x2F; Allocate a free node
&lt;&#x2F;span&gt;&lt;span&gt;    node-&amp;gt;next.ptr = NULL	&#x2F;&#x2F; Make it the only node in the linked list
&lt;&#x2F;span&gt;&lt;span&gt;    Q-&amp;gt;Head.ptr = Q-&amp;gt;Tail.ptr = node	&#x2F;&#x2F; Both Head and Tail point to it
&lt;&#x2F;span&gt;&lt;span&gt; 
&lt;&#x2F;span&gt;&lt;span&gt; enqueue(Q: pointer to queue_t, value: data type)
&lt;&#x2F;span&gt;&lt;span&gt;  E1:   node = new_node()	&#x2F;&#x2F; Allocate a new node from the free list
&lt;&#x2F;span&gt;&lt;span&gt;  E2:   node-&amp;gt;value = value	&#x2F;&#x2F; Copy enqueued value into node
&lt;&#x2F;span&gt;&lt;span&gt;  E3:   node-&amp;gt;next.ptr = NULL	&#x2F;&#x2F; Set next pointer of node to NULL
&lt;&#x2F;span&gt;&lt;span&gt;  E4:   loop			&#x2F;&#x2F; Keep trying until Enqueue is done
&lt;&#x2F;span&gt;&lt;span&gt;  E5:      tail = Q-&amp;gt;Tail	&#x2F;&#x2F; Read Tail.ptr and Tail.count together
&lt;&#x2F;span&gt;&lt;span&gt;  E6:      next = tail.ptr-&amp;gt;next	&#x2F;&#x2F; Read next ptr and count fields together
&lt;&#x2F;span&gt;&lt;span&gt;  E7:      if tail == Q-&amp;gt;Tail	&#x2F;&#x2F; Are tail and next consistent?
&lt;&#x2F;span&gt;&lt;span&gt;              &#x2F;&#x2F; Was Tail pointing to the last node?
&lt;&#x2F;span&gt;&lt;span&gt;  E8:         if next.ptr == NULL
&lt;&#x2F;span&gt;&lt;span&gt;                 &#x2F;&#x2F; Try to link node at the end of the linked list
&lt;&#x2F;span&gt;&lt;span&gt;  E9:            if CAS(&amp;amp;tail.ptr-&amp;gt;next, next, &amp;lt;node, next.count+1&amp;gt;)
&lt;&#x2F;span&gt;&lt;span&gt; E10:               break	&#x2F;&#x2F; Enqueue is done.  Exit loop
&lt;&#x2F;span&gt;&lt;span&gt; E11:            endif
&lt;&#x2F;span&gt;&lt;span&gt; E12:         else		&#x2F;&#x2F; Tail was not pointing to the last node
&lt;&#x2F;span&gt;&lt;span&gt;                 &#x2F;&#x2F; Try to swing Tail to the next node
&lt;&#x2F;span&gt;&lt;span&gt; E13:            CAS(&amp;amp;Q-&amp;gt;Tail, tail, &amp;lt;next.ptr, tail.count+1&amp;gt;)
&lt;&#x2F;span&gt;&lt;span&gt; E14:         endif
&lt;&#x2F;span&gt;&lt;span&gt; E15:      endif
&lt;&#x2F;span&gt;&lt;span&gt; E16:   endloop
&lt;&#x2F;span&gt;&lt;span&gt;        &#x2F;&#x2F; Enqueue is done.  Try to swing Tail to the inserted node
&lt;&#x2F;span&gt;&lt;span&gt; E17:   CAS(&amp;amp;Q-&amp;gt;Tail, tail, &amp;lt;node, tail.count+1&amp;gt;)
&lt;&#x2F;span&gt;&lt;span&gt; 
&lt;&#x2F;span&gt;&lt;span&gt; dequeue(Q: pointer to queue_t, pvalue: pointer to data type): boolean
&lt;&#x2F;span&gt;&lt;span&gt;  D1:   loop			     &#x2F;&#x2F; Keep trying until Dequeue is done
&lt;&#x2F;span&gt;&lt;span&gt;  D2:      head = Q-&amp;gt;Head	     &#x2F;&#x2F; Read Head
&lt;&#x2F;span&gt;&lt;span&gt;  D3:      tail = Q-&amp;gt;Tail	     &#x2F;&#x2F; Read Tail
&lt;&#x2F;span&gt;&lt;span&gt;  D4:      next = head.ptr-&amp;gt;next    &#x2F;&#x2F; Read Head.ptr-&amp;gt;next
&lt;&#x2F;span&gt;&lt;span&gt;  D5:      if head == Q-&amp;gt;Head	     &#x2F;&#x2F; Are head, tail, and next consistent?
&lt;&#x2F;span&gt;&lt;span&gt;  D6:         if head.ptr == tail.ptr &#x2F;&#x2F; Is queue empty or Tail falling behind?
&lt;&#x2F;span&gt;&lt;span&gt;  D7:            if next.ptr == NULL  &#x2F;&#x2F; Is queue empty?
&lt;&#x2F;span&gt;&lt;span&gt;  D8:               return FALSE      &#x2F;&#x2F; Queue is empty, couldn&amp;#39;t dequeue
&lt;&#x2F;span&gt;&lt;span&gt;  D9:            endif
&lt;&#x2F;span&gt;&lt;span&gt;                 &#x2F;&#x2F; Tail is falling behind.  Try to advance it
&lt;&#x2F;span&gt;&lt;span&gt; D10:            CAS(&amp;amp;Q-&amp;gt;Tail, tail, &amp;lt;next.ptr, tail.count+1&amp;gt;)
&lt;&#x2F;span&gt;&lt;span&gt; D11:         else		     &#x2F;&#x2F; No need to deal with Tail
&lt;&#x2F;span&gt;&lt;span&gt;                 &#x2F;&#x2F; Read value before CAS
&lt;&#x2F;span&gt;&lt;span&gt;                 &#x2F;&#x2F; Otherwise, another dequeue might free the next node
&lt;&#x2F;span&gt;&lt;span&gt; D12:            *pvalue = next.ptr-&amp;gt;value
&lt;&#x2F;span&gt;&lt;span&gt;                 &#x2F;&#x2F; Try to swing Head to the next node
&lt;&#x2F;span&gt;&lt;span&gt; D13:            if CAS(&amp;amp;Q-&amp;gt;Head, head, &amp;lt;next.ptr, head.count+1&amp;gt;)
&lt;&#x2F;span&gt;&lt;span&gt; D14:               break             &#x2F;&#x2F; Dequeue is done.  Exit loop
&lt;&#x2F;span&gt;&lt;span&gt; D15:            endif
&lt;&#x2F;span&gt;&lt;span&gt; D16:         endif
&lt;&#x2F;span&gt;&lt;span&gt; D17:      endif
&lt;&#x2F;span&gt;&lt;span&gt; D18:   endloop
&lt;&#x2F;span&gt;&lt;span&gt; D19:   free(head.ptr)		     &#x2F;&#x2F; It is safe now to free the old node
&lt;&#x2F;span&gt;&lt;span&gt; D20:   return TRUE                   &#x2F;&#x2F; Queue was not empty, dequeue succeeded
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;é™¤æ­¤ä¹‹å¤–ï¼Œè¯¥è®ºæ–‡è¿˜ç»™å‡ºäº†ä¸€ç§two-lockçš„å¹¶å‘é˜Ÿåˆ—å®ç°ï¼Œé€šè¿‡åœ¨Headå’ŒTailåˆ†åˆ«æ·»åŠ é”ï¼Œæ¥ä¿è¯å…¥é˜Ÿå’Œå‡ºé˜Ÿçš„å®Œå…¨å¹¶å‘æ“ä½œã€‚&lt;&#x2F;p&gt;
&lt;p&gt;Lock-Freeå¸¸ç”¨æ¥å®ç°åº•å±‚çš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚é˜Ÿåˆ—ã€æ ˆç­‰ï¼Œæœ¬æ–‡æ¯”è¾ƒäº†ä½¿ç”¨å•é”æœºåˆ¶çš„é˜Ÿåˆ—å®ç°å’Œå‚è€ƒä¸Šè¿°è®ºæ–‡çš„Lock-Freeé˜Ÿåˆ—å®ç°ï¼Œåœ¨ 1&amp;lt;&amp;lt;12 ä¸ªèŠ‚ç‚¹çš„å‡ºé˜Ÿå…¥é˜Ÿä¸­ï¼Œä¸¤ç§ç®—æ³•å®ç°çš„æ€§èƒ½æµ‹è¯•ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;shiniao.fun&#x2F;images&#x2F;benchmark.png&quot; alt=&quot;æ€§èƒ½æµ‹è¯•&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œéšç€å¤„ç†å™¨ä¸ªæ•°çš„å¢åŠ ï¼Œé˜Ÿåˆ—çš„Lock-Freeç®—æ³•ä¸€ç›´ç¨³å®šåœ¨200ns&#x2F;opï¼Œæ€§èƒ½æ›´ä½³ï¼Œè€Œä½¿ç”¨é”çš„ç®—æ³•è€—æ—¶è¦é«˜å‡ºä¸€å€ã€‚&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»£ç å®ç°å‚è€ƒï¼š&lt;&#x2F;p&gt;
&lt;p&gt;https:&#x2F;&#x2F;github.com&#x2F;rilkee&#x2F;distributed&#x2F;queue&#x2F;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;å‚è€ƒæ–‡çŒ®ï¼š&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;http:&#x2F;&#x2F;preshing.com&#x2F;20120612&#x2F;an-introduction-to-lock-free-programming&#x2F;&lt;&#x2F;li&gt;
&lt;li&gt;Michael, M. M., &amp;amp; Scott, M. L. (1996). Simple, fast, and practical non-blocking and blocking concurrent queue algorithms. Proceedings of the Annual ACM Symposium on Principles of Distributed Computing, 267â€“275. https:&#x2F;&#x2F;doi.org&#x2F;10.1145&#x2F;248052.248106&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
</content>
    </entry>
    <entry xml:lang="en">
        <title>åˆ†å¸ƒå¼XAäº‹åŠ¡å¤„ç†é€»è¾‘</title>
        <published>2020-08-21T22:00:04+08:00</published>
        <updated>2020-08-21T22:00:04+08:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://chaojie.fun/articles/fen-bu-shi-xa-shi-wu-chu-li-luo-ji/" type="text/html"/>
        <id>https://chaojie.fun/articles/fen-bu-shi-xa-shi-wu-chu-li-luo-ji/</id>
        <content type="html">&lt;p&gt;äº‹åŠ¡åœ¨æ•°æ®åº“ä¸­ä»£è¡¨ä¸€ç³»åˆ—æ“ä½œè¦ä¹ˆå…¨éƒ¨éƒ½å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨éƒ½å¤±è´¥ï¼ŒACIDè§„å®šäº†äº‹åŠ¡æ“ä½œçš„åŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§å’ŒæŒä¹…æ€§ã€‚ç„¶è€Œæ•°æ®åº“çš„ç¯å¢ƒä¸å¯èƒ½åªåœ¨å•æœºä¸Šï¼Œåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œä¸€ä¸ªäº‹åŠ¡ä¸­æŸä¸ªæ“ä½œå¯èƒ½å‘å¾€AèŠ‚ç‚¹ï¼Œè€Œå¦ä¸€ä¸ªæ“ä½œå‘å¾€BèŠ‚ç‚¹ï¼Œè¿™å°±å¯¼è‡´æ— æ³•ä¿è¯ACIDçš„åŸåˆ™ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å®ç°åˆ†å¸ƒå¼äº‹åŠ¡å¸¸è§çš„è§£å†³åŠæ³•æœ‰ä»¥ä¸‹å‡ ç§ï¼šXAä¸¤é˜¶æ®µæäº¤åè®®ã€TCCåè®®å’ŒSAGAåè®®ã€‚ä½†æ˜¯è¿™äº›è§£å†³åŠæ³•éƒ½ä¸å¯èƒ½å®Œå…¨ä¿è¯äº‹åŠ¡ä¸å‡ºé”™ã€‚åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æœ‰ä¸€ä¸ªCAPå®šç†ï¼Œè¯´çš„æ˜¯åœ¨åˆ†å¸ƒå¼æƒ…å†µä¸‹ï¼Œä¸å¯èƒ½åŒæ—¶æ»¡è¶³ä¸€è‡´æ€§ã€å¯ç”¨æ€§å’Œå®¹é”™æ€§è¿™ä¸‰ä¸ªæ¡ä»¶ï¼Œä¸€èˆ¬éœ€è¦æ»¡è¶³å…¶ä¸­ä¸¤ä¸ªæ¡ä»¶ã€‚&lt;&#x2F;p&gt;
&lt;h2 id=&quot;xaliang-jie-duan-ti-jiao-xie-yi&quot;&gt;XAä¸¤é˜¶æ®µæäº¤åè®®&lt;&#x2F;h2&gt;
&lt;p&gt;XAåè®®è§„å®šäº†åˆ†å¸ƒå¼äº‹åŠ¡çš„æ ‡å‡†ï¼Œå…¶ä¸­ &lt;strong&gt;AP&lt;&#x2F;strong&gt; ä»£è¡¨åº”ç”¨ç¨‹åºï¼Œ&lt;strong&gt;TM&lt;&#x2F;strong&gt; ä»£è¡¨äº‹åŠ¡ç®¡ç†å™¨ï¼Œè´Ÿè´£åè°ƒå’Œç®¡ç†äº‹åŠ¡ï¼Œè€Œ&lt;strong&gt;RM&lt;&#x2F;strong&gt; ä»£è¡¨ç€èµ„æºç®¡ç†å™¨ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;C:%5CUsers%5Cadmin.MENGFANDE3-PC%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200723085002817.png&quot; alt=&quot;image-20200723085002817&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;è€Œäº‹åŠ¡çš„å…·ä½“å¤„ç†è¿‡ç¨‹å°±æ˜¯TMå’ŒRMä¹‹é—´çš„äº¤äº’ï¼Œåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š&lt;&#x2F;p&gt;
&lt;p&gt;ç¬¬ä¸€é˜¶æ®µï¼šäº‹åŠ¡ç®¡ç†å™¨è¦æ±‚æ¯ä¸ªæ¶‰åŠåˆ°äº‹åŠ¡çš„æ•°æ®åº“é¢„æäº¤(precommit)æ­¤æ“ä½œï¼Œå¹¶åæ˜ æ˜¯å¦å¯ä»¥æäº¤ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ç¬¬äºŒé˜¶æ®µï¼šäº‹åŠ¡ç®¡ç†å™¨è¦æ±‚æ¯ä¸ªæ•°æ®åº“æäº¤æ•°æ®ï¼Œæˆ–è€…å›æ»šæ•°æ®ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä»¥MySQLä¸­çš„XAå¤„ç†é€»è¾‘ä¸ºä¾‹ï¼ˆMySQL5.7ç‰ˆæœ¬å®ç°äº†å¯¹XAåè®®çš„æ”¯æŒï¼‰ï¼Œæ¥çœ‹ä¸‹è¿™ä¸¤ä¸ªé˜¶æ®µçš„é€»è¾‘å¤„ç†è¿‡ç¨‹ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å¯¹äºä¸€ä¸ªäº‹åŠ¡ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sql&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sql &quot;&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;begin&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;insert into&lt;&#x2F;span&gt;&lt;span&gt; student &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;values&lt;&#x2F;span&gt;&lt;span&gt; (&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;xiaoming&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;18&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;update&lt;&#x2F;span&gt;&lt;span&gt; test &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; age = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;18 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;where&lt;&#x2F;span&gt;&lt;span&gt; name = &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;xiaoming&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;commit&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;di-yi-jie-duan&quot;&gt;&lt;strong&gt;ç¬¬ä¸€é˜¶æ®µ&lt;&#x2F;strong&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;äº‹åŠ¡ç®¡ç†å™¨ä¼šç”Ÿæˆä¸€ä¸ªå…¨å±€çš„äº‹åŠ¡IDï¼Œæ¯”å¦‚ä½¿ç”¨uuidç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„IDï¼Œä¸ºäº†æ–¹ä¾¿ç”¨ &lt;strong&gt;xid1&lt;&#x2F;strong&gt; ä»£æ›¿ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;é¦–å…ˆï¼Œé‡åˆ° &lt;strong&gt;begin&lt;&#x2F;strong&gt;ï¼Œä¸å¤„ç†ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ç„¶åæ˜¯ &lt;strong&gt;insert&lt;&#x2F;strong&gt; æ“ä½œï¼Œäº‹åŠ¡ç®¡ç†å™¨æ ¹æ®è¡¨ä¸­ä¸»é”®çš„å€¼è®¡ç®—ï¼ˆhashï¼‰å‡ºåº”è¯¥åˆ†å¸ƒåœ¨å“ªä¸ªèŠ‚ç‚¹ä¸Šï¼Œæ¯”å¦‚insertè¯­å¥è¢«è®¡ç®—å‡ºåº”è¯¥å‘åˆ°èŠ‚ç‚¹Aä¸Šï¼Œäº‹åŠ¡ç®¡ç†å™¨å°±åƒAèŠ‚ç‚¹å‘é€å‘½ä»¤å¼€å§‹XAäº‹åŠ¡ï¼ŒåŒæ—¶å°†insertè¯­å¥å‘é€è¿‡å»ã€‚&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sql&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sql &quot;&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span&gt;xa start &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;xid1&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å¼€å¯äº‹åŠ¡
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;insert into&lt;&#x2F;span&gt;&lt;span&gt; student &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;values&lt;&#x2F;span&gt;&lt;span&gt; (&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;xiaoming&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;18&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;æ¥ä¸‹æ¥ &lt;strong&gt;update&lt;&#x2F;strong&gt; æ“ä½œï¼ŒåŒæ ·çš„ï¼Œäº‹åŠ¡ç®¡ç†å™¨æ ¹æ®ä¸»é”®è®¡ç®—æ‰€å±èŠ‚ç‚¹ï¼Œå¼€å¯XAï¼Œå‘é€updateè¯­å¥ã€‚&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sql&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sql &quot;&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span&gt;xa start &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;xid1&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;; 
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;update&lt;&#x2F;span&gt;&lt;span&gt; test &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; age = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;18 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;where&lt;&#x2F;span&gt;&lt;span&gt; name = &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;xiaoming&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;strong&gt;commit&lt;&#x2F;strong&gt; çš„æ—¶å€™ï¼Œäº‹åŠ¡ç®¡ç†å™¨åˆ†åˆ«å‘èŠ‚ç‚¹Aå’ŒBå‘é€ä¸€ä¸ªé¢„æäº¤æ“ä½œï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sql&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sql &quot;&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span&gt;xa &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;end &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;xid1&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;;
&lt;&#x2F;span&gt;&lt;span&gt;xa prepare &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;xid1&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;di-er-jie-duan&quot;&gt;ç¬¬äºŒé˜¶æ®µ&lt;&#x2F;h3&gt;
&lt;p&gt;å¦‚æœèŠ‚ç‚¹Aå’ŒBéƒ½è¿”å›å°±ç»ªreadyï¼Œæ­¤æ—¶è¿›å…¥ &lt;strong&gt;ç¬¬äºŒé˜¶æ®µ&lt;&#x2F;strong&gt;ï¼š&lt;&#x2F;p&gt;
&lt;p&gt;äº‹åŠ¡ç®¡ç†å™¨åˆ†åˆ«å‘èŠ‚ç‚¹ABå‘é€commitæ“ä½œï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sql&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sql &quot;&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span&gt;xa &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;commit &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;xid1&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;ç›¸åçš„ï¼Œå¦‚æœæœ‰ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹æ˜¯unreadyï¼Œäº‹åŠ¡ç®¡ç†å™¨å°±ä¼šé€šçŸ¥Aã€BèŠ‚ç‚¹çš„æ“ä½œå›æ»šï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sql&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sql &quot;&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span&gt;xa &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;rollback&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;xid1&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœåœ¨è¿›å…¥ç¬¬äºŒé˜¶æ®µcommitçš„æ—¶å€™ï¼ŒæŸä¸ªæ•°æ®èŠ‚ç‚¹å‡ºç°æ•…éšœï¼Œä¼šå¯¼è‡´èŠ‚ç‚¹çŠ¶æ€ä¸ä¸€è‡´ã€‚è§£å†³åŠæ³•æ˜¯æŠŠXAäº‹åŠ¡å¤„ç†çš„è¿‡ç¨‹ä¹Ÿå­˜å…¥æ—¥å¿—æ•°æ®ï¼Œæ¯”å¦‚MySQLå°†å…¶å†™å…¥äº†binlogï¼Œè¿™æ ·åœ¨å‡ºç°é—®é¢˜æ—¶è¿˜å¯ä»¥æ¢å¤ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ•´ä¸ªXAçš„è¿‡ç¨‹ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sql&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sql &quot;&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# é˜¶æ®µä¸€
&lt;&#x2F;span&gt;&lt;span&gt;xa start &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;xid1&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;;  
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;insert into&lt;&#x2F;span&gt;&lt;span&gt; test &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;values&lt;&#x2F;span&gt;&lt;span&gt; (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;xa start &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;xid1&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;; 
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;update&lt;&#x2F;span&gt;&lt;span&gt; test &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span&gt; b = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;where&lt;&#x2F;span&gt;&lt;span&gt; a = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;10&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;xa &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;end &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;xid1&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;;
&lt;&#x2F;span&gt;&lt;span&gt;xa prepare &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;xid1&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# é˜¶æ®µäºŒ
&lt;&#x2F;span&gt;&lt;span&gt;xa &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;commit &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;xid1&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;; 
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# or
&lt;&#x2F;span&gt;&lt;span&gt;xa &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;rollback &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;xid1&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å¤±è´¥å›æ»š
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;everdbfen-bu-shi-shi-wu-de-zhi-chi&quot;&gt;EverDBåˆ†å¸ƒå¼äº‹åŠ¡çš„æ”¯æŒ&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;mycatzhong-de-shi-xian&quot;&gt;MyCatä¸­çš„å®ç°&lt;&#x2F;h3&gt;
&lt;p&gt;EDB-Gridç»„ä»¶ä¸­ï¼Œå€Ÿé‰´äº†MyCatï¼ˆä¹Ÿæ˜¯ä¸€ä¸ªæ•°æ®åº“ä¸­é—´ä»¶ï¼‰çš„XAå¤„ç†é€»è¾‘ï¼ŒMyCatæ ¹æ®XAåè®®å®ç°äº†å¯¹åˆ†å¸ƒå¼äº‹åŠ¡çš„æ”¯æŒï¼Œå…·ä½“æ¥è¯´ï¼š&lt;&#x2F;p&gt;
&lt;p&gt;é€šè¿‡æ•°æ®åº“ç¼–ç¨‹æ¥å£ï¼ˆæ¯”å¦‚JDBCï¼Œä¹Ÿå°±æ˜¯XAåè®®ä¸­çš„APï¼‰å¼€å¯XAäº‹åŠ¡ï¼Œç„¶åæ‰§è¡ŒSQLè¯­å¥ï¼Œé¢„æäº¤ï¼Œæœ€åcommitã€‚&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;java&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-java &quot;&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; å¼€å§‹XAäº‹åŠ¡
&lt;&#x2F;span&gt;&lt;span&gt; conn.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;prepareStatement&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;set xa=on&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;).&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;execute&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; æ’å…¥è¯­å¥
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; åˆ†åˆ«é¢„æäº¤
&lt;&#x2F;span&gt;&lt;span&gt;conn.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;prepareStatement&lt;&#x2F;span&gt;&lt;span&gt;(sql1).&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;execute&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span&gt;conn.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;prepareStatement&lt;&#x2F;span&gt;&lt;span&gt;(sql2).&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;execute&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; commit
&lt;&#x2F;span&gt;&lt;span&gt; conn.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;commit&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;è¿‡ç¨‹è·ŸMySQLç±»ä¼¼ï¼Œåœ¨å®ç°ä¸Šï¼Œåˆ©ç”¨uuidç”Ÿæˆäº†ä¸€ä¸ªå…¨å±€çš„äº‹åŠ¡IDï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;java&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-java &quot;&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;public&lt;&#x2F;span&gt;&lt;span&gt; void &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;setXATXEnabled&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;boolean&lt;&#x2F;span&gt;&lt;span&gt; xaTXEnabled) {
&lt;&#x2F;span&gt;&lt;span&gt;   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;(xaTXEnabled) {
&lt;&#x2F;span&gt;&lt;span&gt;       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;this&lt;&#x2F;span&gt;&lt;span&gt;.xaTXID == &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;null&lt;&#x2F;span&gt;&lt;span&gt;) {
&lt;&#x2F;span&gt;&lt;span&gt;           xaTXID = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;genXATXID&lt;&#x2F;span&gt;&lt;span&gt;(); &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; è·å¾— XA äº‹åŠ¡ç¼–å·
&lt;&#x2F;span&gt;&lt;span&gt;       }
&lt;&#x2F;span&gt;&lt;span&gt;   } &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;this&lt;&#x2F;span&gt;&lt;span&gt;.xaTXID = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;null&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;   }
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F;......
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;public static &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;String &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;getUUID&lt;&#x2F;span&gt;&lt;span&gt;() {
&lt;&#x2F;span&gt;&lt;span&gt;   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;String&lt;&#x2F;span&gt;&lt;span&gt; s = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;UUID&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;randomUUID&lt;&#x2F;span&gt;&lt;span&gt;().&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;toString&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span&gt;   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return&lt;&#x2F;span&gt;&lt;span&gt; s.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;substring&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;8&lt;&#x2F;span&gt;&lt;span&gt;) + s.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;substring&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;9&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;13&lt;&#x2F;span&gt;&lt;span&gt;) + s.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;substring&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;14&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;18&lt;&#x2F;span&gt;&lt;span&gt;) + s.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;substring&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;19&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;23&lt;&#x2F;span&gt;&lt;span&gt;) + s.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;substring&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;24&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;ç„¶ååœ¨äº‹åŠ¡ç®¡ç†å™¨å‘èŠ‚ç‚¹åˆ†å‘è¯­å¥æ—¶ï¼Œä¼šå…ˆå†™å…¥XA STARTï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;java&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-java &quot;&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;(expectAutocommit == &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;false &lt;&#x2F;span&gt;&lt;span&gt;&amp;amp;&amp;amp; xaTxID != &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;null &lt;&#x2F;span&gt;&lt;span&gt;&amp;amp;&amp;amp; xaStatus == &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;TxState&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;TX_INITIALIZE_STATE&lt;&#x2F;span&gt;&lt;span&gt;) { 
&lt;&#x2F;span&gt;&lt;span&gt;       xaCmd = &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;XA START &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; + xaTxID + &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;;
&lt;&#x2F;span&gt;&lt;span&gt;       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;this&lt;&#x2F;span&gt;&lt;span&gt;.xaStatus = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;TxState&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;TX_STARTED_STATE&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;   }
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F;......
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; and our query sql to multi command at last
&lt;&#x2F;span&gt;&lt;span&gt;sb.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;append&lt;&#x2F;span&gt;&lt;span&gt;(rrn.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;getStatement&lt;&#x2F;span&gt;&lt;span&gt;() + &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; syn and execute others
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;this&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sendQueryCmd&lt;&#x2F;span&gt;&lt;span&gt;(sb.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;toString&lt;&#x2F;span&gt;&lt;span&gt;());
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;MyCatåœ¨æ‰§è¡Œäº‹åŠ¡æ“ä½œæ˜¯ï¼Œä¼šåŒæ—¶å°†å…¶å†™å…¥æ—¥å¿—ä¸­ï¼Œä¿è¯å¯æ¢å¤ã€‚&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;java&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-java &quot;&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;(mysqlCon.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;getXaStatus&lt;&#x2F;span&gt;&lt;span&gt;() == &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;TxState&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;TX_STARTED_STATE&lt;&#x2F;span&gt;&lt;span&gt;) { &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; XA äº‹åŠ¡
&lt;&#x2F;span&gt;&lt;span&gt;               &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F;recovery Log
&lt;&#x2F;span&gt;&lt;span&gt;               participantLogEntry[started] = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;ParticipantLogEntry&lt;&#x2F;span&gt;&lt;span&gt;(xaTxId, conn.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;getHost&lt;&#x2F;span&gt;&lt;span&gt;(), &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;, conn.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;getSchema&lt;&#x2F;span&gt;&lt;span&gt;(), ((&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;MySQLConnection&lt;&#x2F;span&gt;&lt;span&gt;) conn).&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;getXaStatus&lt;&#x2F;span&gt;&lt;span&gt;());
&lt;&#x2F;span&gt;&lt;span&gt;               &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;String&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[]&lt;&#x2F;span&gt;&lt;span&gt; cmds = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;String&lt;&#x2F;span&gt;&lt;span&gt;[]{&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;XA END &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; + xaTxId, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; XA END å‘½ä»¤
&lt;&#x2F;span&gt;&lt;span&gt;                       &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;XA PREPARE &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; + xaTxId}; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; XA PREPARE å‘½ä»¤
&lt;&#x2F;span&gt;&lt;span&gt;               mysqlCon.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;execBatchCmd&lt;&#x2F;span&gt;&lt;span&gt;(cmds);
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;åŒæ ·çš„ï¼Œcommitæ—¶ä¹Ÿä¼šåŒæ­¥å†™å…¥æ—¥å¿—ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;rollbackï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;java&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-java &quot;&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;(needRollback) {
&lt;&#x2F;span&gt;&lt;span&gt;           &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span&gt; j = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;; j &amp;lt; coordinatorLogEntry.participants.length; j++) {
&lt;&#x2F;span&gt;&lt;span&gt;               &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;ParticipantLogEntry&lt;&#x2F;span&gt;&lt;span&gt; participantLogEntry = coordinatorLogEntry.participants[j];
&lt;&#x2F;span&gt;&lt;span&gt;               &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F;XA rollback
&lt;&#x2F;span&gt;&lt;span&gt;               &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;String&lt;&#x2F;span&gt;&lt;span&gt; xacmd = &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;XA ROLLBACK &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; + coordinatorLogEntry.id + &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;;
&lt;&#x2F;span&gt;&lt;span&gt;               &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;OneRawSQLQueryResultHandler&lt;&#x2F;span&gt;&lt;span&gt; resultHandler = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;OneRawSQLQueryResultHandler&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;String&lt;&#x2F;span&gt;&lt;span&gt;[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;], &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;XARollbackCallback&lt;&#x2F;span&gt;&lt;span&gt;());
&lt;&#x2F;span&gt;&lt;span&gt;               outloop:
&lt;&#x2F;span&gt;&lt;span&gt;               &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; ...
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;everdbzhong-de-shi-xian&quot;&gt;EverDBä¸­çš„å®ç°&lt;&#x2F;h3&gt;
&lt;p&gt;å†æ¥çœ‹ä¸‹EverDBçš„å¤„ç†è¿‡ç¨‹ï¼š&lt;&#x2F;p&gt;
&lt;p&gt;é¦–å…ˆæ˜¯ç”Ÿæˆxidï¼Œä»0å¼€å§‹é€’å¢ã€‚&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;c++&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-c++ &quot;&gt;&lt;code class=&quot;language-c++&quot; data-lang=&quot;c++&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;unsigned long &lt;&#x2F;span&gt;&lt;span&gt;XA_manager::&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;generate_xid&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;unsigned long&lt;&#x2F;span&gt;&lt;span&gt; ret = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;  xid_mutex.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;acquire&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;try &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F;TODO: find a place to do init_max_xid
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;(!init_xid)
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;init_max_xid&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span&gt;    ret = xid_next++;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;(!ret) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; 0 is kept as the initial value
&lt;&#x2F;span&gt;&lt;span&gt;      ++ret;
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F;...
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;å¼€å§‹XAäº‹åŠ¡ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;c++&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-c++ &quot;&gt;&lt;code class=&quot;language-c++&quot; data-lang=&quot;c++&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;void &lt;&#x2F;span&gt;&lt;span&gt;MySQLXA_helper::&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;init_conn_to_start_xa&lt;&#x2F;span&gt;&lt;span&gt;(Session *&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;session&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;                                           DataSpace *&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;space&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;                                           Connection *&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;conn&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;unsigned long&lt;&#x2F;span&gt;&lt;span&gt; xid = session-&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get_xa_id&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; clear the pending transaction
&lt;&#x2F;span&gt;&lt;span&gt;  conn-&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;execute_one_modify_sql&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;COMMIT;&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;);
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; ......
&lt;&#x2F;span&gt;&lt;span&gt;  
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;record_xa_redo_log&lt;&#x2F;span&gt;&lt;span&gt;(session, space, sql.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;c_str&lt;&#x2F;span&gt;&lt;span&gt;());  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; log
&lt;&#x2F;span&gt;&lt;span&gt;   
&lt;&#x2F;span&gt;&lt;span&gt;  }
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; ...
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; start xa transaction
&lt;&#x2F;span&gt;&lt;span&gt;  sql += &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;XA START &amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;;
&lt;&#x2F;span&gt;&lt;span&gt;  sql += tmp;
&lt;&#x2F;span&gt;&lt;span&gt;  sql += &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&amp;#39;;&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;;
&lt;&#x2F;span&gt;&lt;span&gt;  conn-&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;execute_one_modify_sql&lt;&#x2F;span&gt;&lt;span&gt;(sql.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;c_str&lt;&#x2F;span&gt;&lt;span&gt;());
&lt;&#x2F;span&gt;&lt;span&gt;  conn-&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;set_start_xa_conn&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;true&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;}&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;ç¬¬äºŒé˜¶æ®µï¼šXA COMMIT æˆ–è€…ROLLBACKï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;c++&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-c++ &quot;&gt;&lt;code class=&quot;language-c++&quot; data-lang=&quot;c++&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;void &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;xa_commit_or_rollback_xid&lt;&#x2F;span&gt;&lt;span&gt;(Connection *&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;conn&lt;&#x2F;span&gt;&lt;span&gt;, string &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;xid&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;flag&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;  string &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sql&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&amp;quot;);
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;(flag == TC_TRANSACTION_COMMIT)
&lt;&#x2F;span&gt;&lt;span&gt;    sql += &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;XA COMMIT &amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; xa commit
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else if &lt;&#x2F;span&gt;&lt;span&gt;(flag != TC_TRANSACTION_COMMIT)
&lt;&#x2F;span&gt;&lt;span&gt;    sql += &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;XA ROLLBACK &amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; xa rollback
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  sql += xid.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;c_str&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span&gt;  sql += &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&amp;#39;;&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;check_xa_sql_is_not_running&lt;&#x2F;span&gt;&lt;span&gt;(conn, sql);
&lt;&#x2F;span&gt;&lt;span&gt;  TimeValue timeout = TimeValue(backend_sql_net_timeout);
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F;......
&lt;&#x2F;span&gt;&lt;span&gt;  }
&lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;}&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;åŒæ—¶äº‹åŠ¡å¤„ç†çš„è¿‡ç¨‹ä¼šå†™å…¥redologä¸­ï¼Œæ¯”å¦‚ä¸Šé¢çš„å¼€å§‹XAäº‹åŠ¡ä¸­ &lt;strong&gt;record_xa_redo_log&lt;&#x2F;strong&gt; ã€‚&lt;&#x2F;p&gt;
</content>
    </entry>
    <entry xml:lang="en">
        <title>ä½ å¥½å“‡ï¼ŒLan</title>
        <published>2020-02-13T11:19:00+08:00</published>
        <updated>2020-02-13T11:19:00+08:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://chaojie.fun/articles/hello-lan/" type="text/html"/>
        <id>https://chaojie.fun/articles/hello-lan/</id>
        <content type="html">&lt;p&gt;é€šæƒ æ²³å¼€å§‹ç»“å†°ä¹‹åï¼Œæœ‰äººåœ¨å²¸è¾¹å†™åˆ°ï¼Œç”Ÿæ´»æ˜¯åˆç†çš„ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä¸–ç•Œæ­£åœ¨ç§‘å¹»åŒ–ï¼Œæˆ‘è¿™æ ·å¯¹lanè¯´è¿‡ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å¸¸æ•°å¼€å§‹å´©å¡Œï¼Œä¸å¯å˜æ¶ˆå¤±ï¼Œç”Ÿæ´»å˜æˆä¸€ç§ç¼“æ…¢å—é”¤çš„è¿‡ç¨‹ã€‚èº¯ä½“ä¹Ÿå¼€å§‹æ–‘æ–‘é”ˆè¿¹ï¼ŒæŒ£æ‰ï¼Œç²‰ç¢ï¼Œç”šè‡³å‰¥ç¦»ï¼Œè¡€ç®¡è¿¸å‡ºè“è‰²æ¶²ä½“ã€‚ä¹Ÿåªèƒ½è‡ªæˆ‘æŸç¼šï¼Œå¹¶å‘ŠçŸ¥ç”Ÿæ´»çš„è‰°éš¾ä¸æ·±é‡ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œå¹¸ç¦åœ¨å“ªé‡Œï¼Ÿ&lt;&#x2F;p&gt;
&lt;p&gt;lanå¯¹æˆ‘è¯´ï¼ŒåŠ ç‚¹é¦™èœç®€ç›´é¦™ç–¯äº†ã€‚æˆ‘å¼€å§‹æ…¢æ…¢çˆ±ä¸Šé¦™èœã€‚åŒæ—¶è¿˜æœ‰ä¸è¦è‘±èŠ±ï¼Œç™¾äº‹ï¼Œæ³•å…¹ä¹é˜Ÿï¼Œé­æ·‘èŠ¬ï¼ŒåŠ¨ç‰©å›­é’‰å­æˆ·ã€‚è¿˜æœ‰æ•å¼€å¿ƒæ‰‰ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ç³–é†‹æ’éª¨è¦æŠŠç³–å…ˆæ…¢æ…¢ç‚’åŒ–ï¼Œç‚’æ–¹ä¾¿é¢å’Œè€å¹²å¦ˆæ˜¯ç»é…ï¼Œç‰›è§’åŒ…å’¬ä¸€å£æº¢å‡ºç«å±±ç†”å²©èˆ¬çš„é¦…ï¼Œè¾£å­é¸¡è¦ç‚¸ä¸¤éæ‰å¥½åƒï¼Œç•ªèŒ„ç‰›è‚‰æ±¤æ˜¯äººé—´ç¾å‘³ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘ä¹Ÿå¼€å§‹å†™ä¸€æœ¬å…³äºæ˜¼å¤œä¸å¨æˆ¿çš„è¯—ï¼Œå¼€å§‹åœ¨æ™šä¸Šå†™è¿™äººé—´æƒ…äº‹ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œä½ å¥½å“‡ï¼Œlanã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;file.chaojie.fun&#x2F;hello_lan.jpg&quot; alt=&quot;hello lan&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
</content>
    </entry>
    <entry xml:lang="en">
        <title>åˆ†å¸ƒå¼ç¼“å­˜ä¸­ä¸€è‡´æ€§hashç®—æ³•åŸç†è§£æä¸å®ç°</title>
        <published>2019-11-22T15:34:42+08:00</published>
        <updated>2019-11-22T15:34:42+08:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://chaojie.fun/articles/fen-bu-shi-huan-cun-zhong-yi-zhi-xing-hash-suan-fa-yuan-li-jie-xi-yu-shi-xian/" type="text/html"/>
        <id>https://chaojie.fun/articles/fen-bu-shi-huan-cun-zhong-yi-zhi-xing-hash-suan-fa-yuan-li-jie-xi-yu-shi-xian/</id>
        <content type="html">&lt;p&gt;åˆ†å¸ƒå¼ç¼“å­˜æœåŠ¡ä¸­ï¼Œæä¾›ç¼“å­˜æœåŠ¡çš„èŠ‚ç‚¹å¯èƒ½æœ‰å¾ˆå¤šä¸ªã€‚åœ¨å•æœºç¼“å­˜æœåŠ¡ä¸­ï¼Œæ•°æ®è¢«ç¼“å­˜çš„æµç¨‹æ˜¯è¿™æ ·çš„ï¼š&lt;&#x2F;p&gt;
&lt;p&gt;ç¬¬ä¸€æ¬¡æŸ¥è¯¢æ•°æ®æ—¶é¦–å…ˆä»æºæ•°æ®æŸ¥è¯¢ï¼ˆæ¯”å¦‚æ•°æ®åº“ï¼‰ï¼Œæ‰¾åˆ°ä¹‹åï¼ŒåŒæ—¶æ”¾å…¥ç¼“å­˜æœåŠ¡å™¨ä¸­ï¼Œä¸‹æ¬¡æŸ¥è¯¢åŒæ ·çš„æ•°æ®æ—¶ä¼šç›´æ¥ä»ç¼“å­˜æœåŠ¡å™¨ä¸ŠæŸ¥æ‰¾ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä½†æ˜¯ç¼“å­˜æœåŠ¡å™¨ä¸€èˆ¬ä¸å¤ªå¯èƒ½æ˜¯å•æœºçš„ï¼Œå¾€å¾€æœ‰å¤šä¸ªèŠ‚ç‚¹ã€‚è½¬æ¢ä¸ºåˆ†å¸ƒå¼ä¹‹åï¼Œä¼šå‡ºç°ä¸€äº›é—®é¢˜ã€‚&lt;&#x2F;p&gt;
&lt;h2 id=&quot;wen-ti-yi-shu-ju-rong-yu&quot;&gt;é—®é¢˜ä¸€æ•°æ®å†—ä½™&lt;&#x2F;h2&gt;
&lt;p&gt;è€ƒè™‘ä¸€ä¸‹ï¼Œå•æœºæœåŠ¡çš„æ—¶å€™ï¼Œåˆ©ç”¨LRUç®—æ³•å®ç°ç¼“å­˜çš„å­˜å–ï¼Œä¸€ä¸ªkeyå¯¹åº”ä¸€ä¸ªæ•°æ®valueã€‚åˆ†å¸ƒå¼æ¡ä»¶ä¸‹ï¼Œå¦‚æœåªæ˜¯å•çº¯çš„å¢åŠ èŠ‚ç‚¹ï¼Œè¿™æ¬¡æŸ¥æ‰¾keyå¯¹åº”çš„æ•°æ®åœ¨AèŠ‚ç‚¹ä¸Šï¼Œä¸‹æ¬¡æŸ¥æ‰¾çš„æ—¶å€™å´åœ¨BæœåŠ¡å™¨ä¸Šã€‚åŒä¸€ä¸ªkeyæœ‰å¤šä¸ªç¼“å­˜ï¼Œå®Œå…¨æ²¡å¿…è¦å˜›ï¼Œè¿™æ ·å°±æ˜¯æ•°æ®å†—ä½™äº†ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ€ä¹ˆè§£å†³ï¼Ÿ&lt;&#x2F;p&gt;
&lt;p&gt;åˆ©ç”¨å“ˆå¸Œã€‚é¦–å…ˆå¯¹keyå€¼hashï¼Œç„¶ååˆ©ç”¨èŠ‚ç‚¹æ•°å–ä½™ã€‚&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;h = hash(key) %len(node)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;è¿™æ ·åŒä¸€ä¸ªkeyçš„æ•°æ®åªä¼šè¢«ä¸€ä¸ªèŠ‚ç‚¹ç¼“å­˜ã€‚å¾ˆawesomeæœ‰æ²¡æœ‰ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;Butï¼Œæˆ‘ä¸å¯èƒ½ä¸€ç›´æ˜¯è¿™å‡ ä¸ªèŠ‚ç‚¹å‘€ï¼Œä¸‡ä¸€æœ‰çš„èŠ‚ç‚¹æŒ‚äº†å‘¢ï¼Œæˆ–è€…æˆ‘è¦æ·»åŠ èŠ‚ç‚¹å‘¢ï¼Ÿ&lt;&#x2F;p&gt;
&lt;h2 id=&quot;wen-ti-er-rong-cuo-xing-he-kuo-zhan-xing&quot;&gt;é—®é¢˜äºŒå®¹é”™æ€§å’Œæ‰©å±•æ€§&lt;&#x2F;h2&gt;
&lt;p&gt;å¦‚æœæœ‰èŠ‚ç‚¹æŒ‚äº†æˆ–è€…æ–°å¢èŠ‚ç‚¹ï¼Œéƒ½ä¼šå¯¼è‡´&lt;strong&gt;len(node)&lt;&#x2F;strong&gt; çš„å˜åŒ–ï¼Œé‚£ä¹ˆåˆ©ç”¨hashè®¡ç®—å‡ºæ¥çš„å€¼è·Ÿä¹‹å‰çš„å°±ä¸ä¸€æ ·ã€‚è¿™æ ·å¯¼è‡´æ–°å¢æˆ–è€…åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¹‹å‰çš„æ‰€æœ‰ç¼“å­˜éƒ½å¤±æ•ˆäº†ï¼æˆ‘çš„å¤©å“ªï¼ï¼ï¼&lt;&#x2F;p&gt;
&lt;p&gt;è¿™ç§é—®é¢˜å°±æ˜¯ &lt;strong&gt;ç¼“å­˜é›ªå´©&lt;&#x2F;strong&gt; ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ€ä¹ˆåŠå‘¢ï¼Ÿåˆ©ç”¨ä¸€è‡´æ€§hashç®—æ³•ã€‚&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ï¼ˆConsistent Hashingï¼‰æœ€æ—©åœ¨è®ºæ–‡ã€Š&lt;a href=&quot;http:&#x2F;&#x2F;www.akamai.com&#x2F;dl&#x2F;technical_publications&#x2F;ConsistenHashingandRandomTreesDistributedCachingprotocolsforrelievingHotSpotsontheworldwideweb.pdf&quot;&gt;Consistent Hashing and Random Trees: Distributed Caching Protocols for Relieving Hot Spots on the World Wide Web&lt;&#x2F;a&gt;ã€‹ä¸­è¢«æå‡ºã€‚&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;å®ƒçš„åŸç†æ˜¯ï¼ŒæŠŠæ‰€æœ‰çš„hashå€¼ç©ºé—´ï¼ˆå°±æ˜¯ä¸Šé¢å…¬å¼è®¡ç®—å‡ºæ¥çš„hï¼‰çœ‹æˆæ˜¯ä¸€ä¸ªç¯ï¼Œå–å€¼èŒƒå›´ä»0åˆ°2^32-1ã€‚å°†æ¯ä¸ªæœåŠ¡å™¨èŠ‚ç‚¹é€šè¿‡hashæ˜ å°„åˆ°ç¯ä¸Šï¼ŒåŒæ—¶å°†æ•°æ®keyé€šè¿‡hashå‡½æ•°ä¹Ÿæ˜ å°„åˆ°ç¯ä¸Šï¼ŒæŒ‰é¡ºæ—¶é’ˆæ–¹å‘ï¼Œæ•°æ®keyè·Ÿå“ªä¸ªèŠ‚ç‚¹è¿‘å°±å±äºå“ªä¸ªèŠ‚ç‚¹ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä¸¾ä¸ªä¾‹å­ï¼Œç°åœ¨æœ‰ä¸‰ä¸ªç¼“å­˜æœåŠ¡å™¨èŠ‚ç‚¹2ï¼Œ4ï¼Œ6ï¼Œå‡è®¾è¿™ä¸ªhashç®—æ³•å°±æ˜¯åŸæ ·è¾“å‡ºï¼Œæˆ‘ä»¬å°†èŠ‚ç‚¹å’Œæ•°æ®ï¼ˆ1ï¼Œ3ï¼Œ7ï¼Œ9ï¼‰ç»è¿‡hashä¹‹ååˆ°ç¯ä¸Šï¼š&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;tva1.sinaimg.cn&#x2F;large&#x2F;0082zybply1gc53lsij1jj30b3079glv.jpg&quot; alt=&quot;ä¸€è‡´æ€§hash&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;æŒ‰é¡ºæ—¶é’ˆæ–¹å‘ï¼Œæ•°æ®1å±äºnode2ï¼Œæ•°æ®3å±äºnode4ï¼Œæ•°æ®7ã€9è¾“å…¥node6ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;è²Œä¼¼çœ‹èµ·æ¥ä¸é”™ï¼Œä½†æ˜¯è¿˜æœ‰ä¸ªé—®é¢˜ã€‚åœ¨èŠ‚ç‚¹è¾ƒå°‘çš„æƒ…å†µä¸Šï¼Œä¼šå‘ç”Ÿ &lt;strong&gt;æ•°æ®å€¾æ–œ&lt;&#x2F;strong&gt; çš„é—®é¢˜ã€‚æ¯”å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ•°æ®å¯èƒ½å¤§é‡çš„å †ç§¯åœ¨node6å’Œnode2ä¹‹é—´ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;è§£å†³åŠæ³•æ˜¯æ·»åŠ è™šæ‹ŸèŠ‚ç‚¹ï¼Œåˆ©ç”¨è™šæ‹ŸèŠ‚ç‚¹è´Ÿè½½å‡è¡¡æ¯ä¸ªæ•°æ®ã€‚è™šæ‹ŸèŠ‚ç‚¹çš„åšæ³•æ˜¯ï¼Œå¯¹ä¸€ä¸ªçœŸå®èŠ‚ç‚¹è®¡ç®—å¤šä¸ªhashï¼Œæ”¾åˆ°ç¯ä¸Šï¼Œæ‰€æœ‰è¿™äº›è™šæ‹ŸèŠ‚ç‚¹çš„æ•°æ®éƒ½å±äºçœŸå®èŠ‚ç‚¹ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;tva1.sinaimg.cn&#x2F;large&#x2F;0082zybply1gc54o5rm70j30ax06xwf4.jpg&quot; alt=&quot;ä¸€è‡´æ€§hash2&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;è¿™æ ·æ‰€æœ‰çš„æ•°æ®éƒ½å‡åŒ€çš„åˆ†å¸ƒåœ¨ç¯ä¸Šäº†ã€‚&lt;&#x2F;p&gt;
&lt;h2 id=&quot;suan-fa-shi-xian&quot;&gt;ç®—æ³•å®ç°&lt;&#x2F;h2&gt;
&lt;p&gt;äº†è§£äº†åŸç†ï¼Œæ¥åŠ¨æ‰‹å®ç°ä¸€ä¸‹ä¸€è‡´æ€§hashç®—æ³•ã€‚æ•´ä¸ªç®—æ³•æ¨¡ä»¿goè¯­è¨€çš„åˆ†å¸ƒå¼ç¼“å­˜æœåŠ¡&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;golang&#x2F;groupcache&quot;&gt;groupcache&lt;&#x2F;a&gt; å®ç°ï¼Œgroupcacheå¯ä»¥è¯´æ˜¯&lt;strong&gt;memcached&lt;&#x2F;strong&gt; çš„goè¯­è¨€å®ç°ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;é¦–å…ˆå®šä¹‰ä¸€è‡´æ€§hashç¯ç»“æ„ä½“ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;go&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-go &quot;&gt;&lt;code class=&quot;language-go&quot; data-lang=&quot;go&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;type &lt;&#x2F;span&gt;&lt;span&gt;Hash &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;func&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;data &lt;&#x2F;span&gt;&lt;span&gt;[]&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;byte&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;uint32
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; ConHash ä¸€è‡´æ€§hash
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;type &lt;&#x2F;span&gt;&lt;span&gt;ConHash &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;struct &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;hash     &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;Hash           &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; hashç®—æ³•
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;replicas &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; è™šæ‹ŸèŠ‚ç‚¹æ•°
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;nodes    &lt;&#x2F;span&gt;&lt;span&gt;[]&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int          &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; hashç¯èŠ‚ç‚¹æ•°
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;hashMap  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;map&lt;&#x2F;span&gt;&lt;span&gt;[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span&gt;]&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;string &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; è™šæ‹ŸèŠ‚ç‚¹-çœŸå®èŠ‚ç‚¹
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œç±»å‹Hashå°±æ˜¯ä¸ªå›è°ƒå‡½æ•°ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰hashç®—æ³•ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ç„¶åéœ€è¦å¾€hashç¯ä¸Šæ·»åŠ èŠ‚ç‚¹ï¼Œæ ¹æ®æŒ‡å®šçš„è™šæ‹ŸèŠ‚ç‚¹æ•°ç”¨hashç®—æ³•æ”¾åˆ°ç¯ä¸Šã€‚&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;go&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-go &quot;&gt;&lt;code class=&quot;language-go&quot; data-lang=&quot;go&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; Add æ·»åŠ èŠ‚ç‚¹åˆ°hashç¯ä¸Š
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;func &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;m &lt;&#x2F;span&gt;&lt;span&gt;*&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;ConHash&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;Add&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;nodes &lt;&#x2F;span&gt;&lt;span&gt;...&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;string&lt;&#x2F;span&gt;&lt;span&gt;) {
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;_&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;node &lt;&#x2F;span&gt;&lt;span&gt;:= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;range &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;nodes &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; å°†èŠ‚ç‚¹å€¼æ ¹æ®æŒ‡å®šçš„è™šæ‹ŸèŠ‚ç‚¹æ•°åˆ©ç”¨hashç®—æ³•æ”¾ç½®åˆ°ç¯ä¸­
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;i &lt;&#x2F;span&gt;&lt;span&gt;:= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;i &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;m&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;replicas&lt;&#x2F;span&gt;&lt;span&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;i&lt;&#x2F;span&gt;&lt;span&gt;++ {
&lt;&#x2F;span&gt;&lt;span&gt;			&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;h &lt;&#x2F;span&gt;&lt;span&gt;:= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;m&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;hash&lt;&#x2F;span&gt;&lt;span&gt;([]&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;byte&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;strconv&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Itoa&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;i&lt;&#x2F;span&gt;&lt;span&gt;) + &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;node&lt;&#x2F;span&gt;&lt;span&gt;)))
&lt;&#x2F;span&gt;&lt;span&gt;			&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;m&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;nodes &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;append&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;m&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;nodes&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;h&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;			&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; æ˜ å°„è™šæ‹ŸèŠ‚ç‚¹åˆ°çœŸå®èŠ‚ç‚¹
&lt;&#x2F;span&gt;&lt;span&gt;			&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;m&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;hashMap&lt;&#x2F;span&gt;&lt;span&gt;[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;h&lt;&#x2F;span&gt;&lt;span&gt;] = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;node
&lt;&#x2F;span&gt;&lt;span&gt;		}
&lt;&#x2F;span&gt;&lt;span&gt;	}
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sort&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Ints&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;m&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;nodes&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;åŒæ ·è¿˜éœ€è¦æ ¹æ®keyå€¼ä»ç¯ä¸Šè·å–å¯¹åº”çš„èŠ‚ç‚¹ï¼Œè·å–åˆ°èŠ‚ç‚¹ä¹‹åä»è¯¥èŠ‚ç‚¹æŸ¥æ‰¾æ•°æ®ã€‚&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;go&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-go &quot;&gt;&lt;code class=&quot;language-go&quot; data-lang=&quot;go&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; Get ä»hashç¯ä¸Šè·å–keyå¯¹åº”çš„èŠ‚ç‚¹
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;func &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;m &lt;&#x2F;span&gt;&lt;span&gt;*&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;ConHash&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;Get&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;key &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;string&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;string &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;len&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;m&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;nodes&lt;&#x2F;span&gt;&lt;span&gt;) == &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0 &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;	}
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; è®¡ç®—keyçš„hashå€¼
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;h &lt;&#x2F;span&gt;&lt;span&gt;:= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;m&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;hash&lt;&#x2F;span&gt;&lt;span&gt;([]&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;byte&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span&gt;)))
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; é¡ºæ—¶é’ˆæ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…çš„è™šæ‹ŸèŠ‚ç‚¹
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;idx &lt;&#x2F;span&gt;&lt;span&gt;:= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sort&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Search&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;len&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;m&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;nodes&lt;&#x2F;span&gt;&lt;span&gt;), &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;func&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;i &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;bool &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;m&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;nodes&lt;&#x2F;span&gt;&lt;span&gt;[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;i&lt;&#x2F;span&gt;&lt;span&gt;] &amp;gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;h
&lt;&#x2F;span&gt;&lt;span&gt;	})
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; ä»hashç¯æŸ¥æ‰¾
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; è¿”å›hashæ˜ å°„çš„çœŸå®èŠ‚ç‚¹
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;m&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;hashMap&lt;&#x2F;span&gt;&lt;span&gt;[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;m&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;nodes&lt;&#x2F;span&gt;&lt;span&gt;[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;idx&lt;&#x2F;span&gt;&lt;span&gt;%&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;len&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;m&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;nodes&lt;&#x2F;span&gt;&lt;span&gt;)]]
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;æœ‰çš„äººè¯´ä¸å¯¹å•Šï¼Œä¸ºå•¥æ·»åŠ çš„éƒ½æ˜¯æœåŠ¡å™¨èŠ‚ç‚¹ï¼Œæ•°æ®ä¸æ˜¯ä¹Ÿæ”¾åœ¨ç¯ä¸Šå—ï¼Ÿ&lt;&#x2F;p&gt;
&lt;p&gt;å…¶å®æ˜¯å› ä¸ºgroupcacheå°†æ•°æ®åˆ’åˆ†å‡ºä¸€ä¸ªgroupçš„æ¦‚å¿µï¼Œæ•°æ®åœ¨å†…éƒ¨å­˜å‚¨ä¸Šåˆ©ç”¨hash+åŒå‘é“¾è¡¨å®ç°ï¼Œç¼“å­˜çš„æ•°æ®è¢«æ”¾åœ¨é“¾è¡¨ä¸­ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ•´ä¸ªæµç¨‹æ˜¯è¿™æ ·çš„ï¼ŒæŸ¥æ‰¾keyå€¼å¯¹åº”çš„æ•°æ®æ—¶ï¼Œæ ¹æ®urlé“¾æ¥ä¸­çš„groupå’Œkeyå€¼ç¡®å®šèŠ‚ç‚¹ï¼Œå¦‚ä½•ç¡®å®šçš„ï¼Ÿä¸Šé¢çš„ä»£ç å·²ç»è§£é‡Šäº†ï¼Œè®¡ç®—keyå€¼çš„hashï¼Œçœ‹å®ƒå±äºå“ªä¸ªèŠ‚ç‚¹ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ç„¶åä»è¯¥èŠ‚ç‚¹çš„åŒå‘é“¾è¡¨ä¸­æŸ¥æ‰¾ã€‚å¦‚æœèŠ‚ç‚¹ä¸å­˜åœ¨è¿™ä¸ªkeyï¼Œä»ç”¨æˆ·å®šä¹‰çš„æ•°æ®æºæŸ¥æ‰¾ï¼ˆæ¯”å¦‚æ•°æ®åº“ï¼‰ï¼Œæ‰¾åˆ°ä¹‹åå°†æ•°æ®å­˜å…¥è¯¥groupä¸­ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä»¥ä¸Šï¼Œå¸Œæœ›æœ‰å¸®åŠ©ã€‚&lt;&#x2F;p&gt;
</content>
    </entry>
    <entry xml:lang="en">
        <title>å¯¹Raftä¸€è‡´æ€§ç®—æ³•çš„ç†è§£</title>
        <published>2019-08-21T22:02:53+08:00</published>
        <updated>2019-08-21T22:02:53+08:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://chaojie.fun/articles/dui-raft-yi-zhi-xing-suan-fa-de-li-jie/" type="text/html"/>
        <id>https://chaojie.fun/articles/dui-raft-yi-zhi-xing-suan-fa-de-li-jie/</id>
        <content type="html"></content>
    </entry>
    <entry xml:lang="en">
        <title>[æºç åˆ†æ] Flaskä¸­è·¯ç”±åŒ¹é…æ˜¯å¦‚ä½•å®ç°çš„</title>
        <published>2019-07-04T11:19:00+08:00</published>
        <updated>2019-07-04T11:19:00+08:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://chaojie.fun/articles/yuan-ma-fen-xi-flask-zhong-lu-you-pi-pei-shi-ru-he-shi-xian-de/" type="text/html"/>
        <id>https://chaojie.fun/articles/yuan-ma-fen-xi-flask-zhong-lu-you-pi-pei-shi-ru-he-shi-xian-de/</id>
        <content type="html">&lt;p&gt;é¦–å…ˆè®©æˆ‘ä»¬æ¥äº†è§£ä¸‹WSGIè§„èŒƒæ˜¯å•¥ï¼Ÿ&lt;&#x2F;p&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼ŒWSGIæ˜¯æœåŠ¡å™¨å’Œåº”ç”¨ä¹‹é—´çš„æ¥å£ï¼Œå‰ç«¯è¿‡æ¥çš„è¯·æ±‚ä¼ åˆ°æœåŠ¡å™¨ä¹‹åæ¯”å¦‚gunicornï¼Œä¹‹åæœåŠ¡å™¨ä¼šå°†è¯·æ±‚è½¬å‘ç»™åº”ç”¨ã€‚å› ä¸ºæœ‰å¾ˆå¤šä¸ªæœåŠ¡å™¨ï¼Œå¦‚æœæˆ‘ä»¬ä¸ºæˆ‘ä»¬çš„åº”ç”¨æ ¹æ®ä¸åŒçš„æœåŠ¡å†™ä¸åŒçš„ä»£ç ï¼Œä¼šå¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥å°±å‡ºç°äº†WSGIã€‚&lt;&#x2F;p&gt;
&lt;p&gt;WSGIè§„å®šäº†applicationåº”è¯¥å®ç°ä¸€ä¸ªå¯è°ƒç”¨çš„å¯¹è±¡ï¼ˆå‡½æ•°ï¼Œç±»ï¼Œæ–¹æ³•æˆ–è€…å¸¦&lt;code&gt;__call__&lt;&#x2F;code&gt;çš„å®ä¾‹ï¼‰ï¼Œè¿™ä¸ªå¯¹è±¡åº”è¯¥æ¥å—ä¸¤ä¸ªä½ç½®å‚æ•°ï¼š&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;ç¯å¢ƒå˜é‡ï¼ˆæ¯”å¦‚headerä¿¡æ¯ï¼ŒçŠ¶æ€ç ç­‰ï¼‰&lt;&#x2F;li&gt;
&lt;li&gt;å›è°ƒå‡½æ•°ï¼ˆWSGIæœåŠ¡å™¨è´Ÿè´£ï¼‰ï¼Œç”¨æ¥å‘é€httpçŠ¶æ€å’Œheaderç­‰&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;åŒæ—¶ï¼Œè¯¥å¯¹è±¡éœ€è¦è¿”å›å¯è¿­ä»£çš„å“åº”æ–‡æœ¬ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ›´å…·ä½“çš„è§£é‡Šå¯ä»¥å»googleæœç´¢ç›¸å…³çŸ¥è¯†ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä¸€ä¸ªæœ€ç®€å•çš„å®ç°ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;app&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;environ&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;start_response&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;    response_body = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;b&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Hello, World!&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    status = &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;200 OK&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å°†å“åº”çŠ¶æ€å’Œheaderäº¤ç»™WSGIæœåŠ¡å™¨æ¯”å¦‚gunicorn
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;start_response&lt;&#x2F;span&gt;&lt;span&gt;(status, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;headers&lt;&#x2F;span&gt;&lt;span&gt;=[])
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;iter&lt;&#x2F;span&gt;&lt;span&gt;([response_body])
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨gunicornä¹‹ç±»çš„æœåŠ¡å¯åŠ¨è¿™ä¸ªappã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æœ‰äº†WSGIè§„å®šï¼Œæ¡†æ¶ä¸­å°±è¦å®ç°è§„èŒƒä¸­æ‰€è¦æ±‚çš„éƒ¨åˆ†ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹Flaskæ˜¯å¦‚ä½•å®ç°çš„ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;Flask0.1ç‰ˆæœ¬çš„å®ç°ä¸­åªæœ‰ä¸€ä¸ªæ–‡ä»¶ï¼Œä¸€å…±600å¤šè¡Œä»£ç ã€‚æ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼Œä¸€ä¸ªæœ€ç®€å•çš„webæœåŠ¡åƒè¿™æ ·ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;from &lt;&#x2F;span&gt;&lt;span&gt;flask &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;Flask
&lt;&#x2F;span&gt;&lt;span&gt;app = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Flask&lt;&#x2F;span&gt;&lt;span&gt;(__name__)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;@app.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;route&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;hello_world&lt;&#x2F;span&gt;&lt;span&gt;():
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Hello World!&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;__name__ == &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;__main__&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;:
&lt;&#x2F;span&gt;&lt;span&gt;    app.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;run&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;è°ƒç”¨ &lt;strong&gt;Flask()&lt;&#x2F;strong&gt; ä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ&lt;&#x2F;p&gt;
&lt;p&gt;é¦–å…ˆåœ¨ &lt;code&gt;__init__&lt;&#x2F;code&gt; å†…ç½®æ–¹æ³•ä¸­æœ‰è¿™ä¹ˆå‡ ä¸ªå˜é‡ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;class &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Flask&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eff1f5;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;object&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eff1f5;&quot;&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;__init__&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;package_name&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# view_functionså­˜å‚¨è§†å›¾å‡½æ•°åç§°å’Œè§†å›¾å‡½æ•°
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.view_functions = {}
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# è·¯ç”±å­—å…¸
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.url_map = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Map&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;æ ¹æ®åå­—å¯ä»¥çŒœæµ‹ï¼Œ&lt;strong&gt;view_functions&lt;&#x2F;strong&gt; ç”¨æ¥å­˜æ”¾è§†å›¾å‡½æ•°ï¼Œ&lt;strong&gt;url_map&lt;&#x2F;strong&gt; ç”¨æ¥å­˜æ”¾è·¯ç”±å­—å…¸ã€‚æš‚æ—¶è·³è¿‡ï¼Œæ¥çœ‹çœ‹ &lt;code&gt;__call__&lt;&#x2F;code&gt;å†…ç½®æ–¹æ³•ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;__call__&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;environ&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;start_response&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;wsgi_app&lt;&#x2F;span&gt;&lt;span&gt;(environ, start_response)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;environï¼Œstart_responseï¼Œæ˜¯ä¸æ˜¯åœ¨å“ªé‡Œè§è¿‡ï¼ŸWSGIè§„èŒƒä¸­è¦æ±‚å®ç°çš„å¯¹ä¸å¯¹ã€‚å®ƒè¿”å›äº† &lt;strong&gt;wsgi_app&lt;&#x2F;strong&gt; æ–¹æ³•ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;wsgi_app&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;environ&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;start_response&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;with &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;request_context&lt;&#x2F;span&gt;&lt;span&gt;(environ):
&lt;&#x2F;span&gt;&lt;span&gt;            rv = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;preprocess_request&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;rv is &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;                rv = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;dispatch_request&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;            response = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;make_response&lt;&#x2F;span&gt;&lt;span&gt;(rv)
&lt;&#x2F;span&gt;&lt;span&gt;            response = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;process_response&lt;&#x2F;span&gt;&lt;span&gt;(response)
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;response&lt;&#x2F;span&gt;&lt;span&gt;(environ, start_response)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;çœ‹åˆ°äº†æ²¡ï¼Œè·Ÿæˆ‘ä»¬ä¸Šé¢å®ç°çš„é‚£ä¸ªç®€å•çš„appæ˜¯ä¸æ˜¯å¾ˆåƒã€‚&lt;&#x2F;p&gt;
&lt;p&gt;é¦–å…ˆé¢„å¤„ç†è¯·æ±‚ï¼Œç„¶ååˆ†å‘è¯·æ±‚åˆ°ä¸åŒçš„è§†å›¾å‡½æ•°ï¼Œæœ€åå“åº”ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘ä»¬å…ˆæ¥çœ‹ &lt;strong&gt;dispatch_request&lt;&#x2F;strong&gt; æ˜¯å¦‚ä½•å®ç°çš„ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;dispatch_request&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;    	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# ç²¾ç®€äº†ä¸‹ä»£ç 
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;try&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;            endpoint, values = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;match_request&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.view_functions[endpoint](**values)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;except &lt;&#x2F;span&gt;&lt;span&gt;HTTPException, e:
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;......
&lt;&#x2F;span&gt;&lt;span&gt;            
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;match_request&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;        rv = _request_ctx_stack.top.url_adapter.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;match&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;        request.endpoint, request.view_args = rv
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;rv
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;strong&gt;dispatch_request&lt;&#x2F;strong&gt; é¦–å…ˆè·å–endpointå’Œä¸€äº›å˜é‡ï¼Œç„¶ååœ¨è§†å›¾å‡½æ•°å­—å…¸é‡Œæ‰¾åˆ°å¯¹åº”çš„è§†å›¾å‡½æ•°è¿”å›ã€‚endpointå’Œvalueså°±æ˜¯æˆ‘ä»¬åœ¨å®šä¹‰è·¯ç”±çš„å¤„ç†å‡½æ•°æ—¶ï¼Œæ¯”å¦‚ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;url_for&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;profile&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;username&lt;&#x2F;span&gt;&lt;span&gt;=&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;John Doe&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;å…¶ä¸­profileå°±æ˜¯endpointï¼Œä¹Ÿå°±æ˜¯å¯¹åº”è§†å›¾å‡½æ•°çš„åç§°ï¼Œusernameå°±æ˜¯å˜é‡ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;match_request&lt;&#x2F;strong&gt; ä¸­è¿™ä¸ª &lt;strong&gt;_request_ctx_stack&lt;&#x2F;strong&gt; åˆæ˜¯ä¸ªå•¥ã€‚çœ‹èµ·æ¥å®ƒåƒæ˜¯ç”¨æ¥åŒ¹é…è·¯ç”±çš„ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;_request_ctx_stack&lt;&#x2F;strong&gt; æ˜¯è¯·æ±‚ä¸Šä¸‹æ–‡æ ˆï¼Œç”¨ä¸€ä¸ªæ ˆæŠŠå½“å‰è¯·æ±‚ç›¸å…³çš„æ•°æ®å‹å…¥æ ˆä¸­ï¼Œç„¶åè¿›è¡Œè·¯ç”±åˆ†å‘å’Œåç»­å¤„ç†ï¼Œå¤„ç†å®Œæˆåé€€å‡ºã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å›è¿‡å¤´çœ‹ &lt;strong&gt;wsgi_app&lt;&#x2F;strong&gt;æ–¹æ³•ä¸­æœ‰ä¸ªwithè¯­å¥ï¼Œæ§åˆ¶è¯·æ±‚ä¸Šä¸‹æ–‡çš„è¿›å…¥å’Œé€€å‡ºã€‚&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;with &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;request_context&lt;&#x2F;span&gt;&lt;span&gt;(environ):
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;è¿™ä¸ª &lt;strong&gt;request_context&lt;&#x2F;strong&gt;æ˜¯è¿™æ ·çš„ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;class &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;_RequestContext&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eff1f5;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;object&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eff1f5;&quot;&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;__init__&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;app&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;environ&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;...
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.url_adapter = app.url_map.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;bind_to_environ&lt;&#x2F;span&gt;&lt;span&gt;(environ)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;...
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;__enter__&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;        _request_ctx_stack.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;push&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;__exit__&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;exc_type&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;exc_value&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;tb&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;tb is &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None &lt;&#x2F;span&gt;&lt;span&gt;or not &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.app.debug:
&lt;&#x2F;span&gt;&lt;span&gt;            _request_ctx_stack.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pop&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;å…¶ä¸­çš„ &lt;strong&gt;url_adapter&lt;&#x2F;strong&gt; è·å–äº†è·¯ç”±å­—å…¸ï¼Œç„¶åè¿åŒå…¶ä»–å˜é‡ä¸€èµ·è¢«å‹å…¥æ ˆä¸­ï¼Œè¿™æ ·åœ¨ä¸Šé¢çš„ &lt;strong&gt;match_request&lt;&#x2F;strong&gt; æ–¹æ³•ä¸­ï¼Œä»æ ˆä¸­è·å– &lt;strong&gt;url_adapter&lt;&#x2F;strong&gt; ï¼Œ ç„¶ååŒ¹é…è·¯ç”±æ‰¾åˆ°å¯¹åº”çš„endpointå’Œå‚æ•°ï¼Œç„¶åæ ¹æ®endpointå’Œå‚æ•°ä»&lt;strong&gt;view_functions&lt;&#x2F;strong&gt; ä¸­æŸ¥æ‰¾å¯¹åº”çš„è§†å›¾å‡½æ•°ã€‚&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.url_adapter = app.url_map.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;bind_to_environ&lt;&#x2F;span&gt;&lt;span&gt;(environ)
&lt;&#x2F;span&gt;&lt;span&gt;rv = _request_ctx_stack.top.url_adapter.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;match&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;å…¶ä¸­ï¼Œ&lt;strong&gt;bind_to_environ&lt;&#x2F;strong&gt; å°† urlç»‘å®šåˆ°ç›®å‰çš„ç¯å¢ƒè¿”å›ä¸€ä¸ªé€‚é…å™¨ï¼Œç„¶åé€‚é…å™¨å»åŒ¹é…è¯·æ±‚ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ¥è‡ªFlaskçš„åº•å±‚è°ƒç”¨ &lt;strong&gt;werkzeug&lt;&#x2F;strong&gt; ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ¢³ç†ä¸€ä¸‹æµç¨‹ï¼Œé¦–å…ˆé€‚é…å™¨åœ¨ url_mapä¸­æŸ¥æ‰¾å½“å‰è·¯ç”±å¯¹åº”çš„endpointå’Œvaluesï¼Œç„¶ådispatch_requestæ ¹æ®endpointæ‰¾åˆ°å¯¹åº”çš„è§†å›¾å‡½æ•°ï¼Œç„¶åè¿”å›ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;é‚£ä¹ˆï¼Œurl_mapä¸­çš„è·¯ç”±å’Œendpointå¯¹åº”å…³ç³»æ˜¯ä»å“ªé‡Œæ¥çš„ï¼Ÿ&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨ä½¿ç”¨Flaskæ˜¯ä¸æ˜¯è¦ç”¨è£…é¥°å™¨ç»™è§†å›¾å‡½æ•°åŠ ä¸Šè·¯ç”±å’Œæ–¹æ³•å¯¹å§ï¼Œåƒè¿™æ ·ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span&gt;@app.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;route&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;hello_world&lt;&#x2F;span&gt;&lt;span&gt;():
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Hello World!&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;è¿™ä¸ªrouteè£…é¥°å™¨é•¿è¿™æ ·ï¼Œå¯ä»¥çœ‹åˆ°å®ƒè°ƒç”¨äº†add_url_ruleæ–¹æ³•ã€‚&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;route&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;rule&lt;&#x2F;span&gt;&lt;span&gt;, **&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;options&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;decorator&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;add_url_rule&lt;&#x2F;span&gt;&lt;span&gt;(rule, f.__name__, **options)
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.view_functions[f.__name__] = f
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;f
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;decorator
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;add_url_rule&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;rule&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;endpoint&lt;&#x2F;span&gt;&lt;span&gt;, **&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;options&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;    options[&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;endpoint&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;] = endpoint
&lt;&#x2F;span&gt;&lt;span&gt;    options.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;setdefault&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;methods&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;, (&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;GET&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;,))
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.url_map.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;add&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Rule&lt;&#x2F;span&gt;&lt;span&gt;(rule, **options))
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;add_url_ruleæ·»åŠ äº†è·¯ç”±å’Œ endpoint åˆ° url_map ä¸­ï¼Œè¿™æ ·ä¸€ä¸ªè¯·æ±‚çš„è·¯ç”±è¿‡æ¥åï¼Œ&lt;strong&gt;url_adapter.match()&lt;&#x2F;strong&gt; å°±èƒ½åŒ¹é…åˆ°å¯¹åº”çš„ endpoint ï¼Œç„¶åæ ¹æ® endpoint ä» view_functions é‡Œé¢æŸ¥æ‰¾è§†å›¾å‡½æ•°ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;url_map æ˜¯werkzeugä¸­çš„Mapå¯¹è±¡ï¼Œç„¶åæ·»åŠ çš„æ˜¯Ruleå¯¹è±¡ã€‚å®ƒçœ‹èµ·æ¥åƒè¿™æ ·ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.url_map = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Map&lt;&#x2F;span&gt;&lt;span&gt;([
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Rule&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;endpoint&lt;&#x2F;span&gt;&lt;span&gt;=&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;home&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;),
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Rule&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;book&#x2F;&amp;lt;id&amp;gt;&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;endpoint&lt;&#x2F;span&gt;&lt;span&gt;=&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;book&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;)
&lt;&#x2F;span&gt;&lt;span&gt;])
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;é™¤äº†åˆ©ç”¨è£…é¥°å™¨ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;index&lt;&#x2F;span&gt;&lt;span&gt;():
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;pass
&lt;&#x2F;span&gt;&lt;span&gt;app.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;add_url_rule&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;index&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;, &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;)
&lt;&#x2F;span&gt;&lt;span&gt;app.view_functions[&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;index&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;] = index
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;ç°åœ¨ï¼Œä¸€åˆ‡éƒ½è§£é‡Šæ¸…æ¥šäº†ï¼Œå®šä¹‰å¥½è§†å›¾å‡½æ•°åï¼Œ&lt;strong&gt;app.run&lt;&#x2F;strong&gt;è¿è¡Œå³å¯ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼ŒFlaskä¸­è·¯ç”±åŒ¹é…æ˜¯åˆ©ç”¨å­—å…¸å®ç°çš„ï¼Œè¿˜æœ‰ä¸€ç§åˆ©ç”¨å‰ç¼€æ ‘æ¥å®ç°è·¯ç”±çš„ï¼Œæ¯”å¦‚goè¯­è¨€ä¸­çš„ginæ¡†æ¶ï¼Œå…³äºå¦‚ä½•ç”¨å‰ç¼€æ ‘å®ç°è·¯ç”±å¯ä»¥çœ‹æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ï¼š&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;shiniao.fun&#x2F;posts&#x2F;%E5%89%8D%E7%BC%80%E6%A0%91%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0%E8%B7%AF%E7%94%B1%E5%8C%B9%E9%85%8D%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90&quot;&gt;å‰ç¼€æ ‘ç®—æ³•å®ç°è·¯ç”±åŒ¹é…åŸç†è§£æ&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
</content>
    </entry>
    <entry xml:lang="en">
        <title>[æºç åˆ†æ] Flaské…ç½®ç®¡ç†ä¸æè¿°ç¬¦æ</title>
        <published>2019-07-03T11:19:00+08:00</published>
        <updated>2019-07-03T11:19:00+08:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://chaojie.fun/articles/yuan-ma-fen-xi-flask-pei-zhi-guan-li-yu-miao-shu-fu/" type="text/html"/>
        <id>https://chaojie.fun/articles/yuan-ma-fen-xi-flask-pei-zhi-guan-li-yu-miao-shu-fu/</id>
        <content type="html">&lt;p&gt;åœ¨Flaskä¸­å¯ä»¥é€šè¿‡ &lt;strong&gt;app.config[&#x27;NAME&#x27;] = what&lt;&#x2F;strong&gt; çš„å½¢å¼æŒ‡å®šä¸€äº›é…ç½®ï¼Œæ¯”å¦‚è®¾ç½® &lt;strong&gt;debug = True&lt;&#x2F;strong&gt; ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span&gt;app.debug = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;True
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æˆ–è€…
&lt;&#x2F;span&gt;&lt;span&gt;app.config[&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;DEBUG&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;] = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;True
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;æœ‰äº›é…ç½®æ¯”å¦‚è®¾ç½®ENVå’ŒTESTINGè¿˜å¯ä»¥ç›´æ¥åˆ©ç”¨Flaskå¯¹è±¡æ¥è®¾ç½®ï¼Œåƒè¿™æ ·ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span&gt;app.testing = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;True
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;é™¤äº†åœ¨ç¨‹åºä¸­æŒ‡å®šé…ç½®ï¼Œä¹Ÿå¯ä»¥å°†é…ç½®å†™åœ¨å•ç‹¬çš„æ–‡ä»¶ä¸­ï¼Œæ¯”å¦‚ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span&gt;app = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Flask&lt;&#x2F;span&gt;&lt;span&gt;(__name__)
&lt;&#x2F;span&gt;&lt;span&gt;app.config.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;from_object&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;yourapplication.default_settings&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;)
&lt;&#x2F;span&gt;&lt;span&gt;app.config.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;from_envvar&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;YOURAPPLICATION_SETTINGS&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;åº”ç”¨é¦–å…ˆä» &lt;strong&gt;yourapplication.default_settings&lt;&#x2F;strong&gt; æ¨¡å—è½½å…¥é…ç½®ï¼Œç„¶åæ ¹æ® &lt;code&gt;YOURAPPLICATION_SETTINGS&lt;&#x2F;code&gt; ç¯å¢ƒå˜é‡æ‰€æŒ‡å‘çš„æ–‡ä»¶çš„å†…å®¹é‡è½½é…ç½®çš„å€¼ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;é™¤äº†ä»é…ç½®æ–‡ä»¶åŠ è½½ï¼Œä¹Ÿå¯ä»¥å®šä¹‰ç±»ç±»æŒ‡å®šé…ç½®ï¼Œå…·ä½“ç”¨æ³•å»çœ‹çœ‹å®˜æ–¹æ–‡æ¡£å°±çŸ¥é“äº†ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;çŸ¥é“äº†åœ¨Flaskä¸­å¦‚ä½•ä½¿ç”¨é…ç½®ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å®ç°çš„ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;é¦–å…ˆ &lt;strong&gt;config&lt;&#x2F;strong&gt; è‚¯å®šæ˜¯ä¸ªå˜é‡ï¼Œåœ¨Flaskè¿™ä¸ªç±»ä¸­è¢«å®šä¹‰ä¸ºï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.config = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;make_config&lt;&#x2F;span&gt;&lt;span&gt;(instance_relative_config)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;ç„¶å &lt;strong&gt;make_config&lt;&#x2F;strong&gt; çš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;make_config&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;instance_relative&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;False&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    root_path = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.root_path
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;instance_relative:
&lt;&#x2F;span&gt;&lt;span&gt;        root_path = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.instance_path
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# é»˜è®¤é…ç½®
&lt;&#x2F;span&gt;&lt;span&gt;    defaults = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;dict&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.default_config)
&lt;&#x2F;span&gt;&lt;span&gt;    defaults[&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ENV&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;] = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get_env&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;    defaults[&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;DEBUG&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;] = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get_debug_flag&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;config_class&lt;&#x2F;span&gt;&lt;span&gt;(root_path, defaults)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;make_configæ–¹æ³•è·å–flaskä¸­é»˜è®¤çš„é…ç½®ï¼Œä»¥åŠENVå’ŒDEBUGè¿™ä¸¤ä¸ªé…ç½®ï¼Œä¹‹åè¿”å›äº† &lt;strong&gt;self.config_class&lt;&#x2F;strong&gt; å¯¹è±¡ï¼Œå®ƒåœ¨ç±»ä¸­æ˜¯è¿™æ ·å®šä¹‰çš„ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span&gt;config_class = Config
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;class &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Config&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eff1f5;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;dict&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eff1f5;&quot;&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;__init__&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;root_path&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;defaults&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# dict.__init__è®©Configå®ä¾‹æ‹¥æœ‰å­—å…¸è¡Œä¸ºconfig[&amp;#39;ENV&amp;#39;]
&lt;&#x2F;span&gt;&lt;span&gt;        dict.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;__init__&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, defaults or {})
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.root_path = root_path
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;strong&gt;config_class&lt;&#x2F;strong&gt; æœ¬è´¨ä¸Šæ˜¯Configç±»ï¼Œæ³¨æ„çœ‹Configç±»çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œ&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span&gt;dict.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;__init__&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, defaults or {})
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;è¿™ä¸€è¡Œä»£ç ä½¿å¾—Configç±»å¯ä»¥åƒå­—å…¸ä¸€æ ·ä½¿ç”¨ï¼Œæ¯”å¦‚ &lt;code&gt;app.config[&#x27;TESTING&#x27;]=True&lt;&#x2F;code&gt;ã€‚ å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ &lt;code&gt;__getitem__&lt;&#x2F;code&gt; å’Œ &lt;code&gt;__setitem__&lt;&#x2F;code&gt; å†…ç½®æ–¹æ³•ä½¿å¾—ç±»å…·æœ‰å­—å…¸çš„è¡Œä¸ºã€‚&lt;&#x2F;p&gt;
&lt;p&gt;é‚£ä¹ˆåƒ &lt;strong&gt;app.testing = True&lt;&#x2F;strong&gt; è¿™æ ·çš„é…ç½®æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ&lt;&#x2F;p&gt;
&lt;p&gt;åœ¨Flaskç±»ä¸­å¯ä»¥çœ‹åˆ°ï¼Œè¿™äº›ç±»å˜é‡éƒ½æ˜¯ &lt;strong&gt;ConfigAttribute&lt;&#x2F;strong&gt; å¯¹è±¡ã€‚&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span&gt;testing = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ConfigAttribute&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;TESTING&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;)
&lt;&#x2F;span&gt;&lt;span&gt;secret_key = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ConfigAttribute&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;SECRET_KEY&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;strong&gt;ConfigAttribute&lt;&#x2F;strong&gt;ç±»å¦‚ä¸‹ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;class &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;ConfigAttribute&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eff1f5;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;object&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eff1f5;&quot;&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;__init__&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;name&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get_converter&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.__name__ = name
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.get_converter = get_converter
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# objæ˜¯è¢«æ‰˜ç®¡ç±»å®ä¾‹
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;__get__&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;obj&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;type&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å¦‚æœè¢«æ‰˜ç®¡å®ä¾‹ä¸å­˜åœ¨ï¼Œè¿”å›æè¿°ç¬¦è‡ªèº«
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;obj is &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# è¿”å›Flaskå®ä¾‹çš„config[name]
&lt;&#x2F;span&gt;&lt;span&gt;        rv = obj.config[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.__name__]
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.get_converter is not &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;            rv = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get_converter&lt;&#x2F;span&gt;&lt;span&gt;(rv)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;rv
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;__set__&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;obj&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;value&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;        obj.config[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.__name__] = value
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;strong&gt;ConfigAttribute&lt;&#x2F;strong&gt; æ˜¯ä¸€ä¸ªæè¿°ç¬¦ç±»ï¼Œæè¿°ç¬¦æ˜¯ä»€ä¹ˆï¼Ÿ&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;æè¿°ç¬¦æ˜¯å¯¹å¤šä¸ªå±æ€§è¿ç”¨ç›¸åŒå­˜å–é€»è¾‘çš„ä¸€ç§æ–¹å¼ã€‚â€”â€”ã€Šæµç•…çš„pythonã€‹&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;æè¿°ç¬¦å®ç°äº†ç‰¹å®šçš„å†…ç½®æ–¹æ³•ï¼Œ&lt;code&gt;__get__&lt;&#x2F;code&gt; ï¼Œ &lt;code&gt;__set__&lt;&#x2F;code&gt; å’Œ &lt;code&gt;__delete__&lt;&#x2F;code&gt; ï¼Œå¸¸è§çš„æ¯”å¦‚Djangoä¸­ORMä¸­çš„å®ç°å°±æ˜¯ç”¨çš„æè¿°ç¬¦ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;class &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Person&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eff1f5;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;models.Model&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eff1f5;&quot;&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# models.CharFieldå°±æ˜¯ä¸€ä¸ªæè¿°ç¬¦
&lt;&#x2F;span&gt;&lt;span&gt;    first_name = models.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;CharField&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;max_length&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;30&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;    last_name = models.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;CharField&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;max_length&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;30&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;è¿˜æœ‰pythonå†…ç½®çš„ &lt;strong&gt;@property&lt;&#x2F;strong&gt; &lt;strong&gt;@classmethod&lt;&#x2F;strong&gt; &lt;strong&gt;staticmethod&lt;&#x2F;strong&gt; è£…é¥°å™¨å°±æ˜¯ç”¨æè¿°ç¬¦å®ç°çš„ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;è¯´äº†è¿™ä¹ˆå¤šï¼Œæ¥çœ‹çœ‹æè¿°ç¬¦åˆ°åº•æ€ä¹ˆç”¨ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;é¦–å…ˆæ¥çœ‹&lt;strong&gt;ConfigAttribute&lt;&#x2F;strong&gt;ç±»ä¸­çš„ &lt;code&gt;__get__&lt;&#x2F;code&gt; æ–¹æ³•ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# objæ˜¯è¢«æ‰˜ç®¡ç±»å®ä¾‹
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;__get__&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;obj&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;type&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å¦‚æœè¢«æ‰˜ç®¡å®ä¾‹ä¸å­˜åœ¨ï¼Œè¿”å›æè¿°ç¬¦è‡ªèº«
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;obj is &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# è¿”å›Flaskå®ä¾‹çš„config[name]
&lt;&#x2F;span&gt;&lt;span&gt;    rv = obj.config[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.__name__]
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.get_converter is not &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;        rv = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get_converter&lt;&#x2F;span&gt;&lt;span&gt;(rv)
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;rv
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;code&gt;__get__&lt;&#x2F;code&gt; æ–¹æ³•çš„å‚æ•°objæ˜¯è¢«æ‰˜ç®¡ç±»çš„å®ä¾‹ï¼Œåœ¨è¿™é‡Œå°±æ˜¯Flaskç±»ï¼Œæ–¹æ³•ä¸­é¦–å…ˆåˆ¤æ–­è¢«æ‰˜ç®¡ç±»æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨å°±è¿”å›æè¿°ç¬¦æœ¬èº«ã€‚ä¹‹åè¿”å›Flaskç±»å®ä¾‹ä¸­çš„ &lt;strong&gt;config[name]&lt;&#x2F;strong&gt;ï¼Œ çœ‹åˆ°æ²¡æœ‰envç±»å˜é‡å®é™…ä¸Šå°±æ˜¯ &lt;strong&gt;config[name]&lt;&#x2F;strong&gt; ä¸­æŒ‡å®šçš„å€¼ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ¥çœ‹ &lt;code&gt;__set__&lt;&#x2F;code&gt; æ–¹æ³•ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;__set__&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;obj&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;value&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;    obj.config[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.__name__] = value
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;code&gt;__set__&lt;&#x2F;code&gt;æ–¹æ³•ä¸­çš„objåŒæ ·æ˜¯è¢«æ‰˜ç®¡ç±»çš„å®ä¾‹ï¼Œç„¶åvalueè¢«å­˜å‚¨åœ¨è¢«æ‰˜ç®¡ç±»çš„configå˜é‡ä¸­ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬æ‰å¯ä»¥ç”¨ &lt;strong&gt;app.testing = True&lt;&#x2F;strong&gt; æ¥æŒ‡å®šé…ç½®ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;è¯´åˆ°åº•ï¼Œæè¿°ç¬¦æœ‰ä»€ä¹ˆç”¨ï¼Ÿæˆ‘ä»¬æ¥çœ‹ï¼Œåœ¨Flaskç±»ä¸­æˆ‘ä»¬è¦æŒ‡å®šç±»å˜é‡ &lt;strong&gt;testing, env, secret_key, session_cookie_name&lt;&#x2F;strong&gt; ç­‰ç­‰ï¼Œéƒ½éœ€è¦ä»configå˜é‡ä¸­æ¥æ”¶ï¼ˆä¿è¯é…ç½®çš„ä¸€è‡´æ€§ï¼‰ã€‚æˆ‘ä»¬ä¸ºè¿™äº›å˜é‡éƒ½å†™ä¸€ä¸ªå­˜å–æ–¹æ³•æ˜¯ä¸æ˜¯å¾ˆéº»çƒ¦ï¼Œä½¿ç”¨æè¿°ç¬¦å°±å¯ä»¥ç®€åŒ–æµç¨‹ï¼Œå¯¹å¤–å°è£…äº†å…·ä½“çš„å­˜å–ç»†èŠ‚ï¼Œå¹¶ä¸”å‡å°‘ä»£ç é‡ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸ªå‡½æ•°ï¼Œé€šè¿‡æ„å»ºç‰¹æ€§å·¥å‚çš„æ–¹å¼æ¥å®ç°ï¼Œæ¯”å¦‚ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;config_attribute&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;name&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;getter&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;instance&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;instance.config[name]
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;setter&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;instance&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;value&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;        instance.config[name] = value
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# propertyå®é™…ä¸Šå°±æ˜¯@propertyè£…é¥°å™¨
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;property&lt;&#x2F;span&gt;&lt;span&gt;(getter, setter)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# åœ¨Flaskä¸­è°ƒç”¨æ–¹å¼ä¸€æ ·
&lt;&#x2F;span&gt;&lt;span&gt;testing = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;config_attribute&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;TESTING&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;å…³äºæè¿°ç¬¦çš„æ›´å¤šç»†èŠ‚å¯ä»¥æŸ¥çœ‹ &lt;strong&gt;ã€Šæµç•…çš„pythonã€‹&lt;&#x2F;strong&gt; è¿™æœ¬ä¹¦ä¸­ç¬¬20ç« çš„å†…å®¹ï¼Œæœ‰è¯¦ç»†çš„ä»‹ç»ã€‚&lt;&#x2F;p&gt;
</content>
    </entry>
    <entry xml:lang="en">
        <title>[æºç åˆ†æ] Flaskè“å›¾å®ç°åŸç†åˆ†æ</title>
        <published>2019-07-01T11:19:00+08:00</published>
        <updated>2019-07-01T11:19:00+08:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://chaojie.fun/articles/yuan-ma-fen-xi-flask-lan-tu-shi-xian-yuan-li-fen-xi/" type="text/html"/>
        <id>https://chaojie.fun/articles/yuan-ma-fen-xi-flask-lan-tu-shi-xian-yuan-li-fen-xi/</id>
        <content type="html">&lt;blockquote&gt;
&lt;p&gt;çœ‹è¿™ç¯‡æ–‡ç« ä¹‹å‰ï¼Œå»ºè®®çœ‹ä¸€ä¸‹æˆ‘ä¹‹å‰å†™çš„ï¼š[æºç åˆ†æ]Flaskä¸­è·¯ç”±åŒ¹é…æ˜¯å¦‚ä½•å®ç°çš„&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;BluePrintï¼ˆè“å›¾ï¼‰çš„æ¦‚å¿µè¯´ç™½äº†å°±æ˜¯è·¯ç”±ç»„ï¼Œæ‰€æœ‰æ³¨å†Œåˆ°è¯¥è“å›¾ä¸Šçš„è·¯ç”±éƒ½ä½¿ç”¨åŒä¸€ä¸ªå‰ç¼€ã€‚è¿™æ ·æ–¹ä¾¿äº†ç®¡ç†ï¼Œä¸åŒçš„åŠŸèƒ½å¯ä»¥æ”¾åœ¨ä¸€ä¸ªæ¨¡å—ï¼ˆæ¯”å¦‚adminæ¨¡å—ï¼‰ä¸­å®ç°ï¼Œæ›´åŠ è§£è€¦ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;é¦–å…ˆæ¥çœ‹çœ‹è“å›¾æ˜¯å¦‚ä½•ä½¿ç”¨çš„ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å®šä¹‰ä¸€ä¸ªè“å›¾
&lt;&#x2F;span&gt;&lt;span&gt;simple_page = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Blueprint&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;simple_page&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;, __name__,
&lt;&#x2F;span&gt;&lt;span&gt;                        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;template_folder&lt;&#x2F;span&gt;&lt;span&gt;=&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;templates&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# ç»‘å®šè§†å›¾å‡½æ•°
&lt;&#x2F;span&gt;&lt;span&gt;@simple_page.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;route&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;defaults&lt;&#x2F;span&gt;&lt;span&gt;={&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;page&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;: &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;index&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;})
&lt;&#x2F;span&gt;&lt;span&gt;@simple_page.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;route&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;&amp;lt;page&amp;gt;&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;show&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;page&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;try&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;render_template&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;pages&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;%s&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;.html&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39; % page)
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;except &lt;&#x2F;span&gt;&lt;span&gt;TemplateNotFound:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;abort&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;404&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# åœ¨ä¸»æ¨¡å—ä¸­æ³¨å†Œè·¯ç”±
&lt;&#x2F;span&gt;&lt;span&gt;app = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Flask&lt;&#x2F;span&gt;&lt;span&gt;(__name__)
&lt;&#x2F;span&gt;&lt;span&gt;app.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;register_blueprint&lt;&#x2F;span&gt;&lt;span&gt;(simple_page)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;çœ‹ä¸Šé¢çš„ä¾‹å­ï¼Œé¦–å…ˆå®šä¹‰äº†ä¸€ä¸ªè“å›¾simple_pageï¼Œç„¶åç»ç”±è¿™ä¸ªè“å›¾æ¥å®šä¹‰è·¯ç”±ä»¥åŠç»‘å®šåˆ°è§†å›¾å‡½æ•°ä¸Šï¼Œæœ€ååœ¨ä¸»æ¨¡å—ä¸­ï¼Œæ³¨å†Œè¿™ä¸ªè“å›¾å³å¯ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;çœ‹èµ·æ¥è·Ÿå¸¸è§çš„å®šä¹‰è§†å›¾å‡½æ•°çš„æ–¹å¼ä¸€æ ·ï¼Œåªä¸è¿‡åœ¨æ·»åŠ è·¯ç”±çš„æ—¶å€™ï¼Œéœ€è¦ä»¥è“å›¾å¼€å¤´ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ¥çœ‹çœ‹æºç ä¸­æ˜¯å¦‚ä½•å®ç°çš„ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;è“å›¾çš„åŠŸèƒ½æ˜¯åœ¨flask 0.7ç‰ˆæœ¬ä¸­è¢«åŠ å…¥çš„ï¼Œappåœ¨è°ƒç”¨ &lt;strong&gt;register_blueprint&lt;&#x2F;strong&gt; æ–¹æ³•çš„æ—¶å€™ä¼šè°ƒç”¨ &lt;strong&gt;Blueprint&lt;&#x2F;strong&gt; ç±»ä¸­çš„ &lt;strong&gt;register&lt;&#x2F;strong&gt; æ–¹æ³•æ¥æ³¨å†Œè¯¥è“å›¾ä¸­æ·»åŠ çš„æ‰€æœ‰è·¯ç”±ã€‚&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;register_blueprint&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;blueprint&lt;&#x2F;span&gt;&lt;span&gt;, **&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;options&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;   	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;...	
&lt;&#x2F;span&gt;&lt;span&gt;	blueprint.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;register&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, options, first_registration)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;æˆ‘ä»¬çœ‹ä¸€ä¸‹registeræ–¹æ³•ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# blueprints.py
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;register&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;app&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;options&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;first_registration&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;False&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;	
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;...
&lt;&#x2F;span&gt;&lt;span&gt;    state = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;make_setup_state&lt;&#x2F;span&gt;&lt;span&gt;(app, options, first_registration)
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;...
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;deferred &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.deferred_functions:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;deferred&lt;&#x2F;span&gt;&lt;span&gt;(state)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;é¢ï¼Œmake_setup_stateæ˜¯ä¸ªå•¥ï¼Œdeferred_functionsåˆæ˜¯ä¸ªå•¥ã€‚æˆ‘ä»¬è·³åˆ°make_setup_stateæ¥çœ‹çœ‹å®ƒé‡Œé¢æœ‰ä»€ä¹ˆï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;make_setup_state&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;app&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;options&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;first_registration&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;False&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;BlueprintSetupState&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, app, options, first_registration)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;è¿”å›äº†ä¸€ä¸ªç±»ã€‚å…ˆä¸ç®¡ã€‚æ¥çœ‹çœ‹deferred_functionsæ˜¯ä»€ä¹ˆï¼Œä»åå­—ä¸Šå¯ä»¥çœ‹å‡ºæ˜¯å»¶è¿Ÿå‡½æ•°ä¹‹ç±»çš„ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ¥æ¢³ç†ä¸€ä¸‹æµç¨‹ï¼Œ&lt;strong&gt;app.register_blueprint&lt;&#x2F;strong&gt; æ³¨å†Œè“å›¾ä¹‹åï¼Œä¼šæ¿€æ´»Buleprintç±»ä¸­çš„registeræ–¹æ³•ï¼Œåœ¨registeræ–¹æ³•ä¸­å¾ªç¯è°ƒç”¨ &lt;strong&gt;deferred_functions&lt;&#x2F;strong&gt; ä¸­çš„å‡½æ•°æ¥æ‰§è¡Œï¼Œæˆ‘ä»¬å¤§æ¦‚èƒ½çŒœå‡ºæ¥è¿™æ®µä»£ç çš„åŠŸèƒ½å°±æ˜¯å°†è“å›¾ä¸­å®šä¹‰çš„è·¯ç”±éƒ½æ·»åŠ åˆ°è·¯ç”±ç»„ä¸­ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä»¥ä¸Šé¢çš„è“å›¾ä¾‹å­ï¼Œ&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span&gt;@simple_page.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;route&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;defaults&lt;&#x2F;span&gt;&lt;span&gt;={&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;page&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;: &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;index&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;})
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;è“å›¾çš„routeæ–¹æ³•æ˜¯è¿™æ ·çš„ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;route&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;rule&lt;&#x2F;span&gt;&lt;span&gt;, **&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;options&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;decorator&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;add_url_rule&lt;&#x2F;span&gt;&lt;span&gt;(rule, f.__name__, f, **options)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;f
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;decorator
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;routeæ–¹æ³•æ˜¯ä¸ªè£…é¥°å™¨ï¼Œå®é™…ä¸Šè°ƒç”¨äº† &lt;strong&gt;add_url_rule&lt;&#x2F;strong&gt; æ–¹æ³•ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;add_url_rule&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;rule&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;endpoint&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;view_func&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;, **&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;options&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;record&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;lambda &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;s&lt;&#x2F;span&gt;&lt;span&gt;: s.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;add_url_rule&lt;&#x2F;span&gt;&lt;span&gt;(rule, endpoint, view_func, **options))
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;record&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;func&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;...&lt;&#x2F;span&gt;&lt;span&gt;.
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.deferred_functions.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;append&lt;&#x2F;span&gt;&lt;span&gt;(func)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;åœ¨recordæ–¹æ³•ä¸­ï¼Œå°†funcæ·»åŠ åˆ°äº†deferred_functionsåˆ—è¡¨ä¸­ï¼Œè€Œadd_url_ruleä¸­è°ƒç”¨äº†recordæ–¹æ³•ï¼Œé‚£ä¹ˆä¸€åˆ‡å°±éƒ½å¯ä»¥è§£é‡Šäº†ï¼š&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;register&lt;&#x2F;strong&gt; æ–¹æ³•ä¸­çš„è¿™æ®µä»£ç ï¼Œ&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span&gt;state = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;make_setup_state&lt;&#x2F;span&gt;&lt;span&gt;(app, options, first_registration)    
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;...
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;deferred &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.deferred_functions:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;deferred&lt;&#x2F;span&gt;&lt;span&gt;(state)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;å¾ªç¯ &lt;strong&gt;deferred_functions&lt;&#x2F;strong&gt;ï¼Œ&lt;strong&gt;deferred_functions&lt;&#x2F;strong&gt; é‡Œé¢æ˜¯å•¥ï¼Ÿæ˜¯lambdaï¼Œå…·ä½“æ¥è¯´ï¼Œå°±æ˜¯è“å›¾ä¸­å®šä¹‰çš„è·¯ç”±å’Œè§†å›¾å‡½æ•°ï¼Œæˆ‘ä»¬é€šè¿‡&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span&gt;@simple_page.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;route&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;&amp;lt;page&amp;gt;&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;å®šä¹‰è·¯ç”±ä¹‹åï¼Œå®é™…ä¸Šå°±æ˜¯åœ¨ &lt;strong&gt;deferred_functions&lt;&#x2F;strong&gt; é‡Œé¢æ·»åŠ äº†ä¸€ä¸ªlambdaï¼Œä¸ºä»€ä¹ˆè¯´å®ƒæ˜¯deferï¼Œå› ä¸ºåªæœ‰åœ¨registeræ³¨å†Œçš„æ—¶å€™æ‰ä¼šçœŸæ­£æ·»åŠ åˆ°appçš„url_mapä¸­ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä¸Šé¢ä»£ç ä¸­çš„stateæ˜¯ä¸€ä¸ª &lt;strong&gt;BlueprintSetupState&lt;&#x2F;strong&gt; ç¤ºä¾‹ï¼Œè¿™ä¸ªç±»é‡Œé¢æœ‰ä¸€ä¸ªadd_url_ruleæ–¹æ³•ï¼Œä¼šåœ¨å…¨å±€appçš„ &lt;strong&gt;url_map&lt;&#x2F;strong&gt; ä¸­æ·»åŠ è·¯ç”±å’Œè§†å›¾å‡½æ•°ã€‚&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;add_url_rule&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;rule&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;endpoint&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;view_func&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;, **&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;options&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.app.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;add_url_rule&lt;&#x2F;span&gt;&lt;span&gt;(rule, &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;%s&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;%s&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39; % (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.blueprint.name, endpoint),view_func, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;defaults&lt;&#x2F;span&gt;&lt;span&gt;=defaults, **options)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;æ¥æ¢³ç†ä¸€ä¸‹ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# state æ˜¯ BlueprintSetupState å®ä¾‹
&lt;&#x2F;span&gt;&lt;span&gt;BlueprintSetupState -&amp;gt; state
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# deferred_functions é‡Œé¢æ˜¯è“å›¾è·¯ç”±çš„lambda
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;lambda &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;s&lt;&#x2F;span&gt;&lt;span&gt;: s.add_url_rule -&amp;gt; deferred_functions
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;deferred &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.deferred_functions:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;deferred&lt;&#x2F;span&gt;&lt;span&gt;(state)
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;æ„æ€å°±æ˜¯ &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;lambda &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ä¸­çš„ s è¢«èµ‹å€¼ä¸º state &lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;ï¼Œ&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ç„¶åstate&lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;add_url_rule&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;è¿™æ ·å°±æ‰§è¡Œäº†app&lt;&#x2F;span&gt;&lt;span style=&quot;background-color:#bf616a;color:#2b303b;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;add_url_rule
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;è¿™ä¸ªå»¶è¿Ÿæ‰§è¡Œè®¾è®¡çš„å¤ªå·§å¦™äº†ï¼Œè“å›¾ä¸­æ·»åŠ çš„è·¯ç”±è§„åˆ™åªæœ‰åœ¨registeræ–¹æ³•ä¸­æ‰çœŸæ­£çš„è¢«æ·»åŠ åˆ°å…¨å±€çš„è·¯ç”±mapä¸­ã€‚&lt;&#x2F;p&gt;
</content>
    </entry>
    <entry xml:lang="en">
        <title>ä¸€ä¸ªæ˜¥å¤©</title>
        <published>2019-05-03T11:19:00+08:00</published>
        <updated>2019-05-03T11:19:00+08:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://chaojie.fun/articles/yi-ge-chun-tian/" type="text/html"/>
        <id>https://chaojie.fun/articles/yi-ge-chun-tian/</id>
        <content type="html">&lt;p&gt;é‚£æ˜¯ä¸€ä¹å¹´çš„æ˜¥å¤©ï¼Œ&lt;&#x2F;p&gt;
&lt;p&gt;æ™¨å…‰ä¸­ï¼Œæˆ‘çœ‹åˆ°å‚»å­æœ±é€¸ä¹‹åœ¨çˆ¬æ ‘ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä»–ç«™åœ¨æ ‘ä¸‹å¾˜å¾Šè®¸ä¹…ï¼Œè¸±æ­¥ï¼Œæ³ªçœ¼è¿·ç¦»ã€‚é£å¹äº†å‡ ä¸‡é‡Œï¼Œè€Œæ±Ÿæ²³æ¾æ¹ƒï¼Œå½©è™¹åœ¨å¼€æ”¾ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å‚»å­æœ±é€¸ä¹‹çˆ¬ä¸Šæ ‘çš„å°–ç¨ï¼Œä»–æœ›ç€å¤åŸæ­å·ï¼Œçœ¼ç¥ä¸­è¿›å‘å‡ºè¿·ç¦»ï¼Œä¹Ÿè¯‰è¯´ç€ä¸€ç§è“ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä½ å¦‚æœä¸æ³¨æ„ï¼Œè¿˜ä»¥ä¸ºæ˜¯ä¸€å°Šé›•å¡‘ï¼Œå­¤ç‹¬çš„çŸ—ç«‹åœ¨é£é‡Œã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ‰‹æ˜¯æ ‘å’Œæ ‘æœ‰äº†è”ç³»ï¼Œä¹Œå„¿å¸¦å»æ¶ˆæ¯ï¼Œé»‘å¤œå¼€å§‹ç”Ÿå‡ºè“ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;è€Œå¤åŸæ­å·å•Šï¼Œåˆ’èˆ¹çš„äººæ­¤åˆ»åœ¨å“ªé‡Œã€‚&lt;&#x2F;p&gt;
</content>
    </entry>
    <entry xml:lang="en">
        <title>Vueç™»å½•åŠæƒé™ç›¸å…³é—®é¢˜</title>
        <published>2019-04-08T15:17:05+08:00</published>
        <updated>2019-04-08T15:17:05+08:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://chaojie.fun/articles/vue-deng-lu-ji-quan-xian-xiang-guan-wen-ti/" type="text/html"/>
        <id>https://chaojie.fun/articles/vue-deng-lu-ji-quan-xian-xiang-guan-wen-ti/</id>
        <content type="html">&lt;p&gt;æœ€è¿‘åœ¨åšä¸€ä¸ªå°åº”ç”¨ï¼Œéœ€è¦ç”¨åˆ°vueå®ç°ç™»å½•ï¼Œä»¥åŠç»™ä¸åŒè·¯ç”±è®¾ç½®æƒé™ã€‚åœ¨ç½‘ä¸Šçœ‹äº†å¾ˆå¤šæ–‡ç« ï¼Œè®²çš„æ˜¯ä¹±ä¸ƒå…«ç³Ÿã€‚æ„Ÿå¹å›½å†…æŠ€æœ¯ç±»æ–‡ç« å®åœ¨æ˜¯å·®åŠ²ï¼ŒæŠ„æ¥æŠ„å»ã€‚è¿™ç¯‡æ–‡ç« å°±è¯´è¯´æˆ‘æœ€åæ˜¯å¦‚ä½•å®ç°çš„ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å‰åç«¯åˆ†ç¦»é¡¹ç›®ä¸­ï¼Œåç«¯æä¾›apiæ¥å£ç»™å‰ç«¯ï¼Œä½¿ç”¨jwtå‘æ”¾æƒé™ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;é¦–å…ˆå‰ç«¯æä¾›ç”¨æˆ·åå’Œå¯†ç è¯·æ±‚ç™»å½•æ¥å£ï¼Œåç«¯éªŒè¯ä¹‹åè¿”å›ç»™å‰ç«¯ä¸€ä¸ªtokenï¼Œä¹‹åå‰ç«¯åœ¨è¯·æ±‚éœ€è¦æƒé™çš„æ¥å£æ—¶æºå¸¦è¿™ä¸ªtokenå°±å¯ä»¥äº†ã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;liang-ge-wen-ti&quot;&gt;ä¸¤ä¸ªé—®é¢˜&lt;&#x2F;h3&gt;
&lt;p&gt;ç°åœ¨é¢ä¸´ä¸¤ä¸ªé—®é¢˜ï¼Œ&lt;&#x2F;p&gt;
&lt;p&gt;é¦–å…ˆvueä¸­ä¸åŒçš„è·¯ç”±æœ‰ä¸åŒçš„æƒé™ï¼Œæ¯”å¦‚æˆ‘è¦è®¿é—®åå° &lt;strong&gt;&#x2F;admin&lt;&#x2F;strong&gt;, å°±éœ€è¦å…ˆç™»å½•æ‰è¡Œï¼Œè€Œæœ‰çš„é¡µé¢ä¸éœ€è¦ç™»å½•ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ç¬¬äºŒä¸ªé—®é¢˜æ˜¯ï¼Œvueç»„ä»¶ä¸­ä½¿ç”¨axiosè¯·æ±‚åå°æœåŠ¡æ—¶ï¼Œä¸åŒçš„æ¥å£æœ‰ä¸åŒçš„æƒé™ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;shiniao.fun&#x2F;images&#x2F;vue_auth.png&quot; alt=&quot;Vueæƒé™è®¤è¯&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;å…ˆæ¥è§£å†³ç¬¬äºŒä¸ªé—®é¢˜ã€‚vueä¸åŒç»„ä»¶éƒ½è¦ç”¨åˆ°axiosï¼Œæˆ‘ä»¬åœ¨å…¨å±€ä¸ºaxiosæ·»åŠ requestå’Œresponseçš„æ‹¦æˆªå™¨ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä¹Ÿå°±æ˜¯ï¼Œåœ¨å‘èµ·è¯·æ±‚ä¹‹å‰ï¼Œå…ˆæ£€æµ‹headeræ˜¯å¦æºå¸¦tokenä¿¡æ¯ã€‚åœ¨æ¥æ”¶å“åº”ä¹‹å‰ï¼Œå…ˆæŸ¥çœ‹åç«¯è¿”å›çŠ¶æ€ç ï¼Œå¦‚æœè¯´éœ€è¦tokenéªŒè¯å°±è·³è½¬åˆ°ç™»å½•ç•Œé¢ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;åœ¨main.jsæ·»åŠ å¦‚ä¸‹ï¼Œæˆ–è€…æ–°å¢ä¸€ä¸ªhttp.jsæ–‡ä»¶ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;javascript&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-javascript &quot;&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; * http request æ‹¦æˆªå™¨
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;axios&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;interceptors&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;request&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;use&lt;&#x2F;span&gt;&lt;span&gt;(
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;config &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; * åˆ¤æ–­æ˜¯å¦å­˜åœ¨tokenï¼Œå¦‚æœå­˜åœ¨çš„è¯ï¼Œåˆ™æ¯ä¸ªhttp headeréƒ½åŠ ä¸Štoken
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; * tokenä¼šåœ¨ç™»å½•ä¹‹åå­˜å‚¨åœ¨æœ¬åœ°
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;localStorage&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;token&lt;&#x2F;span&gt;&lt;span&gt;) {
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;config&lt;&#x2F;span&gt;&lt;span&gt;.headers[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Authorization&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;]  = `&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Bearer ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;localStorage&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;token&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;}&lt;&#x2F;span&gt;&lt;span&gt;`;
&lt;&#x2F;span&gt;&lt;span&gt;        }
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;config&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;    },
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;err &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Promise&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;reject&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;err&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;    });
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; * http response æ‹¦æˆªå™¨
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;axios&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;interceptors&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;response&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;use&lt;&#x2F;span&gt;&lt;span&gt;(
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;response &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;data &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;response&lt;&#x2F;span&gt;&lt;span&gt;.data;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; * æ­£å¸¸è¿”å›æ•°æ®
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;data&lt;&#x2F;span&gt;&lt;span&gt;.code === &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;) {
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; * è¿”å›data
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;data
&lt;&#x2F;span&gt;&lt;span&gt;        }
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; * å¦‚æœcodeæ˜¯20103 è¡¨ç¤ºtokenæœªè®¤è¯(åç«¯å®šä¹‰çš„é”™è¯¯ç )
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; * è·³è½¬åˆ°login
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;data&lt;&#x2F;span&gt;&lt;span&gt;.code === &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;20103&lt;&#x2F;span&gt;&lt;span&gt;) {
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;router&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;replace&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;login&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;)
&lt;&#x2F;span&gt;&lt;span&gt;        }
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Promise&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;reject&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;data&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;    },
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;error &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Promise&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;reject&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;error&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;    });
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;Vue&lt;&#x2F;span&gt;&lt;span&gt;.prototype.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$http &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;axios&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;ç°åœ¨å‘èµ·çš„ä»»ä½•è¯·æ±‚ä¹‹å‰éƒ½ä¼šæ£€æŸ¥æ˜¯å¦æºå¸¦tokenï¼Œå¦‚æœæ²¡æœ‰å°±è·³åˆ°loginç•Œé¢ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;åœ¨loginä¸­ï¼Œæºå¸¦ç”¨æˆ·åå’Œå¯†ç è·å–tokenä¹‹åï¼Œå­˜æ”¾åˆ°æœ¬åœ°ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;login.vue:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;javascript&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-javascript &quot;&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;axios&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;post&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;api&#x2F;login&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;, {
&lt;&#x2F;span&gt;&lt;span&gt;                    email: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;this&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;email&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;                    password: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;this&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;password
&lt;&#x2F;span&gt;&lt;span&gt;                }) .&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;then&lt;&#x2F;span&gt;&lt;span&gt;((&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;res&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;                        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; * å­˜å‚¨token
&lt;&#x2F;span&gt;&lt;span&gt;                        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;localStorage&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;setItem&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;token&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;res&lt;&#x2F;span&gt;&lt;span&gt;.data.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;token&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;                        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;console&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;info&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;login successful&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;);
&lt;&#x2F;span&gt;&lt;span&gt;                        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; * è·³è½¬å›ç™»å½•å‰é¡µé¢
&lt;&#x2F;span&gt;&lt;span&gt;                        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;this&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$router&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;push&lt;&#x2F;span&gt;&lt;span&gt;({path: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;this&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;$route&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;query&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;redirect &lt;&#x2F;span&gt;&lt;span&gt;|| &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;admin&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;,})
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;                    }).&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;catch&lt;&#x2F;span&gt;&lt;span&gt;((&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;error&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;                    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;console&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;error&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;error&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;                });
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;ç°åœ¨ï¼Œè®¿é—®åç«¯æ¥å£çš„æƒé™é—®é¢˜è§£å†³äº†ã€‚ä½†æ˜¯åœ¨vueä¸­æˆ‘ä¸åŒçš„é¡µé¢æœ‰ä¸åŒçš„è®¿é—®æƒé™è¯¥å¦‚ä½•å¤„ç†ï¼Ÿvue-routerå®˜æ–¹æ–‡æ¡£ç»™å‡ºäº†ä¾‹å­ï¼š&lt;&#x2F;p&gt;
&lt;p&gt;åœ¨éœ€è¦æƒé™çš„è·¯ç”±æ·»åŠ metaä¿¡æ¯ï¼Œè¡¨æ˜è¯¥è·¯ç”±éœ€è¦ç™»å½•æ‰èƒ½è®¿é—®ï¼Œç„¶ååœ¨æ‰€æœ‰è·¯ç”±è·³è½¬ä¹‹å‰æ·»åŠ å¤„ç†å‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰authï¼Œè·³è½¬åˆ°ç™»å½•ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;javascript&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-javascript &quot;&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span&gt;path: &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;admin&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;,
&lt;&#x2F;span&gt;&lt;span&gt;name: &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;admin&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;,
&lt;&#x2F;span&gt;&lt;span&gt;component: () &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span&gt;import(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;..&#x2F;views&#x2F;admin&#x2F;Admin.vue&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;),
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; * éœ€è¦ç™»å½•æ‰èƒ½è®¿é—®
&lt;&#x2F;span&gt;&lt;span&gt;meta: {requiresAuth: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;true&lt;&#x2F;span&gt;&lt;span&gt;},
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;pre data-lang=&quot;javascript&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-javascript &quot;&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; * å…¨å±€é’©å­
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;router&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;beforeEach&lt;&#x2F;span&gt;&lt;span&gt;((&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;to&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;from&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;next&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;to&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;matched&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;some&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;record &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;record&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;meta&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;requiresAuth&lt;&#x2F;span&gt;&lt;span&gt;)) {
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; * å¯¹äºéœ€è¦authçš„è·¯å¾„
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; * æ²¡æœ‰tokenä¿¡æ¯ï¼Œredirect to login
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;(!&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;localStorage&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;token&lt;&#x2F;span&gt;&lt;span&gt;) {
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;next&lt;&#x2F;span&gt;&lt;span&gt;({
&lt;&#x2F;span&gt;&lt;span&gt;                path: &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;login&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;,
&lt;&#x2F;span&gt;&lt;span&gt;                query: {redirect: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;to&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fullPath&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;            })
&lt;&#x2F;span&gt;&lt;span&gt;        } &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;next&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;        }
&lt;&#x2F;span&gt;&lt;span&gt;    } &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;next&lt;&#x2F;span&gt;&lt;span&gt;() &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;&#x2F; ç¡®ä¿ä¸€å®šè¦è°ƒç”¨ next()
&lt;&#x2F;span&gt;&lt;span&gt;    }
&lt;&#x2F;span&gt;&lt;span&gt;})
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;ç™»å‡ºçš„è¯ï¼Œæ¸…é™¤tokenä¿¡æ¯å³å¯ã€‚&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;javascript&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-javascript &quot;&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;localStorage&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;removeItem&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;token&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;ä»¥ä¸Šï¼Œå¸Œæœ›æœ‰å¸®åŠ©ã€‚&lt;&#x2F;p&gt;
</content>
    </entry>
    <entry xml:lang="en">
        <title>å°ç‡•å­</title>
        <published>2018-06-11T11:19:00+08:00</published>
        <updated>2018-06-11T11:19:00+08:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://chaojie.fun/articles/xiao-yan-zi/" type="text/html"/>
        <id>https://chaojie.fun/articles/xiao-yan-zi/</id>
        <content type="html">&lt;p&gt;é‚£æ˜¯åœ¨å››æœˆï¼Œæœ±å®¶çš„è€å®…ä½è¿›äº†ä¸€åªå°ç‡•å­ã€‚æ¯å¤©é£æ¥é£å»çš„ç­‘å·¢ï¼Œè¡”æ¥æ ‘æï¼Œè¡”æ¥æ³¥åœŸã€‚å·¢ç­‘åœ¨èƒ¡åŒçš„æ‹è§’ï¼Œé®é£æŒ¡é›¨ã€‚è¿™ä»¶äº‹å¸å¼•äº†æœ±é€¸ä¹‹ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æœ±é€¸ä¹‹æ˜¯æœ±å®¶çš„è€äºŒï¼Œè¿™å®…å­é‡Œåªä½ç€ä»–ä¸€ä¸ªäººï¼Œæ— åŒé•‡åªæœ‰è¿™ä¸€ä¸ªå®…å­ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ¯å¤©æ¸…æ™¨ï¼Œæœ±é€¸ä¹‹ä¼šæŠŠæ‰€æœ‰æœå—çš„çª—æˆ·æ‰“å¼€ï¼Œå»ºä¸€çº§çš„é˜¶æ¢¯ï¼ŒæŠŠè¥¿å—è§’çš„æ ‘æ¡©æ¬åˆ°ä¸œåŒ—è§’ã€‚ç„¶åç”¨å°½æ•´æ—¥çš„æ™´å¤©ï¼Œçœ‹ä¸€æœµäº‘ä»è¿™å¤´é£˜åˆ°é‚£å¤´ã€‚ç›´åˆ°å››æœˆçš„é‚£ä¸ªæ—©ä¸Šã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æœ‰ä¸€åªå‘ç€å…‰çš„å°ç‡•å­ä½äº†è¿›æ¥ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;è¿™è®©æœ±é€¸ä¹‹å˜å¾—æ€¥èºï¼Œæ¬£å–œè‹¥ç‹‚ï¼Œåƒä¸ªç–¯å­ã€‚å°ç‡•å­æ˜¯ä»å—æ–¹é£è¿‡æ¥çš„ï¼Œé‚£é‡Œåº”è¯¥æœ‰ä¸€æ¡æ²³ï¼Œæ²³çš„æºå¤´åœ¨å“ªï¼Œè¿™ç‚¹å¹¶ä¸é‡è¦ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ€»ä¹‹ï¼Œæœ±å®¶çš„è€å®…çƒ­é—¹äº†èµ·æ¥ã€‚å®å®å“å“ï¼Œå‘¼å“§å‘¼å“§ï¼Œæœ±é€¸ä¹‹åšäº†ä¸€ä¸ªç›’å­ï¼Œç”¨äº†å¢™è§’çš„é‚£æ£µæ ‘æ¡©ã€‚ä»–è¦ä¿æŠ¤å°ç‡•å­ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä»–å’Œå®ƒè¯´è¯ï¼Œæ¬ä¸€åªå°æ¿å‡³ï¼Œå°ç‡•å­å½å½å–³å–³ï¼Œä»–ä¹Ÿå½å½å–³å–³ã€‚èŠå®ƒçš„è¿‡å»ï¼ŒèŠä»–å»ºçš„é˜¶æ¢¯ã€‚è¯´ä¸€è¾ˆå­è¯´ä¸å®Œçš„è¯ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;é‚£é˜¶æ¢¯ï¼Œä»–ä»ç”Ÿä¸‹æ¥å°±å¼€å§‹å»ºäº†ã€‚ç­‰åˆ°è¶³å¤Ÿé«˜ï¼Œå°±å¯ä»¥æ‘˜åˆ°æ˜Ÿæ˜Ÿï¼Œè¿™æ˜¯ä»–çš„ä½¿å‘½ã€‚æ¯ä¸ªäººéƒ½æœ‰ä½¿å‘½ï¼Œå°±åƒå’Œå°ç‡•å­çš„ç›¸é‡ï¼Œéƒ½æ˜¯å‘½ä¸­æ³¨å®šã€‚ä»–ä¼šæŠŠæ˜Ÿæ˜Ÿé€ç»™å°ç‡•å­ï¼Œè¿™ç‚¹å¹¶ä¸é‡è¦ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;é‡è¦çš„æ˜¯ï¼Œåˆ°äº†å†¬å¤©ï¼Œå°ç‡•å­å°±ä¼šé£èµ°ã€‚æ²¿ç€é€šæƒ æ²³ï¼Œä¸€è·¯å‘å—ã€‚æ²³æ°´æ˜¯è“è‰²çš„ï¼Œå’Œæœ±é€¸ä¹‹çš„éª¨å¤´ä¸€æ ·ã€‚é‚£ä¸ªæ—¶å€™ï¼Œæ‰€æœ‰çš„æ²³æ°´éƒ½ä¼šå¤±æœ›ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;è€Œæœ±é€¸ä¹‹åˆ™ç»§ç»­æ²‰é»˜ã€‚ä»–ä¼šæ¬ä¸ªå°æ¿å‡³ï¼Œååœ¨é‚£é‡Œï¼Œåæˆä¸€å°Šé›•å¡‘ã€‚é€šæƒ æ²³ä¼šä»è¿™é‡Œæ–­æµï¼Œåˆ†ä¸ºé›•å¡‘ä»¥å—å’Œé›•å¡‘ä»¥åŒ—ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;è¿™ç§äº‹æƒ…æ€»ä¼šå‘ç”Ÿï¼Œå†¬å¤©æ€»è¦æ¥ä¸´ã€‚ä»–è¦å…³ä¸Šæ‰€æœ‰æœå—çš„çª—æˆ·ï¼Œå†™ä¸‹ä¸€ä¸ªç¬”è®°æœ¬çš„æ–‡å­—ï¼Œç„¶åè¾—è½¬åä¾§ï¼Œå½»å¤œéš¾çœ ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘æ˜¯åœ¨é‚£å¤©å¤œé‡Œè§åˆ°æœ±é€¸ä¹‹çš„ï¼Œæœ±å®¶çš„è€å®…å°±åƒæµ·é‡Œçš„ä¸€åº§å­¤å²›ï¼Œé£æ²¿ç€é€šæƒ æ²³ä»çœ¼å‰å¹è¿‡ã€‚æœ‰ä¸€ä¸ªäººæ­£å®å®å“å“ï¼Œå‘¼å“§å‘¼å“§ï¼Œä¿®ç€çœ‹ä¸å°½çš„é˜¶æ¢¯ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å°±åƒæ˜¯ä¸€åœºå®¿å‘½ã€‚&lt;&#x2F;p&gt;
</content>
    </entry>
    <entry xml:lang="en">
        <title>å¯¹Pythonå¹¶å‘ç¼–ç¨‹çš„æ€è€ƒ</title>
        <published>2018-01-11T22:02:53+08:00</published>
        <updated>2018-01-11T22:02:53+08:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://chaojie.fun/articles/dui-python-bing-fa-bian-cheng-de-si-kao/" type="text/html"/>
        <id>https://chaojie.fun/articles/dui-python-bing-fa-bian-cheng-de-si-kao/</id>
        <content type="html">&lt;p&gt;ä¸ºäº†æé«˜ç³»ç»Ÿå¯†é›†å‹è¿ç®—çš„æ•ˆç‡ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¼šä½¿ç”¨åˆ°å¤šä¸ªè¿›ç¨‹æˆ–è€…æ˜¯å¤šä¸ªçº¿ç¨‹ï¼Œpythonä¸­çš„&lt;code&gt;Threading&lt;&#x2F;code&gt;åŒ…å®ç°äº†çº¿ç¨‹ï¼Œ&lt;code&gt;multiprocessing&lt;&#x2F;code&gt; åŒ…åˆ™å®ç°äº†å¤šè¿›ç¨‹ã€‚è€Œåœ¨3.2ç‰ˆæœ¬çš„pythonä¸­ï¼Œå°†è¿›ç¨‹ä¸çº¿ç¨‹è¿›ä¸€æ­¥å°è£…æˆ&lt;code&gt;concurrent.futures&lt;&#x2F;code&gt; è¿™ä¸ªåŒ…ï¼Œä½¿ç”¨èµ·æ¥æ›´åŠ æ–¹ä¾¿ã€‚æˆ‘ä»¬ä»¥è¯·æ±‚ç½‘ç»œæœåŠ¡ä¸ºä¾‹ï¼Œæ¥å®é™…æµ‹è¯•ä¸€ä¸‹åŠ å…¥å¤šçº¿ç¨‹ä¹‹åçš„æ•ˆæœã€‚&lt;&#x2F;p&gt;
&lt;p&gt;é¦–å…ˆæ¥çœ‹çœ‹ä¸ä½¿ç”¨å¤šçº¿ç¨‹èŠ±è´¹çš„æ—¶é—´ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;time
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;requests
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;NUMBERS &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;range&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;12&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;URL &lt;&#x2F;span&gt;&lt;span&gt;= &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;http:&#x2F;&#x2F;httpbin.org&#x2F;get?a=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;{}&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# è·å–ç½‘ç»œè¯·æ±‚ç»“æœ
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;a&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;    r = requests.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(URL.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;format&lt;&#x2F;span&gt;&lt;span&gt;(a))
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;r.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;json&lt;&#x2F;span&gt;&lt;span&gt;()[&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;args&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;][&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;a&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;]
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å¼€å§‹æ—¶é—´
&lt;&#x2F;span&gt;&lt;span&gt;start = time.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;time&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;num &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;NUMBERS&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;    result = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt;(num)
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;print&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;fetch(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;{}&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;) = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;{}&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;format&lt;&#x2F;span&gt;&lt;span&gt;(num, result))
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# è®¡ç®—èŠ±è´¹çš„æ—¶é—´
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;print&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;cost time: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;{}&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;format&lt;&#x2F;span&gt;&lt;span&gt;(time.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;time&lt;&#x2F;span&gt;&lt;span&gt;() - start))
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt;(0) = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;0
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt;(1) = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt;(2) = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;2
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt;(3) = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;3
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt;(4) = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;4
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt;(5) = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;5
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt;(6) = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;6
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt;(7) = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;7
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt;(8) = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;8
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt;(9) = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;9
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt;(10) = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;10
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt;(11) = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;11
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;cost&lt;&#x2F;span&gt;&lt;span&gt; time: 6.952988862991333
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;å†æ¥çœ‹çœ‹åŠ å…¥å¤šçº¿ç¨‹ä¹‹åçš„æ•ˆæœï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;time
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;requests
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;from &lt;&#x2F;span&gt;&lt;span&gt;concurrent.futures &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;ThreadPoolExecutor
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;NUMBERS &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;range&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;12&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;URL &lt;&#x2F;span&gt;&lt;span&gt;= &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;http:&#x2F;&#x2F;httpbin.org&#x2F;get?a=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;{}&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;a&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;    r = requests.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(URL.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;format&lt;&#x2F;span&gt;&lt;span&gt;(a))
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;r.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;json&lt;&#x2F;span&gt;&lt;span&gt;()[&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;args&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;][&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;a&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;]
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;start = time.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;time&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# ä½¿ç”¨çº¿ç¨‹æ± ï¼ˆä½¿ç”¨5ä¸ªçº¿ç¨‹ï¼‰
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;with &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ThreadPoolExecutor&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;max_workers&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;5&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;as &lt;&#x2F;span&gt;&lt;span&gt;executor:
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æ­¤å¤„çš„mapæ“ä½œä¸åŸç”Ÿçš„mapå‡½æ•°åŠŸèƒ½ä¸€æ ·
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;num, result &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;zip&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;NUMBERS&lt;&#x2F;span&gt;&lt;span&gt;, executor.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;map&lt;&#x2F;span&gt;&lt;span&gt;(fetch, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;NUMBERS&lt;&#x2F;span&gt;&lt;span&gt;)):
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;print&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;fetch(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;{}&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;) = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;{}&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;format&lt;&#x2F;span&gt;&lt;span&gt;(num, result))
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;print&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;cost time: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;{}&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;format&lt;&#x2F;span&gt;&lt;span&gt;(time.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;time&lt;&#x2F;span&gt;&lt;span&gt;() - start))
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt;(0) = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;0
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt;(1) = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt;(2) = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;2
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt;(3) = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;3
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt;(4) = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;4
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt;(5) = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;5
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt;(6) = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;6
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt;(7) = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;7
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt;(8) = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;8
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt;(9) = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;9
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt;(10) = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;10
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt;(11) = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;11
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;cost&lt;&#x2F;span&gt;&lt;span&gt; time: 1.9467740058898926
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;åªç”¨äº†è¿‘2ç§’çš„æ—¶é—´ï¼Œå¦‚æœå†å¤šåŠ å‡ ä¸ªçº¿ç¨‹æ—¶é—´ä¼šæ›´çŸ­ï¼Œè€Œä¸åŠ å…¥å¤šçº¿ç¨‹éœ€è¦æ¥è¿‘7ç§’çš„æ—¶é—´ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä¸æ˜¯è¯´pythonä¸­ç”±äºå…¨å±€è§£é‡Šé”çš„å­˜åœ¨ï¼Œæ¯æ¬¡åªèƒ½æ‰§è¡Œä¸€ä¸ªçº¿ç¨‹å—ï¼Œä¸ºä»€ä¹ˆä¸Šé¢ä½¿ç”¨å¤šçº¿ç¨‹è¿˜å¿«ä¸€äº›ï¼Ÿ&lt;&#x2F;p&gt;
&lt;p&gt;ç¡®å®ï¼Œç”±äºpythonçš„è§£é‡Šå™¨ï¼ˆåªæœ‰cpythonè§£é‡Šå™¨ä¸­å­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼‰æœ¬èº«ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥å­˜åœ¨ç€å…¨å±€è§£é‡Šé”ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç»å¸¸å¬åˆ°çš„GILï¼Œå¯¼è‡´ä¸€æ¬¡åªèƒ½ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡ŒPythonçš„å­—èŠ‚ç ã€‚ä½†æ˜¯å¯¹äºä¸Šé¢çš„I&#x2F;Oæ“ä½œæ¥è¯´ï¼Œä¸€ä¸ªçº¿ç¨‹åœ¨ç­‰å¾…ç½‘ç»œå“åº”æ—¶ï¼Œæ‰§è¡ŒI&#x2F;Oæ“ä½œçš„å‡½æ•°ä¼šé‡Šæ”¾GILï¼Œç„¶åå†è¿è¡Œä¸€ä¸ªçº¿ç¨‹ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œæ‰§è¡ŒI&#x2F;Oå¯†é›†å‹æ“ä½œæ—¶ï¼Œå¤šçº¿ç¨‹æ˜¯æœ‰ç”¨çš„ï¼Œå¯¹äºCPUå¯†é›†å‹æ“ä½œï¼Œåˆ™æ¯æ¬¡åªèƒ½ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹ã€‚é‚£è¿™æ ·è¯´æ¥ï¼Œæƒ³æ‰§è¡ŒCPUå¯†é›†å‹æ“ä½œæ€ä¹ˆåŠï¼Ÿ&lt;&#x2F;p&gt;
&lt;p&gt;ç­”æ¡ˆæ˜¯ä½¿ç”¨å¤šè¿›ç¨‹ï¼Œä½¿ç”¨concurrent.futuresåŒ…ä¸­çš„&lt;code&gt;ProcessPoolExecutor&lt;&#x2F;code&gt; ã€‚è¿™ä¸ªæ¨¡å—å®ç°çš„æ˜¯çœŸæ­£çš„å¹¶è¡Œè®¡ç®—ï¼Œå› ä¸ºå®ƒä½¿ç”¨ProcessPoolExecutor ç±»æŠŠå·¥ä½œåˆ†é…ç»™å¤šä¸ª Python è¿›ç¨‹å¤„ç†ã€‚å› æ­¤ï¼Œå¦‚æœéœ€è¦åš CPUå¯†é›†å‹å¤„ç†ï¼Œä½¿ç”¨è¿™ä¸ªæ¨¡å—èƒ½ç»•å¼€ GILï¼Œåˆ©ç”¨æ‰€æœ‰å¯ç”¨çš„ CPU æ ¸å¿ƒã€‚&lt;&#x2F;p&gt;
&lt;p&gt;è¯´åˆ°è¿™é‡Œï¼Œå¯¹äºI&#x2F;Oå¯†é›†å‹ï¼Œå¯ä»¥ä½¿ç”¨å¤šçº¿ç¨‹æˆ–è€…å¤šè¿›ç¨‹æ¥æé«˜æ•ˆç‡ã€‚æˆ‘ä»¬ä¸Šé¢çš„å¹¶å‘è¯·æ±‚æ•°åªæœ‰5ä¸ªï¼Œä½†æ˜¯å¦‚æœåŒæ—¶æœ‰1ä¸‡ä¸ªå¹¶å‘æ“ä½œï¼Œåƒæ·˜å®è¿™ç±»çš„ç½‘ç«™åŒæ—¶å¹¶å‘è¯·æ±‚æ•°å¯ä»¥è¾¾åˆ°åƒä¸‡çº§ä»¥ä¸Šï¼ŒæœåŠ¡å™¨æ¯æ¬¡ä¸ºä¸€ä¸ªè¯·æ±‚å¼€ä¸€ä¸ªçº¿ç¨‹ï¼Œè¿˜è¦è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œè¿™æ ·çš„å¼€é”€ä¼šå¾ˆå¤§ï¼ŒæœåŠ¡å™¨å‹æ ¹æ‰¿å—ä¸ä½ã€‚ä¸€ä¸ªè§£å†³åŠæ³•æ˜¯é‡‡ç”¨åˆ†å¸ƒå¼ï¼Œå¤§å…¬å¸æœ‰é’±æœ‰åŠ›ï¼Œèƒ½ä¹°å¾ˆå¤šçš„æœåŠ¡å™¨ï¼Œå°å…¬å¸å‘¢ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘ä»¬çŸ¥é“ç³»ç»Ÿå¼€è¿›ç¨‹çš„ä¸ªæ•°æ˜¯æœ‰é™çš„ï¼Œçº¿ç¨‹çš„å‡ºç°å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œäºæ˜¯åœ¨è¿›ç¨‹ä¹‹ä¸‹åˆåˆ†å‡ºå¤šä¸ªçº¿ç¨‹ã€‚æ‰€ä»¥æœ‰äººå°±æå‡ºäº†èƒ½ä¸èƒ½ç”¨&lt;strong&gt;åŒä¸€çº¿ç¨‹æ¥åŒæ—¶å¤„ç†è‹¥å¹²è¿æ¥&lt;&#x2F;strong&gt;ï¼Œå†å¾€ä¸‹åˆ†ä¸€çº§ã€‚äºæ˜¯&lt;strong&gt;åç¨‹&lt;&#x2F;strong&gt;å°±å‡ºç°äº†ã€‚&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;åç¨‹åœ¨å®ç°ä¸Šè¯•å›¾ç”¨ä¸€ç»„å°‘é‡çš„çº¿ç¨‹æ¥å®ç°å¤šä¸ªä»»åŠ¡ï¼Œä¸€æ—¦æŸä¸ªä»»åŠ¡é˜»å¡ï¼Œåˆ™å¯èƒ½ç”¨åŒä¸€çº¿ç¨‹ç»§ç»­è¿è¡Œå…¶ä»–ä»»åŠ¡ï¼Œé¿å…å¤§é‡ä¸Šä¸‹æ–‡çš„åˆ‡æ¢ï¼Œè€Œä¸”ï¼Œå„ä¸ªåç¨‹ä¹‹é—´çš„åˆ‡æ¢ï¼Œå¾€å¾€æ˜¯ç”¨æˆ·é€šè¿‡ä»£ç æ¥æ˜¾å¼æŒ‡å®šçš„ï¼Œä¸éœ€è¦ç³»ç»Ÿå‚ä¸ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°å¼‚æ­¥ã€‚&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;åç¨‹æœ¬è´¨ä¸Šæ˜¯å¼‚æ­¥éé˜»å¡æŠ€æœ¯ï¼Œå®ƒæ˜¯å°†äº‹ä»¶å›è°ƒè¿›è¡Œäº†åŒ…è£…ï¼Œè®©ç¨‹åºå‘˜çœ‹ä¸åˆ°é‡Œé¢çš„äº‹ä»¶å¾ªç¯ã€‚è¯´åˆ°è¿™é‡Œï¼Œä»€ä¹ˆæ˜¯å¼‚æ­¥éé˜»å¡ï¼ŸåŒæ­¥å¼‚æ­¥ï¼Œé˜»å¡ï¼Œéé˜»å¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ&lt;&#x2F;p&gt;
&lt;p&gt;å€Ÿç”¨çŸ¥ä¹ä¸Šçš„ä¸€ä¸ªä¾‹å­ï¼Œå‡å¦‚ä½ æ‰“ç”µè¯é—®ä¹¦åº—è€æ¿æœ‰æ²¡æœ‰ã€Šåˆ†å¸ƒå¼ç³»ç»Ÿã€‹è¿™æœ¬ä¹¦ï¼Œå¦‚æœæ˜¯åŒæ­¥é€šä¿¡æœºåˆ¶ï¼Œä¹¦åº—è€æ¿ä¼šè¯´ï¼Œä½ ç¨ç­‰ï¼Œâ€æˆ‘æŸ¥ä¸€ä¸‹â€ï¼Œç„¶åå¼€å§‹æŸ¥å•ŠæŸ¥ï¼Œç­‰æŸ¥å¥½äº†ï¼ˆå¯èƒ½æ˜¯5ç§’ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€å¤©ï¼‰å‘Šè¯‰ä½ ç»“æœï¼ˆè¿”å›ç»“æœï¼‰ã€‚è€Œå¼‚æ­¥é€šä¿¡æœºåˆ¶ï¼Œä¹¦åº—è€æ¿ç›´æ¥å‘Šè¯‰ä½ æˆ‘æŸ¥ä¸€ä¸‹å•Šï¼ŒæŸ¥å¥½äº†æ‰“ç”µè¯ç»™ä½ ï¼Œç„¶åç›´æ¥æŒ‚ç”µè¯äº†ï¼ˆä¸è¿”å›ç»“æœï¼‰ã€‚ç„¶åæŸ¥å¥½äº†ï¼Œä»–ä¼šä¸»åŠ¨æ‰“ç”µè¯ç»™ä½ ã€‚åœ¨è¿™é‡Œè€æ¿é€šè¿‡â€œå›ç”µâ€è¿™ç§æ–¹å¼æ¥å›è°ƒã€‚&lt;&#x2F;p&gt;
&lt;p&gt;è€Œé˜»å¡ä¸éé˜»å¡åˆ™æ˜¯ä½ æ‰“ç”µè¯é—®ä¹¦åº—è€æ¿æœ‰æ²¡æœ‰ã€Šåˆ†å¸ƒå¼ç³»ç»Ÿã€‹è¿™æœ¬ä¹¦ï¼Œä½ å¦‚æœæ˜¯é˜»å¡å¼è°ƒç”¨ï¼Œä½ ä¼šä¸€ç›´æŠŠè‡ªå·±â€œæŒ‚èµ·â€ï¼Œç›´åˆ°å¾—åˆ°è¿™æœ¬ä¹¦æœ‰æ²¡æœ‰çš„ç»“æœï¼Œå¦‚æœæ˜¯éé˜»å¡å¼è°ƒç”¨ï¼Œä½ ä¸ç®¡è€æ¿æœ‰æ²¡æœ‰å‘Šè¯‰ä½ ï¼Œä½ è‡ªå·±å…ˆä¸€è¾¹å»ç©äº†ï¼Œ å½“ç„¶ä½ ä¹Ÿè¦å¶å°”è¿‡å‡ åˆ†é’Ÿcheckä¸€ä¸‹è€æ¿æœ‰æ²¡æœ‰è¿”å›ç»“æœã€‚åœ¨è¿™é‡Œé˜»å¡ä¸éé˜»å¡ä¸æ˜¯å¦åŒæ­¥å¼‚æ­¥æ— å…³ã€‚è·Ÿè€æ¿é€šè¿‡ä»€ä¹ˆæ–¹å¼å›ç­”ä½ ç»“æœæ— å…³ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ€»ä¹‹ä¸€å¥è¯ï¼Œé˜»å¡å’Œéé˜»å¡ï¼Œæè¿°çš„æ˜¯ä¸€ç§çŠ¶æ€ï¼Œè€ŒåŒæ­¥ä¸éåŒæ­¥æè¿°çš„æ˜¯è¡Œä¸ºæ–¹å¼ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å›åˆ°åç¨‹ä¸Šã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ç±»ä¼¼äº&lt;code&gt;Threading&lt;&#x2F;code&gt; åŒ…æ˜¯å¯¹çº¿ç¨‹çš„å®ç°ä¸€æ ·ï¼Œpython3.4ä¹‹ååŠ å…¥çš„&lt;code&gt;asyncio&lt;&#x2F;code&gt; åŒ…åˆ™æ˜¯å¯¹åç¨‹çš„å®ç°ã€‚æˆ‘ä»¬ç”¨asyncioæ”¹å†™æ–‡ç« å¼€å¤´çš„ä»£ç ï¼Œçœ‹çœ‹ä½¿ç”¨åç¨‹ä¹‹åèƒ½èŠ±è´¹å¤šå°‘æ—¶é—´ã€‚&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;asyncio
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;aiohttp
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;time
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;NUMBERS &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;range&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;12&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;URL &lt;&#x2F;span&gt;&lt;span&gt;= &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;http:&#x2F;&#x2F;httpbin.org&#x2F;get?a=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;{}&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# è¿™é‡Œçš„ä»£ç ä¸ç†è§£æ²¡å…³ç³»
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# ä¸»è¦æ˜¯ä¸ºäº†è¯æ˜åç¨‹çš„å¼ºå¤§
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;async def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;fetch_async&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;a&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;async with &lt;&#x2F;span&gt;&lt;span&gt;aiohttp.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;request&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;GET&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;, URL.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;format&lt;&#x2F;span&gt;&lt;span&gt;(a)) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;as &lt;&#x2F;span&gt;&lt;span&gt;r:
&lt;&#x2F;span&gt;&lt;span&gt;        data = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;await &lt;&#x2F;span&gt;&lt;span&gt;r.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;json&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;data[&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;args&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;][&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;a&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;]
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;start = time.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;time&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;loop = asyncio.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get_event_loop&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;tasks = [&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch_async&lt;&#x2F;span&gt;&lt;span&gt;(num) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;num &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;NUMBERS&lt;&#x2F;span&gt;&lt;span&gt;]
&lt;&#x2F;span&gt;&lt;span&gt;results = loop.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;run_until_complete&lt;&#x2F;span&gt;&lt;span&gt;(asyncio.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gather&lt;&#x2F;span&gt;&lt;span&gt;(*tasks))
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;num, results &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;zip&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;NUMBERS&lt;&#x2F;span&gt;&lt;span&gt;, results):
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;print&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;fetch(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;{}&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;) = ()&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;format&lt;&#x2F;span&gt;&lt;span&gt;(num, results))
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;print&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;cost time: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;{}&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;format&lt;&#x2F;span&gt;&lt;span&gt;(time.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;time&lt;&#x2F;span&gt;&lt;span&gt;() - start))
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;æ‰§è¡Œç»“æœï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fetch&lt;&#x2F;span&gt;&lt;span&gt;(0) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;= &lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;fetch(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;= &lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;fetch(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;= &lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;fetch(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;3&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;= &lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;fetch(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;4&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;= &lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;fetch(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;5&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;= &lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;fetch(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;6&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;= &lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;fetch(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;7&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;= &lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;fetch(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;8&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;= &lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;fetch(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;9&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;= &lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;fetch(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;10&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;= &lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;fetch(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;11&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;= &lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;cost time: 0.8582110404968262
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;ä¸åˆ°ä¸€ç§’ï¼æ„Ÿå—åˆ°åç¨‹çš„å¨åŠ›äº†å§ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;asyncioçš„çŸ¥è¯†è¯´å®åœ¨çš„æœ‰ç‚¹éš¾æ‡‚ï¼Œå› ä¸ºå®ƒæ˜¯ç”¨å¼‚æ­¥çš„æ–¹å¼åœ¨ç¼–å†™ä»£ç ã€‚ä¸Šé¢ç»™å‡ºçš„asyncioç¤ºä¾‹ä¸ç†è§£ä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œä¹‹åçš„æ–‡ç« ä¼šè¯¦ç»†çš„ä»‹ç»ä¸€äº›asyncioç›¸å…³çš„æ¦‚å¿µã€‚&lt;&#x2F;p&gt;
</content>
    </entry>
    <entry xml:lang="en">
        <title>ç­‰ç­‰</title>
        <published>2017-11-20T11:19:00+08:00</published>
        <updated>2017-11-20T11:19:00+08:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://chaojie.fun/articles/deng-deng/" type="text/html"/>
        <id>https://chaojie.fun/articles/deng-deng/</id>
        <content type="html">&lt;p&gt;æƒ³èµ·ä¸€ä¸ªäº‹ï¼Œå½—æ˜Ÿæ’å‡»ç³»å®ˆç”ºçš„é‚£ä¸ªæ™©ä¸Šï¼Œæˆ‘çœ‹åˆ°æœ‰äººéª‘ç€ç¾Šåœ¨æ¥å›è·‘ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;åœ¨å·¥å¤§è¥¿é—¨åœ°é“å£ï¼Œæ‰‹é‡Œæ‹¿ç€é­å­ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;é©¾ï¼åƒéª‘ç€ä¸€åŒ¹é©¬ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å¤©å†·çš„å¾ˆï¼Œæˆ‘å–Šäº†å£°â€å¤©ç‹ç›–åœ°è™â€ï¼Œç¾Šå°±åœä¸‹æ¥çœ‹æˆ‘ï¼Œçœ¼ç¥åƒçœ‹ä¸€ä¸ªå‚»å­ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;è¿™ä»¶äº‹æƒ…ä¸è¯¥å‘ç”Ÿã€‚&lt;&#x2F;p&gt;
&lt;p&gt;åæ¥æˆ‘ååœ¨ç‚•å¤´ä¸Šè·Ÿç­‰ç­‰è¯´èµ·ï¼Œä»–åªæ˜¯ç¬‘ï¼Œéª‘ä¸Šç¾Šï¼Œä½™å…‰çœ‹æˆ‘ä¸€çœ¼ï¼Œä¾¿ç»å°˜è€Œå»ã€‚è¿˜æ²¡æœ‰äººåƒä»–è¿™æ ·ï¼Œåƒé¥­ï¼Œéª‘ç¾Šï¼Œåƒé¥­ï¼Œéª‘ç¾Šã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘é—®ä»–ï¼Œä½ ä¸ºä»€ä¹ˆéª‘ç¾Šã€‚&lt;&#x2F;p&gt;
&lt;p&gt;â€œä½ ä¸æ‡‚,è¿™å«å¿µæƒ³â€ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘æ˜¯åœ¨åƒç«é”…çš„æ—¶å€™æ˜ç™½çš„ï¼ŒåœŸè±†æ”¾åˆ°é”…é‡Œï¼Œè¿™æ˜¯ç†µå¢åŠ çš„è¿‡ç¨‹ã€‚èµ¶ç¾Šçš„äººéƒ½çŸ¥é“ï¼Œç¾Šåƒè‰ï¼Œåƒç€åƒç€å°±å‘†ä½äº†ã€‚ è¿™ä¹Ÿæ˜¯ç†µå¢åŠ çš„è¿‡ç¨‹ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ç­‰ç­‰æœ‰ä¸€ç™¾å¤´ç¾Šã€‚ç†µå¢åŠ çš„æ›´å¿«ï¼Œè™šæ— æ„Ÿæ›´å°‘ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘ä¹Ÿè¢«è™šæ— æ„Ÿå‡»è¿‡ã€‚&lt;&#x2F;p&gt;
</content>
    </entry>
    <entry xml:lang="en">
        <title>å¤±ç„¦çš„ä¹ é¢˜</title>
        <published>2016-10-03T11:19:00+08:00</published>
        <updated>2016-10-03T11:19:00+08:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://chaojie.fun/articles/shi-jiao-de-xi-ti/" type="text/html"/>
        <id>https://chaojie.fun/articles/shi-jiao-de-xi-ti/</id>
        <content type="html">&lt;p&gt;â€”â€”è®°è€ƒç ”ä¹‹è·¯&lt;&#x2F;p&gt;
&lt;p&gt;ä¹ é¢˜è¶Šçœ‹è¶Šæ¨¡ç³Šï¼Œä¸å¯æè¿°ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä¸å¯æè¿°æ˜¯æŒ‡ä½ çœ‹å®ƒä¸€ä¸‹ï¼Œç­”æ¡ˆå°±ä¸ç¡®å®šã€‚ä¸æ˜¯è§£æ³•ä¸æ­£ç¡®ï¼Œæ˜¯ä½ ä¸è¯¥çœ‹å®ƒã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä¹ é¢˜ç¿»åˆ°å‰ä¸€é¡µï¼Œä¹Ÿå¯ä»¥ç¿»åˆ°åä¸€é¡µã€‚å¯ä»¥çœ‹åäºŒç‚¹ä¹‹åçš„ä¹ é¢˜ï¼Œä¹Ÿå¯ä»¥çœ‹æ˜¨å¤©çš„ä¹ é¢˜ã€‚é™¤äº†æ³°å‹’å…¬å¼ï¼Œä½ ä¸èƒ½ç¢°å®ƒã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ€»ä¹‹ä¹ é¢˜å¤±ç„¦äº†ï¼Œæ‰€æœ‰çš„æ–‡å­—éƒ½æ¨¡ç³Šäº†ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;è¿™æ—¶å€™çš„å¤åŸæ°¸å·é˜´é›¨è¿ç»µï¼Œäº”æ¥¼åŸ‹å¤´åšä¹ é¢˜çš„äººï¼Œæœ‰äº›è®¸å¾®é£ï¼Œä¹ é¢˜å°±åœ¨ä»–çœ¼å‰åˆ†æ•£äº†ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;åšä¹ é¢˜çš„æ˜¯é‡å…«ã€‚é‡å…«æ˜¯æˆ‘åŒå­¦ï¼Œæ‹¿ç€ç¬”åšå¤±ç„¦çš„ä¹ é¢˜ã€‚é‚£æ˜¯å››æœˆçš„æŸä¸ªæ™šä¸Šï¼Œä»–ä¸çŸ¥é“å¦‚ä½•ç¿»å¼€é‚£æœ¬ä¹ é¢˜ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä¹ é¢˜éœ€è¦ç¿»å¼€å—ï¼Œä¸ºä»€ä¹ˆè¦ç¿»å¼€ä¹ é¢˜ï¼Ÿ&lt;&#x2F;p&gt;
&lt;p&gt;ç¿»åˆ°å“ªä¸€é¡µï¼Ÿ&lt;&#x2F;p&gt;
&lt;p&gt;ç¿»å¼€ä¹‹ååšäº›ä»€ä¹ˆï¼Ÿ&lt;&#x2F;p&gt;
&lt;p&gt;è°åœ¨ç¿»å¼€ä¹ é¢˜ï¼Ÿ&lt;&#x2F;p&gt;
&lt;p&gt;åœ¨è¿™ä¹‹åï¼Œä¹ é¢˜å°±å¤±ç„¦äº†ã€‚ä¸æ­¢ç®€å•çš„å¤±ç„¦ï¼Œæé™ç­‰äºé¢ç§¯ï¼Œç§¯åˆ†ç­‰äºæ–¹å·®ï¼Œå¯¼æ•°å˜ä¸ºçŸ©é˜µã€‚è¿™ç§æƒ…å†µæ˜¯å¯æ€•çš„ï¼Œé‡å…«æ‹¿èµ·ä¸¤åªç¬”åšé¢˜ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å¤±ç„¦çš„ä¹ é¢˜å¼•åŠ›å·¨å¤§ï¼Œå‘¨å›´çš„æ°´æ¯ã€ç¬”ã€è¯¾æœ¬å…¨éƒ½å¤±ç„¦äº†ã€‚ç¨ä¸æ³¨æ„ï¼Œäººä¹Ÿä¼šè·Ÿç€å¤±ç„¦ï¼Œå˜æˆåä¸€ä¸ªã€‚&lt;&#x2F;p&gt;
&lt;p&gt;é‡å…«å’Œæˆ‘è¯´è¿‡ï¼Œé‚£å¤©å¤œé‡Œï¼Œäº”æ¥¼çš„æ¡Œå­å°è¯•å››è§’æœä¸Šï¼Œé—¨æ˜¯å‘ä¸‹å¼€ç€ã€‚ä»–æ•²äº†æ•²æ¡Œå­ï¼Œå‘Šè¯‰å®ƒçŸ¥è¯†å’Œæ¯…åŠ›è¿™ä¸¤ä¸ªè¯çš„ä¸¥è°¨æ€§ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ç„¶ååˆä¸Šä¹ é¢˜å†Œï¼Œè®©å®ƒæ…¢æ…¢ç´§èµ·æ¥ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;åçš„å¤ªä¹…ï¼Œä¹ é¢˜å’Œäººéƒ½ä¼šå¤±ç„¦ã€‚ä½ å¯ä»¥åˆä¸Šä¸€æœ¬å¤±ç„¦çš„ä¹ é¢˜ï¼Œå´ä¸èƒ½æŒ½æ•‘ä¸€ä¸ªå¤±ç„¦çš„äººã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å¤±ç„¦çš„äººè¦å¸¸æ³¨æ„ä¼‘æ¯ã€‚&lt;&#x2F;p&gt;
</content>
    </entry>
    <entry xml:lang="en">
        <title>å¾çš„å›½</title>
        <published>2016-04-15T14:00:33+08:00</published>
        <updated>2016-04-15T14:00:33+08:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://chaojie.fun/articles/wu-de-guo/" type="text/html"/>
        <id>https://chaojie.fun/articles/wu-de-guo/</id>
        <content type="html">&lt;p&gt;ä¸ƒæ—¶ä¸€åˆ»çš„é’Ÿå£°å“è¿‡ä¹‹åï¼Œå…´é‚¦å¸‚çš„å±…æ°‘ä»¬ä¼šæŒ‰æ—¶æ‰“å¼€æˆ¿é—¨ï¼Œä»–ä»¬é¢å¸¦å¾®ç¬‘ï¼Œä¼´éšç€æ‰‘é¢è€Œæ¥çš„å–„æ„ï¼Œé«˜é«˜æŠ¬èµ·çš„å³æ‰‹ï¼Œå‘ç€è¡—åŠé‚»å±…çš„è„¸è€Œå»ï¼Œå™¼é‡Œå•ªå•¦çš„æŒæ´å£°åƒæäº†æ–°å¹´çš„é­ç‚®ã€‚åœ¨è¿™ä¹‹åï¼Œäººäººéƒ½å¿…é¡»å°†ä»£è¡¨æ¸…æ™¨é—®å€™çš„å¤œå£¶ä¸­çš„åœ£æ°´æ³¼æ´’è‡³å¯¹æ–¹é—¨å‰ã€‚è¿™æ˜¯è§„çŸ©ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å…´é‚¦å¸‚æ˜¯å¾çš„å›½æœ€ç¹åçš„éƒ½å¸‚ã€‚é™¤äº†æ¯å¤©æ—©ä¸Šçš„é‚»é‡Œå’Œç¦å‹å¥½è§„çŸ©ä¹‹å¤–ï¼Œå¾çš„å›½è¿˜æœ‰å¾ˆå¤šç§è§„çŸ©ï¼Œæ¯”å¦‚ç¡å‰äº’ç›¸æ”¾å±å•¦ï¼Œå­¦ç”Ÿä¸Šè¯¾å‰äº’ç›¸åç—°å•¦ï¼Œæ·±å—äººä»¬çš„å–œçˆ±ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;è¯´èµ·å¾çš„å›½ï¼Œè¿™æ˜¯ä¸ç°ä¸–å…±å­˜çš„è®¸è®¸å¤šå¤šä¸–ç•Œä¸­çš„ä¸€ä¸ªï¼Œä¹Ÿå°±æ˜¯é‡å­åŠ›å­¦ä¸­å¤šå®‡å®™è®ºæ‰€è¡¨è¾¾çš„ã€‚å’Œæˆ‘ä»¬çš„ä¸–ç•Œä¸€æ ·ï¼Œé‚£é‡Œä¹Ÿæœ‰æ”¿åºœï¼Œæœ‰å­¦æ ¡ï¼Œæœ‰å±…æ°‘ï¼Œæœ‰åŸé•‡ã€‚æˆ‘åœ¨åäºŒå²é‚£å¹´ï¼Œå’Œçˆ¶æ¯é—¹ä¸åˆï¼Œä¸€æ°”ä¹‹ä¸‹è·‘åˆ°äº†ä¸­æ¡å±±çš„æ·±å¤„æ‰“ç®—å­¦é™¶æ¸Šæ˜ä¸€æ ·éšå±…ï¼Œå´è¯¯æ‰“è¯¯æ’çš„é—¯å…¥é‚£é‡Œã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘åœ¨é‚£é‡Œä¸€ç›´ç”Ÿæ´»åˆ°64å²ï¼Œä¸€è¾ˆå­åº¸åº¸ç¢Œç¢Œï¼Œå¾—è¿‡ä¸”è¿‡ï¼Œç®€ç›´å¯æ‚²ã€‚ä¸è¿‡æœ‰é‚£ä¹ˆå‡ ä»¶è®©äººåŠ¨å®¹çš„äº‹å§‹ç»ˆéš¾ä»¥å¿˜å´ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;é‚£æ˜¯åœ¨é«˜ä¸­ï¼Œæœ‰ä¸€ä½æˆ‘å¾ˆå–œçˆ±çš„Yå§“è¯­æ–‡è€å¸ˆï¼Œä¸ªå¤´ä¸é«˜ï¼Œäººå¾ˆå¥½ï¼Œç»™äº†æˆ‘å¾ˆå¤šå¸®åŠ©ã€‚æœ‰ä¸€æ¬¡ä»–è®©æˆ‘åœ¨è¯¾å ‚ä¸Šå›ç­”é—®é¢˜ï¼Œé—®æˆ‘ä¸€åŠ ä¸€ç­‰äºå‡ ï¼Œæˆ‘æ€è€ƒäº†åŠå¤©è¯´è‡ªå·±ä¸ä¼šï¼ŒYè€å¸ˆå°±å½“ç€å…¨ç­åŒå­¦çš„é¢ä¾®è¾±æˆ‘ï¼Œè¯´æˆ‘çš„è„‘å­å°±æ˜¯ä¸€å¨å±ï¼Œè®©æˆ‘ç«™åˆ°æ•™å®¤åé¢ç›´åˆ°ä¸‹è¯¾ã€‚æˆ‘å¿ƒé‡Œæ˜ç™½ï¼ŒYè€å¸ˆè¿™æ˜¯åœ¨é¼“åŠ±æˆ‘ã€‚è­¬å¦‚ä»–ç»å¸¸ç”¨æ¿å­æ‰“æˆ‘ï¼Œæœ‰ä¸€æ¬¡ä»–å¯çˆ±çš„å„¿å­åœ¨æˆ‘é¢å‰æ‘”å€’äº†ï¼Œä»¥ä¸ºæ˜¯æˆ‘æ•…æ„æŠŠä»–ç»Šå€’çš„ï¼Œä¸Šæ¥å°±æ˜¯ä¸€é¡¿æ‹³æ‰“è„šè¸¢ã€‚æˆ‘å¾ˆé«˜å…´ï¼Œè¿™è¯´æ˜ä»–å¾ˆé‡è§†æˆ‘ã€‚ä¸ºäº†æ„Ÿè°¢ä»–ï¼Œæˆ‘æ¯ä¸ªæœˆéƒ½ä¼šç»™Yè€å¸ˆä¹°ç¤¼ç‰©ã€‚åœ¨å¾çš„å›½ï¼Œè€å¸ˆå¿…é¡»æ¯å¤©æ‰“å­¦ç”Ÿï¼Œå¦‚æœèƒ½ç»å¸¸ä¾®è¾±å­¦ç”Ÿåˆ™æ›´å¥½äº†ï¼Œè¿™æ ·æ‰èƒ½ä½“ç°å‡ºä¸€ä¸ªè€å¸ˆçš„èƒ½åŠ›ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘åœ¨ä¹‹åè¿›å…¥äº†å¾çš„å›½è”åˆè‡ªæ²»å¤§å­¦ï¼Œ16å¹´çš„æ—¶å…‰ä¸€æ™ƒè€Œè¿‡ã€‚è¯´å®è¯ï¼Œè¿™æ˜¯æˆ‘éš¾å¾—çš„å¿«ä¹æ—¶å…‰ã€‚åœ¨å¤§å­¦é‡Œï¼Œæˆ‘ä»¬ç™½å¤©ç¡è§‰ï¼Œæ™šä¸Šæ´»åŠ¨ã€‚å­¦ç”Ÿåœ¨ä¸Šè¯¾å‰éœ€è¦å‘è€å¸ˆè¡Œå°Šå¸ˆé‡æ•™ç¤¼ï¼Œæ— å¤–ä¹éª‚ä¸€å¥â€œå‚»é€¼è€å¸ˆâ€ï¼Œè€å¸ˆå†å›ä¸€å¥â€œå‚»é€¼å­¦ç”Ÿâ€ã€‚åœ¨ä¸Šè¯¾çš„æ—¶å€™ï¼Œå­¦ç”Ÿéœ€è¦è¿›è¡Œ20åˆ†é’Ÿçš„ç¡çœ ç¤¼ï¼Œè¿™æ ·å¯ä»¥é€šç¥çµï¼Œä¿ä½‘è‡ªå·±ä¸æŒ‚ç§‘ã€‚é™¤äº†è¿™äº›ï¼Œå¹¿å¤§çš„å¯çˆ±çš„åŒå­¦ä»¬åˆ™å¯ä»¥ç›¸äº’é—´å”¾éª‚ï¼Œä¾®è¾±ã€‚è¯ºå¤§çš„æ ¡å›­é‡Œï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æ¡Œå­ä¸Šï¼Œè¡£æœä¸Šï¼Œè£¤è¡©ä¸Šï¼Œæ ‘ä¸Šï¼Œåˆ°å¤„éƒ½å†™ç€â€œå¾·æ‰å…¼å¤‡ï¼Œè‡ªå¼ºä¸æ¯â€å››ä¸ªå¤§å­—ï¼Œè¿™æ˜¯æˆ‘ä»¬çš„æ ¡è®­ã€‚å¤§å¤šæ•°çš„åŒå­¦éƒ½åšå®šä¸ç§»çš„ä»¥æ ¡è®­ä½œä¸ºè‡ªå·±å‡†åˆ™ï¼Œä¸ä»…æœ‰å“å¾·ï¼Œè€Œä¸”æœ‰æ‰åã€‚å¦‚æœä½ æœ‰å¹¸ä½åˆ°å­¦ç”Ÿå¯å®¤ï¼Œè¿˜å¯ä»¥æ›´å¼€æ”¾ã€‚è¿™é‡Œçš„ä¸€åˆ‡ä¸œè¥¿éƒ½æ˜¯å…¬ç”¨çš„ï¼Œç‰™åˆ·æ˜¯å…¬ç”¨çš„ï¼Œè£¤è¡©æ˜¯å…¬ç”¨çš„ã€‚è¿™é‡Œæ²¡æœ‰éšç§ï¼Œå¤§å®¶å–œæ¬¢äº’ç›¸ç›‘è§†ä½ åœ¨åšä»€ä¹ˆï¼Œä½ æ€ä¹ˆåšæˆ‘å°±æ€ä¹ˆåšã€‚è€Œä¸”è§„å®šï¼Œçœ‹è§†é¢‘å¬éŸ³ä¹çš„æ—¶å€™è¦æŠŠå£°éŸ³å¼€åˆ°æœ€å¤§ï¼Œä»¥ä¾¿äºå…±äº«ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å•Šå‘¼å˜¿ï¼Œè¿™é‡Œç®€ç›´æ˜¯ä¸–å¤–æ¡ƒæºã€‚æˆ‘è‡³ä»Šè¿˜è®°å¾—å½“å¹´åˆšæ¥å¾çš„å›½æ—¶æƒŠè®¶çš„å¿ƒæƒ…ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘æ— é™çƒ­çˆ±ç€æˆ‘æ‰€ç”Ÿæ´»çš„è¿™ä¸ªä¸–ç•Œã€‚ä¸è¿‡æˆ‘60å¤šå²äº†ï¼ŒçŸ¥é“è‡ªå·±æ°”æ•°å·²å°½ã€‚æˆ‘å¤§å£°å«åš£ç€ï¼Œä¸€ä¸ªäººè„±å…‰äº†èº«å­åœ¨å¤§è¡—ä¸Šå¥”è·‘ï¼Œå°±ä¸€ç›´è¿™æ ·è·‘ç€ï¼Œä¸æ˜ç™½è¿™æ ·åšçš„æ„ä¹‰ã€‚ç¢°è§äº†æ¹–ï¼Œä¾¿è·³ä¸‹å»ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ç›´åˆ°æˆ‘12ç‚¹å¤šé†’æ¥ä»¥åï¼Œæ‰å‘è§‰æ˜¯æ¢¦ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æœ‰è¯´æ¢¦é‡Œçš„äº‹éƒ½æ˜¯åçš„ã€‚æˆ‘æœ›ç€å‘¨é­æ‰€ç”Ÿæ´»çš„ä¸–ç•Œï¼Œå¹¶ä¸ç¡®å®šå“ªä¸ªæ‰æ˜¯æ¢¦ã€‚&lt;&#x2F;p&gt;
</content>
    </entry>
    <entry xml:lang="en">
        <title>æ‘‡å•Šæ‘‡ï¼Œæ‘‡åˆ°å¤–å©†æ¡¥</title>
        <published>2016-01-02T21:56:23+08:00</published>
        <updated>2016-01-02T21:56:23+08:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://chaojie.fun/articles/yao-a-yao-yao-dao-wai-po-qiao/" type="text/html"/>
        <id>https://chaojie.fun/articles/yao-a-yao-yao-dao-wai-po-qiao/</id>
        <content type="html">&lt;p&gt;â€œå“²å“²ç°åœ¨è·‘åˆ°å“ªé‡Œå¿µä¹¦å»äº†ï¼Ÿâ€&lt;&#x2F;p&gt;
&lt;p&gt;â€œæ¹–å—ã€‚å°±æ˜¯æ¯›ä¸»å¸­çš„æ•…ä¹¡ã€‚â€&lt;&#x2F;p&gt;
&lt;p&gt;â€œå“¦ï¼Œæ¹–å—ã€‚å’‹å°±è·‘é‚£ä¹ˆçš„è¿œã€‚â€å¤–å©†è¯´ç€ä»æŸœå­æœ€æ·±å¤„æ‹¿å‡ºåˆ«äººé€ç»™å¥¹çš„é¦™è•‰ï¼Œè®©æˆ‘ä»¬ä¿©å…„å¼Ÿæ‹¿ç€ã€‚æˆ‘ä¸è‚¯è¦ï¼Œå¥¹ç¡¬è¦å¡ç€ã€‚å¤–å©†æœ‰å…«åå¤šå²äº†ï¼Œè…¿è„šä¸å¥½ï¼Œè¦ç»å¸¸åƒè¯ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘å¦ˆå¸¸å’Œæˆ‘æŠ±æ€¨è¯´å¤–å©†è¿™å‡ å¤©è„¾æ°”åˆçŠ¯äº†ï¼Œå¥¹è¦å›è‡ªå·±çš„å®¶ï¼Œä¸æƒ³ä½åœ¨å­å¥³ä»¬çš„å®¶é‡Œï¼Œæ‹—å¾—å¾ˆã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å¤–å©†çš„å®¶åœ¨å±±ä¸Šã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä¸­æ¡å±±ä»æœ€ä¸œè¾¹ä¸€è·¯è”“å»¶è‡³è¥¿è¾¹ï¼Œåƒä¸€ä¸ªå¤§å¤§çš„æ‹¥æŠ±ï¼Œå±±ä¸å¾ˆé«˜ï¼Œæ ½æ»¡äº†å¯†å¯†éº»éº»çš„æ¾æ ‘ã€‚æ”¾çœ¼æœ›å»æœ€é«˜çš„é‚£åº§å±±å³°ï¼Œæ˜¯æˆ‘å¤–å©†çš„å®¶ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘åä¸€äºŒå²çš„æ—¶å€™ï¼Œæ¯åˆ°æš‘å‡å°±ä¼šå’Œæˆ‘å¦ˆä¸€èµ·å»åˆ°å±±ä¸Šæˆ‘å¤–å©†çš„å®¶ï¼Œè¦èµ°å¾ˆä¹…çš„å±±è·¯ï¼Œæ›²æ›²æŠ˜æŠ˜ã€‚å±±è·¯çš„ä¸¤æ—æ˜¯æˆç‰‡çš„æ¾æ ‘ä»¥åŠå¼€æ»¡äº†èŠ±çš„å„ç§æ¤ç‰©ï¼Œè¿˜æœ‰æ ¸æ¡ƒæ ‘ã€‚èµ°ç´¯äº†çš„æ—¶å€™å°±ä¼šèººåœ¨æ ‘ä¸‹é¢ä¹˜å‡‰ï¼Œä¸‹é¢é“ºæ»¡äº†è½¯ç»µç»µçš„æ¾å¶ã€‚ç­‰ä½ èµ°å‡ºæ±—çš„æ—¶å€™ï¼Œå°±ä¼šåœ¨å±±çš„æ·±å¤„çœ‹åˆ°ä¸€åº§ç”¨æ¾æœ¨æ­å»ºçš„æœ¨å¤´æˆ¿å­ï¼Œé‚£æ˜¯å…¸å‹çš„å®ˆæ—å‘˜çš„å®¶ã€‚æˆ‘å¤–å…¬æ˜¯é‚£ç‰‡å±±çš„å®ˆæŠ¤å‘˜ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å¤–å…¬å› ä¸ºç™Œç—‡åœ¨æˆ‘å¾ˆå°çš„æ—¶å€™å°±å»ä¸–äº†ã€‚èƒƒç™Œæ™šæœŸã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘å¸¸å¸¸å–œæ¬¢ä¸€ä¸ªäººè·‘åˆ°å¯†å¯†çš„æ¾æ—ä¸­é—´ï¼Œé£å¹è¿‡çš„æ—¶å€™ï¼Œå±±æ—ä¼šå‘å‡ºä¸€ç§å¾ˆç‰¹åˆ«çš„å£°éŸ³ã€‚å¦‚æœè¶³å¤Ÿå¹¸è¿çš„è¯ï¼Œè¿˜ä¼šçœ‹è§æ¾é¼ è·‘å‡ºæ¥ï¼Œä¸€ä¸‹å­å°±æ¶ˆå¤±ä¸è§ã€‚è¦æ˜¯åœ¨æ™šä¸Šï¼Œä½ å°±èƒ½çœ‹è§å¾ˆå¤šçš„è¤ç«è™«é—ªç€å¾®å…‰ï¼Œè¿˜æœ‰æ­¤èµ·å½¼ä¼çš„èŸ‹èŸ€çš„å«å£°ã€‚æˆ‘ä¼šåœ¨è¿™ä¸ªæ—¶å€™æ‰“å¼€å¤–å…¬çš„æ”¶éŸ³æœºï¼Œç…¤æ²¹ç¯å†’ç€ç»†ç»†çš„é»‘çƒŸï¼Œç„¶ååœ¨å¹¿æ’­å£°ä¸­å®‰ç„¶å…¥ç¡ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;é™¢é‡Œé¢æœ‰é¢—æ ¸æ¡ƒæ ‘ï¼Œæ¯æ¬¡æ¥çš„æ—¶å€™æ­£å¥½æ˜¯æ ¸æ¡ƒæˆç†Ÿçš„å­£èŠ‚ã€‚æˆ‘å°±ä¼šçˆ¬åˆ°æ ‘ä¸ŠæŠŠå®ƒä»¬æ‘˜ä¸‹æ¥ï¼Œæ‰¾æ¥ä¸€äº›å¹²æ¯çš„æ ‘æã€æ‚è‰ï¼Œç­‰æ ¸æ¡ƒçƒ¤æˆé»‘è‰²ï¼Œè½»æ¾çš„å°±èƒ½æŠŠå¤–çš®å‰¥å»ï¼Œç„¶åæ‰¾æ¥çŸ³å¤´ç ¸å¼€ã€‚ä¸è¿‡ï¼Œæ¯æ¬¡å¿ƒæ»¡æ„è¶³çš„åƒè¿‡ä¹‹åï¼Œåæ ¹æ‰‹æŒ‡å°±å…¨éƒ½å˜äº†è‰²ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å†æ²¡èµ°å¤šè¿œï¼Œä¼šæœ‰ä¸¤ä¸‰é¢—æ¢¨æ ‘ã€‚é‚£ä¸Šé¢çš„æ¢¨å­å¾ˆç¡¬ï¼Œæˆ‘ä»¬é‚£é‡Œéƒ½å«åšæœ¨å¤´æ¢¨ã€‚è™½ç„¶ä¸å¥½åƒï¼Œæˆ‘ä¹Ÿä¼šæ‘˜ä¸‹ä¸€ä¸¤ä¸ªæ¥æ‰“æ‰“ç‰™ç¥­ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä¸å¤šå¹´åï¼Œå¤–å©†æ¬åˆ°å±±ä¸‹å»ä½äº†ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å±±ä¸Šçš„æˆ¿å­æ—©å·²ç ´è´¥ä¸å ªï¼Œå¾ˆå¤šå¹´æ²¡æœ‰å›å»äº†ã€‚æˆ¿å­çš„å‘¨å›´ä¾ç„¶æœ‰å¯†å¯†çš„æ¾æ ‘ï¼Œæœ‰å¼€æ»¡èŠ±çš„å„ç§æ¤ç‰©ã€‚ä¸è¿‡ï¼Œé™¢é‡Œçš„é‚£é¢—æ ¸æ¡ƒæ ‘æ—©å·²æ¯æ­»ï¼Œé—¨ä¸Šé¢æ˜¯ä¸€æŠŠå¸ƒæ»¡é“é”ˆçš„é”ã€‚é”ä½äº†æˆ‘å…³äºè¿™é‡Œçš„æ‰€æœ‰è®°å¿†ã€‚å†ä¹Ÿæ²¡æœ‰äººæ¥è¿‡ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘æ”¾å‡å›å»çœ‹å¥¹ï¼Œå¥¹æ€»æ˜¯å¿™ç€ç»™æˆ‘å¡å„ç§å¥½åƒçš„ä¸œè¥¿ã€‚é—®æˆ‘åœ¨å“ªé‡Œå¿µä¹¦ï¼Œæˆ‘å¤§å“¥åœ¨å“ªé‡Œå·¥ä½œï¼Œé—®æˆ‘åœ¨å­¦æ ¡è¿‡å¾—æ€ä¹ˆæ ·ã€‚æ¯æ¬¡è·Ÿå¥¹è¯´éƒ½è®°ä¸ä½ã€‚å¥¹è€³æœµä¸å¤§å¥½ä½¿ï¼Œä¸€å¥è¯è¦å¤§å£°çš„è¯´å¾ˆå¤šéå¥¹æ‰èƒ½å¬å¾—è§ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘å¦ˆè¯´å¤–å©†è¿˜å·å·çš„å‘å¥¹å‘ŠçŠ¶ï¼Œè¯´å°å¥³å„¿åˆè¯´å¥¹è¿™æ ·é‚£æ ·äº†ï¼Œå¥¹è¦èµ°ï¼Œå»äºŒå¥³å„¿å®¶ä½å»ã€‚åƒä¸ªå°å­©å­ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ã€‚ã€‚ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;åªæ˜¯ï¼Œæˆ‘æ°¸è¿œè§ä¸åˆ°å¥¹äº†ã€‚&lt;&#x2F;p&gt;
</content>
    </entry>
    <entry xml:lang="en">
        <title>æµ·è¾¹çš„å¡å¤«å¡</title>
        <published>2016-01-02T13:53:13+08:00</published>
        <updated>2016-01-02T13:53:13+08:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://chaojie.fun/articles/hai-bian-de-qia-fu-qia/" type="text/html"/>
        <id>https://chaojie.fun/articles/hai-bian-de-qia-fu-qia/</id>
        <content type="html">&lt;p&gt;â€œã€Šæµ·è¾¹çš„å¡å¤«å¡ã€‹è¯»å®Œäº†å—ï¼Ÿâ€ä¸­ç”°è½¬è¿‡èº«ï¼Œæ‹¿å‡ºéšèº«å¸¦ç€çš„é¢åŒ…ï¼Œå’¬äº†ä¸€å£è¯´åˆ°ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;â€œè¯»å®Œäº†ã€‚èŠ±äº†åŠä¸ªå­¦æœŸçš„æ—¶é—´ã€‚â€&lt;&#x2F;p&gt;
&lt;p&gt;â€œæ€ä¹ˆè¦é‚£ä¹ˆä¹…ã€‚â€&lt;&#x2F;p&gt;
&lt;p&gt;â€œæƒ­æ„§ã€‚â€&lt;&#x2F;p&gt;
&lt;p&gt;â€œä¸­ç”°æˆ‘ä¸è¯†å­—ï¼Œæœ€ç¾¡æ…•ä½ ä»¬è¿™äº›èƒ½è¯†å­—çš„ã€‚æˆ‘è„‘å­ä¸å¤§å¥½ä½¿ï¼Œæƒ³é€šè¿‡è¯»ä¹¦æ¥è·å–çŸ¥è¯†çš„é€”å¾„ä¹Ÿç»™æ–­äº†ã€‚â€&lt;&#x2F;p&gt;
&lt;p&gt;â€œè¿™æ ·ä¹Ÿå¥½ã€‚åƒæˆ‘ä»¬è¿™äº›è¯†ç‚¹å­—çš„äººï¼Œå¥½å¤šå´æ˜¯ä¸æ€ä¹ˆè¯»ä¹¦çš„ã€‚â€æˆ‘è¯´é“ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä¸­ç”°æ²¡æœ‰è¯´è¯ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä¸‰å¹´å‰æ•…ä¹¡çš„è€æ§æ ‘ä¸‹ï¼Œä¸­ç”°è¯´æƒ³å’Œæˆ‘ä¸€èµ·å»å¤–åœ°è¯»ä¹¦ï¼Œé‚£å¤©çš„å¤•é˜³å¾ˆçº¢ï¼Œä¸­ç”°çªç„¶å†’å‡ºæ¥å’Œæˆ‘è¯´è¿™å¥è¯çš„æ—¶å€™ï¼Œæˆ‘è¿˜åœ¨æ—è¾¹å¸®å¿™æ‹†å®¶é‡Œçš„è€æˆ¿å­ï¼Œä¸€ç –ä¸€ç –çš„ä»å¢™ä¸Šæ‹†ä¸‹ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘ç­”åº”äº†ä»–ã€‚ä¸è¿‡ï¼Œä¸­ç”°å…¶å®æ²¡å¿…è¦å’Œæˆ‘è¯´é‚£æ ·çš„è¯ã€‚éœ€è¦çš„æ—¶å€™ï¼Œæ— è®ºåœ¨å“ªé‡Œï¼Œä»–æ€»ä¼šå‡ºç°ï¼Œç„¶ååœ¨ä½ çš„å¤´ä¸Šé£˜æ¥é£˜å»ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;è¯´æ¥ä¹Ÿæ€ªï¼Œæˆ‘åå…«å²é«˜è€ƒçš„é‚£å¤©ï¼Œä¸­ç”°å°±ç«™åœ¨çª—å¤–ã€‚ä»–æ—è‹¥æ— äººçš„èµ°è¿›æ¥ï¼Œæ‹¿èµ·æˆ‘çš„è¯•å·æ’•å¾—ç²‰ç¢ï¼Œå¹¶æ²¡æœ‰äººé˜»æ­¢ï¼Œç„¶åæˆ‘å°±åœ¨é‚£å¤©ä¸‹åˆçš„æ•°å­¦è€ƒåœºä¸Šè«åå…¶å¦™çš„é…£ç„¶å¤§ç¡ï¼Œç­‰æˆ‘é†’æ¥çš„æ—¶å€™ï¼Œå¤©ä¸Šçš„æ˜Ÿæ˜Ÿå·²ç»å‡ºç°äº†å¤§ç‰‡ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘ä¸çŸ¥é“å‘ç”Ÿäº†ä»€ä¹ˆã€‚ä¸è¿‡ï¼Œé‚£å¤©ä¸‹åˆï¼Œç¡åœ¨æˆ‘ä¸Šé“ºçš„ç”°æ‘å¡å¤«å¡å›åœ¨å…­å±‚æ¥¼çš„é«˜åº¦ä¸€è·ƒè€Œä¸‹ã€‚æ¶ˆæ¯è¢«å­¦æ ¡å°é”äº†ï¼Œä¸‰å¹´åçš„é«˜ä¸­åŒå­¦èšä¼šä¸Šæˆ‘æ‰å¬è¯´è¿™ä»¶äº‹ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ‰“è¿™èµ·ï¼Œä¸­ç”°å°±åœ¨æˆ‘çš„ç”Ÿå‘½ä¸­æ‚„ç„¶è€Œè‡³ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘å¤§å­¦çš„æ—¶å€™æ¥åˆ°äº†å—æ–¹çš„ä¸€åº§å¾ˆå°çš„åŸå¸‚ï¼Œå’Œä¸­ç”°ä¸€èµ·åœ¨ç«è½¦ä¸Šè¾¹åƒè¾¹ç¡ï¼Œä¸€è·¯é¢ ç°¸çš„æ¥å­¦æ ¡æŠ¥åˆ°ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å’Œä¸­ç”°è¯´èµ·è¿™äº›è¿‡å¾€çš„äº‹ï¼Œä»–ä¹Ÿåªæ˜¯ç¬‘ç¬‘ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;â€œè¿‡å»çš„äº‹æƒ…å°±ä¸è¦å†æäº†ã€‚ä¸­ç”°æˆ‘è„‘å­ç¬¨ï¼Œè®°ä¸å¾—é‚£äº›ä»¥å‰çš„äº‹ã€‚â€ä¸­ç”°è¯´ç€é£˜åˆ°æˆ‘é¢å‰ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;â€œå¾—ã€‚ä½ å€’æ˜¯å¿˜çš„ç—›å¿«ã€‚â€æˆ‘è¯´é“ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘è½¬è¿‡èº«å»æ‹¿æ”¾åœ¨æ¡Œä¸Šçš„æµ…è“è‰²æ°´æ¯ï¼Œä¸­ç”°æ²¡è¯´ä¸€å£°çš„æ¶ˆå¤±äº†ã€‚æˆ‘ä¸€ç›´æ€€ç–‘è‡ªå·±åœ¨åšä¸€ä¸ªå¾ˆé•¿çš„æ¢¦ï¼Œé•¿åˆ°æˆ‘ç”šè‡³æ€€ç–‘è¿™æ˜¯ä¸æ˜¯ä¸€ä¸ªæ¢¦ã€‚å¯æ˜¯ä¸­ç”°å–œæ¬¢é£˜æ¥é£˜å»è¿™ä¸€ç‚¹ï¼Œç¡®æ˜¯å®å®åœ¨åœ¨å­˜åœ¨ç€ã€‚æœ‰æ—¶å€™ä»–å–œæ¬¢é£˜åœ¨æ ‘ä¸Šï¼Œæœ‰æ—¶å€™å°±é£˜åœ¨æ²³é‡Œï¼Œæœ‰æ—¶å€™å´ä¸€ç›´é£˜åœ¨å…­å±‚æ¥¼çš„çª—æˆ·ä¸Šã€‚æ˜¯æ¢¦ä¹Ÿç½¢ï¼Œæˆ‘æƒ³ï¼Œæ€»æ¯”ç°å®è¦å¥½ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;â€œå–‚å–‚ï¼Œæ€ä¹ˆåˆåœ¨å‘å‘†ã€‚â€å¥¥å¨å°”åœ¨æˆ‘çœ¼å‰æŒ¥äº†æŒ¥æ‰‹ï¼Œæ‹›å‘¼æˆ‘ä¸‹å»åƒé¥­ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å“¦ï¼Œåƒé¥­ã€‚ä¸Šä¸€æ¬¡åƒé¥­æ˜¯ä»€ä¹ˆæ—¶å€™æ¥ç€ï¼Ÿè¿™æ—¶å€™ï¼Œæˆ‘æ‰å‘ç°è‡ªå·±å·²ç»å¥½ä¹…æ²¡æœ‰åƒé¥­ï¼Œæ²¡æœ‰ç¡è§‰äº†ã€‚æˆ‘æ€•æ˜¯ç–¯äº†ã€‚æˆ‘å¸¸å¸¸èººåœ¨é©¬è·¯ä¸Šï¼Œè¿˜å–œæ¬¢åœ¨ä¸‹é›¨çš„æ—¶å€™å¥”è·‘ï¼Œåœ¨å¤§å†¬å¤©ç©¿ç€Tæ¤ï¼Œæˆ‘å–œæ¬¢èµ°åˆ°ä¸ƒæ¥¼é¡¶ä¸Šæ•£æ­¥ï¼Œå–œæ¬¢æŒ‚åœ¨æ ‘ä¸Šï¼Œä¹Ÿæ—¶ä¸æ—¶çš„ä¼šå‘†åœ¨æ²³é¢ä¸Šã€‚æˆ‘æƒ³æˆ‘æ€•æ˜¯ç–¯äº†ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å½“æˆ‘æ„è¯†åˆ°è¿™ä¸€ç‚¹åï¼Œæˆ‘è·Ÿåˆ«äººè¯´æˆ‘æ˜¯ä¸ªç–¯å­ï¼Œä»–ä»¬éƒ½ä¸ä¿¡ï¼Œè¿˜å‘Šè¯‰æˆ‘å»ç²¾ç¥ç—…é™¢çœ‹çœ‹ã€‚å¯ä»–ä»¬éƒ½ä¸ç›¸ä¿¡æˆ‘æ˜¯ä¸ªç–¯å­ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;è§æˆ‘æ²¡è¯´è¯ï¼Œå¥¥å¨å°”å¹äº†å£æ°”ç‹¬è‡ªä¸€äººä¸‹å»åƒé¥­äº†ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘å¬ç€å®‹å†¬é‡çš„ã€Šå…­å±‚æ¥¼ã€‹ï¼Œåˆçœ‹äº†çœ‹ç”µè„‘å³ä¸Šè§’æ–‡ç¨¿å­—æ•°åé¢çš„æ•°å­—ï¼Œ1033ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;â€œå†™åˆ°ä¸€åƒå­—äº†ä¸­ç”°ã€‚ä¸è¿‡ï¼Œç”¨æµ·è¾¹çš„å¡å¤«å¡è¿™ä¸ªæ ‡é¢˜æ€»æ„Ÿè§‰æœ‰äº›æ¬ å¦¥ã€‚â€&lt;&#x2F;p&gt;
&lt;p&gt;â€œæ²¡ä»€ä¹ˆå¦¥ä¸å¦¥çš„ï¼Œæ‘ä¸Šå…ˆç”Ÿä¸ä¼šåœ¨æ„è¿™äº›çš„ã€‚å†è¯´ï¼Œä½ å†™äº†è¿™ä¹ˆå¤šä¹Ÿç™½å†™ï¼Œè¿˜ä¸æ˜¯è‡ªå·±çœ‹ã€‚â€ä¸­ç”°å¯¹æˆ‘è¯´é“ã€‚&lt;&#x2F;p&gt;
</content>
    </entry>
    <entry xml:lang="en">
        <title>å…ƒæ—¦éšæ„Ÿ</title>
        <published>2016-01-01T11:19:00+08:00</published>
        <updated>2016-01-01T11:19:00+08:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://chaojie.fun/articles/yuan-dan-sui-gan/" type="text/html"/>
        <id>https://chaojie.fun/articles/yuan-dan-sui-gan/</id>
        <content type="html">&lt;p&gt;æ˜¨å¤©æ™šä¸Šåšäº†ä¸€åœºæƒŠå¿ƒåŠ¨é­„çš„å…³äºæŠµæŠ—å·¨è™«å…¥ä¾µçš„æ¢¦ï¼Œå…·ä½“ç»†èŠ‚è®°ä¸å¤§æ¸…æ¥šï¼Œé‚£åœºæˆ˜å½¹ä¸­ï¼Œæˆ‘æ‰€åœ¨çš„æ‘åº„è¢«æ¯ç­ã€‚ç„¶åæˆ‘å°±åœ¨å…«ç‚¹å¤šçš„æ—¶å€™æƒŠé†’ï¼Œå”å˜˜ä¸å·²ã€‚2016 å¹´ 1 æœˆ 1 æ—¥ï¼Œåå…«å²çš„æˆ‘å› æŠµå¾¡å¤–æ•Œå…¥ä¾µç«‹ä¸‹èµ«èµ«æˆ˜åŠŸï¼Œåœ¨æ¢¦é‡Œæˆä¸ºè‹±é›„ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;çœ‹äº†ä¸€çœ¼æ—¶é—´ï¼Œ8 ç‚¹ 23 åˆ†ã€‚æ¥ç€æ‹¿å‡ºæ‰‹æœºï¼Œå‘å‡ºä»Šå¹´ç¬¬ä¸€æ¡ä¹Ÿæ˜¯å”¯ä¸€ä¸€æ¡çš„æ–°å¹´ç¥ç¦ã€‚èµ·åºŠåˆ·ç‰™æ´—è„¸ï¼Œä¸€åˆ‡å°½ç„¶æœ‰åºã€‚&lt;&#x2F;p&gt;
&lt;p&gt;â€œå•Šå“ˆï¼Œå…ƒæ—¦å¿«ä¹ã€‚â€æˆ‘è¿™æ ·å†™åˆ°ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å…¶å®ä¹Ÿæ²¡æœ‰ä»€ä¹ˆå¯ä»¥å†™çš„ã€‚2015 å¹´æˆ‘å¤§ä¸‰ï¼Œçœ‹ç€åŒé¾„äººä»–ä»¬çš„ç»å†ï¼Œå¬è¿‡æ¥äººè®²ä»–ä»¬çš„æ•…äº‹ã€‚å¯¹æœªæ¥çš„è¿½æ±‚æ²¡å˜ï¼Œå¯¹äººç”Ÿçš„è§„åˆ’æ²¡å˜ï¼Œè€ƒç ”çš„å†³å®šæ²¡å˜ï¼Œä»¥åä»äº‹çš„æ–¹å‘æ²¡å˜ã€‚çˆ±è²æ¹–ä¸Šçš„è·èŠ±ä¸è¿‡æ˜¯å¼€äº†å†è°¢ï¼Œè´¥äº†åˆå¼€ã€‚è¿™å°±æ˜¯å…‰é˜´ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘åŠªåŠ›è¿½æ±‚ä¸Šè¿›ï¼Œæ¸´æœ›æ”¹å˜å“ªæ€•ä¸€ä¸ç‚¹çš„ç°çŠ¶ï¼Œå´å¸¸å¸¸æ˜¯åŠ›ä¸ä»å¿ƒä¸ºå¤šã€‚ã€Šè¿™ä¸ªæ€æ‰‹ä¸å¤ªå†·ã€‹ä¸­ï¼Œç›è’‚å°”å¾·æ‰¬èµ·è„¸é—®è±æ˜‚â€œäººç”Ÿæ€»æ˜¯é‚£ä¹ˆç—›è‹¦å—ï¼Ÿè¿˜æ˜¯åªæœ‰å°æ—¶å€™æ˜¯è¿™æ ·ï¼Ÿ ã€‚â€è±æ˜‚å›é“â€œæ€»æ˜¯å¦‚æ­¤ã€‚â€ä¹Ÿè®¸ç°å®å°±æ˜¯è¿™æ ·ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘å’Œä»å‰ä¸€æ ·ï¼Œç¼–ç¨‹ã€è¯»ä¹¦ã€ä¸€ä¸ªäººåº¦è¿‡ã€‚å»å¹´å›æ ¡çš„ç«è½¦ä¸Šï¼Œé‚£å¤©æ˜¯æˆ‘ç”Ÿæ—¥ï¼Œæˆ‘å†™ä¸‹â€œä»ä»Šå¤©èµ·ï¼Œæˆ‘ 20 å²ï¼Œè¿™æ˜¯æˆ‘ä¸€ç”Ÿçš„é»„é‡‘æ—¶ä»£ã€‚â€æˆ‘æ›¾ç»æ— æ•°æ¬¡çš„æƒ³è¿‡è‡ªå·±åœ¨äºŒåå¤šå²çš„æ—¶å€™ä¼šå˜æˆä»€ä¹ˆæ ·ï¼Œå½“å®ƒæ¥ä¸´çš„æ—¶å€™ï¼Œä¸çŸ¥ä¸è§‰å·²æ¶ˆé€ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æš‘å‡çš„æ—¶å€™ï¼Œä¸€ä¸ªäººåœ¨ç§Ÿæ¥çš„æˆ¿å­é‡Œï¼Œé»‘ç™½é¢ å€’ï¼Œæåº¦é¢“åºŸï¼Œæ¯å¤©æ•²ç€ä»£ç ï¼Œæ­»æœŸå°†è‡³ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä½ çŸ¥é“èŒ´é¦™è±†çš„èŒ´å­—æœ‰å››ç§å†™æ³•å—ï¼Ÿå­”ä¹™å·±è¿™æ ·è¯´åˆ°ã€‚æ—è¾¹çš„é…’å®¢å°±å¼€å§‹å˜²ç¬‘ä»–ï¼Œåˆè¢«æ‰“äº†ï¼Œè‚¯å®šæ˜¯åˆå·äº†åˆ«äººå®¶çš„ä¹¦å§ã€‚ä»–æ›¾ç»æ˜¯ä¸€ä¸ªä¹¦ç”Ÿï¼Œå¦‚ä»Šç©·å›°æ½¦å€’ã€‚å¹´å²è¶Šé•¿ï¼Œè¶Šå¼€å§‹æ€€ç–‘è¿™äº›å¹´æ‹¼å‘½å­¦ä¹ çš„æ„ä¹‰ï¼Œä¹Ÿè®¸ï¼Œæˆ‘éœ€è¦ä¸€ä¸ªé€å½»çš„ç†ç”±æ¥è¯´æœè‡ªå·±ã€‚è¿™å¤§æ¦‚ä¸å…¨éƒ½æ˜¯æˆ‘çš„é”™ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;çœ‹ç€å‘¨å›´çš„äººæ‹¼å‘½äº‰å–å„ç§åé¢ï¼Œè¶‹ä¹‹è‹¥é¹œã€‚æˆ–è€…æ˜¯èµ¶é¸­å­ä¸Šæ¶ï¼ŒæŠ¥åå„ç§åŸ¹è®­ç­ã€‚æˆ‘ä¸ç¦æ€€ç–‘è‡ªå·±å¤§å­¦è¿™ä¸‰å¹´æ¥å¹²è¿‡çš„äº‹ï¼Œè¿™éš¾é“å°±æ˜¯æˆ‘ä»¬çš„ç»“å±€ï¼Œåƒå–æ‹‰æ’’ç¡ï¼Œç„¶ååœ¨æ¯•ä¸šçš„æ—¶å€™è·Ÿä¸€è·Ÿå¤§æµã€‚æˆ‘æ€èƒ½è¿™æ ·è¿‡æ´»ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;è®¸å¤šäººåœ¨äºŒåå¤šå²å°±æ­»äº†ï¼Œä¸ƒåå¤šå²æ‰å…¥åœŸä¸ºå®‰ã€‚æˆ‘ä¸æ„¿è¿™æ ·ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;2016 å¹´çš„ç¬¬ä¸€å¤©ï¼Œæˆ‘çœ‹å®Œä¸¤éƒ¨ç”µå½±ï¼Œå‘ä¸Šèµ°åˆ°ä¸ƒæ¥¼é¡¶çš„å¤©å°ï¼Œæ‹¾èµ·å è½åœ¨æ­¤çš„å­”æ˜ç¯ï¼Œçœ‹äº†çœ‹å†™åœ¨ä¸Šé¢çš„ç¥ç¦äº²äººå¹³å®‰çš„è¯è¯­ï¼Œæ”¾å›åŸå¤„ã€‚æ˜¨å¤©æ™šä¸Šï¼Œå®ƒä»¬æ›¾ç…§äº®äº†æ•´ä¸ªæ ¡å›­çš„ä¸Šç©ºã€‚è¿™æ˜¯å½’å®¿ã€‚å°±åƒé±¼ç»ˆç©¶è¦å¾…åœ¨æ°´é‡Œï¼Œç«ç»ˆç©¶ä¼šç†„ç­ï¼Œè¿™å°±æ˜¯å½’å®¿ã€‚æ¯ä¸€ä¸ªäººéƒ½è¦æœ‰å½’å®¿ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä½ åšå¥½æ–°ä¸€å¹´çš„æ‰“ç®—äº†å—ï¼Ÿæ€•æ˜¯æ²¡æœ‰ã€‚ä¹Ÿç½¢ï¼Œæ—¶ä»£çš„æ´ªæµç»ˆç©¶ä¼šè£¹æŒŸç€æ¯ä¸€ä¸ªäººå‘å‰èµ°ç€ï¼Œç”±ä¸å¾—è‡ªå·±ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;åœ¨å¿ƒé‡Œï¼Œæˆ‘å¸Œæœ›æˆä¸ºè‡ªå·±çš„è‹±é›„ï¼Œæ‹…è´Ÿèµ·è¯¥æœ‰çš„è´£ä»»ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;è®°å¾—è‚–ç”³å…‹çš„æ•‘èµä¸­æœ‰è¿™æ ·ä¸€å¥è¯ï¼Œæœ‰äº›é¸Ÿç»ˆç©¶æ˜¯å…³ä¸ä½çš„ï¼Œå®ƒä»¬çš„æ¯ä¸€ç‰‡ç¾½æ¯›ä¸Šéƒ½æ²¾æ»¡äº†å¤ªé˜³çš„å…‰è¾‰ã€‚&lt;&#x2F;p&gt;
</content>
    </entry>
    <entry xml:lang="en">
        <title>åƒæ‰å›¾ä¹¦é¦†</title>
        <published>2015-09-24T11:19:00+08:00</published>
        <updated>2015-09-24T11:19:00+08:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://chaojie.fun/articles/chi-diao-tu-shu-guan/" type="text/html"/>
        <id>https://chaojie.fun/articles/chi-diao-tu-shu-guan/</id>
        <content type="html">&lt;p&gt;åœ¨æœ±é€¸ä¹‹çœ¼é‡Œï¼Œå›¾ä¹¦é¦†æ˜¯ä¸€å—é£Ÿç‰©ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä½ ä¸è¦æ„Ÿåˆ°æƒŠè®¶ã€‚å†°æ²³çºªå·²ç»è¿‡å»å¾ˆä¹…äº†ï¼Œä»€ä¹ˆéƒ½å¯ä»¥æˆä¸ºé£Ÿç‰©ã€‚éŸ³ä¹ã€æ„Ÿä¼¤ã€æ•…ä¹¡ï¼Œè¿™äº›éƒ½æ˜¯ã€‚ä¸åŒçš„äººç±»é€‰æ‹©ä¸åŒç§ç±»çš„é£Ÿç‰©ï¼Œå’€åš¼ã€å¸æ”¶ã€æ’æ³„ï¼Œè¿™æ˜¯ä¸€ä¸ªå¿…ç„¶äº‹ä»¶ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ¨æ¢“å¡˜è·¯130å·å¤§é™¢ï¼Œé™¢é‡Œæœ‰ä¸€ç‰‡ç©ºåœ°ï¼Œå›¾ä¹¦é¦†åœ¨ç”Ÿé•¿ã€‚è¿™é‡Œçš„æ—¶é—´æ˜¯é™æ­¢çš„ï¼Œ500å¹´ä¼šåå¡Œæˆä¸€ä¸ªç‚¹ã€‚æœ±é€¸ä¹‹åœ¨é‚£å¤©å¤œé‡Œè·¯è¿‡ï¼Œç©ºæ°”é‡Œæœ‰é£ï¼Œæœ‰å›¾ä¹¦é¦†çš„å‘³é“ã€‚æœ¦æœ¦èƒ§èƒ§ï¼Œä»–å–äº†ç‚¹é…’ï¼Œèº«ä½“é‡Œè¿¸å‘å‡ºä¸€ç§è™šæ— ã€‚è¿™ç§è™šæ— å‡»ä¸­äº†ä»–ï¼Œä»–è¿«åˆ‡çš„éœ€è¦è¿›é£Ÿã€‚&lt;&#x2F;p&gt;
&lt;p&gt;äºæ˜¯é‚£å¤©å¤œé‡Œï¼Œå›¾ä¹¦é¦†å¤–é¢çš„ä¸€äº›é¸Ÿç±»ï¼Œå¤§å£°åš·åš·ï¼Œâ€œå¿«æ¥çœ‹å‘ï¼Œè¿™é‡Œå°‘äº†ä¸€å—è§’â€ã€‚è§„åˆ™çš„ç­‰è¾¹ä¸‰è§’å½¢ï¼Œæ˜¯æœ±é€¸ä¹‹åƒæ‰çš„é‚£å—ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;é¸Ÿç±»æ€»æ˜¯åœ¨é£è¿‡è¿™é‡Œçš„æ—¶å€™å¼€å§‹æ€è€ƒï¼Œå®ƒä»¬å¿˜äº†å±•ç¿…ï¼Œåªå¥½åœä¸‹æ¥æŠ±æ€¨ã€‚æ‰€æœ‰çš„ç¢³åŸºç”Ÿç‰©ç»è¿‡è¿™é‡Œéƒ½ä¼šé™æ­¢ã€‚è¿™ç§äº‹æƒ…ä¸å¿…åœ¨ä¹ï¼Œä½ åªéœ€è®°ä½ï¼Œå›¾ä¹¦é¦†éœ€è¦è¢«åƒæ‰ï¼Œè¿™æ˜¯å¤è®­ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;è‡³äºè¢«åƒæ‰çš„é‚£å—è§’ï¼Œç¬¬äºŒå¤©æ—©ä¸Šä¾¿ä¼šç”Ÿé•¿ï¼Œç»™å®ƒä¸€ä¸ªæ˜¥å¤©çš„æ—¶é—´ï¼Œå°±åƒæ ‘æ¢¢ä¸Šçš„é‚£äº›å«©èŠ½ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æœ±é€¸ä¹‹èŠ±äº†ä¸‰å¹´çš„æ—¶é—´ï¼Œä»–æƒ³è¦åƒæ‰å›¾ä¹¦é¦†ã€‚åœ¨å››æ¥¼ï¼Œä¸€ä¸ªæ¶ˆå¤±çš„å°æˆ¿é—´ï¼Œé•¿ä¹…çš„ååœ¨é‚£é‡Œï¼Œæ€è€ƒï¼Œè¿›é£Ÿï¼Œå¿˜è®°è‡ªå·±æ˜¯è°ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;â€œå’Œæ—¶é—´èä¸ºä¸€ä½“ã€‚â€&lt;&#x2F;p&gt;
&lt;p&gt;æœ±é€¸ä¹‹è¿™æ ·æé†’è‡ªå·±ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æœ‰äº›äº‹æƒ…è®©äººé—æ†¾ï¼Œæ²¡æœ‰äººèƒ½åƒæ‰å›¾ä¹¦é¦†ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æœ‰äº›äº‹æƒ…è®©äººé—æ†¾ï¼Œæ²¡æœ‰äººèƒ½åƒæ‰å›¾ä¹¦é¦†å°±åƒé€‰æ‹©ä¸¢æ‰æ•…ä¹¡çš„ç¾¤æ—ï¼Œè¿™ç§äº‹æƒ…å¤ªè¿‡è™šæ— ã€‚æœ±é€¸ä¹‹æ·±åˆ»çš„çŸ¥é“è¿™ç‚¹ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;è¿›é£Ÿæœ¬èº«ï¼Œæ›´åƒæ˜¯ä¸€ç§æƒ¯æ€§ã€‚ä½ è¦è®°ä½ï¼Œè™šæ— çš„äººï¼Œè¯·åƒæ‰å›¾ä¹¦é¦†ã€‚&lt;&#x2F;p&gt;
</content>
    </entry>
    <entry xml:lang="en">
        <title>æœ±å’¸é±¼ä¹‹æ­»</title>
        <published>2015-09-14T11:19:00+08:00</published>
        <updated>2015-09-14T11:19:00+08:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://chaojie.fun/articles/zhu-xian-yu-zhi-si/" type="text/html"/>
        <id>https://chaojie.fun/articles/zhu-xian-yu-zhi-si/</id>
        <content type="html">&lt;p&gt;ç °çš„ä¸€å£°ä¼ æ¥å·¨å“ï¼Œåœ¨å¤æ—¥çš„æŸä¸ªæ¸…æ™¨ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ˜”æ—¥å®‰é™çš„æ¾å›­å…¬å¯“éœæ—¶çƒ­é—¹äº†èµ·æ¥ã€‚â€œå¿«æ¥çœ‹å‘ï¼Œæœ‰äººè·³æ¥¼äº†ã€‚â€äººä»¬çº·çº·é©»è¶³ï¼Œè®®è®ºï¼Œæ‹ç…§ç•™å¿µã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ­»è€…æ˜¯æœ±å’¸é±¼ï¼Œä»–ä»å…­å±‚æ¥¼çš„é«˜å¤„è·³ä¸‹ï¼Œé²œè¡€æ·Œæˆä¸€åªé¸Ÿçš„å½¢çŠ¶ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;è¿™æˆäº†æ ¡å›­é‡Œçš„ä¸€å¤§è¶£äº‹ã€‚ä»–ä»¬è¯´æµå‡ºçš„è¡€ä¸€å¼€å§‹è¿˜æ˜¯æ²³æµçš„å½¢çŠ¶ï¼Œä¹‹åæ…¢æ…¢çš„èšæ‹¢ï¼Œä»”ç»†ä¸€çœ‹ï¼Œç«Ÿæ˜¯ä¸€åªé¸Ÿã€‚&lt;&#x2F;p&gt;
&lt;p&gt;666å®¤ä»æ­¤è¢«å°é”ï¼Œè¿™æ˜¯æœ±å’¸é±¼è·³ä¸‹çš„åœ°æ–¹ã€‚ä»é‚£é‡Œå¯ä»¥çœ‹åˆ°æ ¡å›­ä¸­çš„æ¹–ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä»–ä¸è¿‡æ˜¯å¤šçœ‹äº†ä¸€çœ¼æ¹–æ°´è€Œå·²ï¼Œæ¹–æ°´å¤ªæµŠã€‚ä»–æä¸æ˜ç™½äººä»¬ä¸ºä»€ä¹ˆè¦ç»•ç€æ¹–èµ°ï¼Ÿä¸åº”è¯¥è¸©ç€æ¹–æ°´è€Œè¡Œå—ï¼Ÿä¸ºä»€ä¹ˆæ²¡æœ‰é±¼ï¼Ÿå¦‚æœæœ‰äº†é±¼ï¼Œä¼šä¸ä¼šä¹Ÿä½ç€é¸Ÿï¼Ÿæ¹–ä¸Šåˆ’èˆ¹çš„äººå‘¢ï¼Ÿè¯¥ä¸è¯¥æ”¾ä¸€æŠŠç«ï¼Œç‚¹ç‡ƒæ¹–æ°´ï¼Ÿ&lt;&#x2F;p&gt;
&lt;p&gt;è¿™äº›é—®é¢˜åœ¨ä»–çš„è„‘è¢‹ä¸­èµ¤èº«è£¸ä½“ï¼Œè‡ªç”±å¥”æ”¾ï¼Œç„¶åç‚¸è£‚ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å®‡å®™å¤§çˆ†ç‚¸ä¹‹åˆçš„é‚£ä¸ªå•æ ¸ç»†èƒä¹Ÿå¸¸å¸¸è¿™æ ·æ€è€ƒã€‚ä»ç”Ÿå‘½èµ·æºåˆ°å®‡å®™æ¶ˆäº¡ï¼Œå·¥ä¸šé©å‘½ï¼Œå®‹å…ƒæ˜æ¸…ï¼Œå¾ªç¯å¾€å¤ã€‚æ€»æœ‰äººä¼šè¿™æ ·æ€è€ƒã€‚&lt;&#x2F;p&gt;
&lt;p&gt;è¿™ä»¶äº‹æƒŠåŠ¨äº†å‘¨å›´æ‰€æœ‰çš„é¸Ÿç±»ã€‚æœ±å’¸é±¼æ˜¯å”¯ä¸€ä¼šè¯´é¸Ÿè¯­çš„äººã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä¸è¿‡ï¼Œäººä»¬éƒ½ä¸å–œæ¬¢èƒ¡æ€ä¹±æƒ³è¿˜è¯´ç€é¸Ÿè¯­çš„å’¸é±¼ã€‚ä»–ä»¬åªæ˜¯å–åŒæ ·çš„æ°´ï¼ŒåƒåŒæ ·çš„å¤§ç±³ï¼Œè¯´åŒæ ·æ— èŠçš„è¯ï¼Œå’Œåˆ«äººåšåŒæ ·çš„äº‹ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;é™¤äº†é‚£äº›é¸Ÿã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å’Œé‚£äº›é¸Ÿè¯´è¯ï¼Œè¿™æ˜¯ä»–æœ€å¤§çš„çˆ±å¥½ã€‚å½å½å–³å–³ï¼Œæ²¡å®Œæ²¡äº†ã€‚å¦‚æœæ•°é‡è¶³å¤Ÿå¤šçš„è¯ï¼Œå°±è¯´æˆäº†ç™¾é¸Ÿæœå‡¤ï¼Œè¿™æ˜¯æœ€æœ‰è¶£çš„å¯¹è¯ã€‚æœ±å’¸é±¼å–œæ¬¢æœ‰è¶£ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;é‚£å¤©æ™šä¸Šï¼Œä»–èµ·èº«å»å•æ‰€ã€‚çœ‹åˆ°è®¸å¤šåªé¸Ÿåœ¨æ¹–ä¸­å¤®ç›˜æ—‹ï¼Œæœ±å’¸é±¼å’Œä»–ä»¬è¯´è¯ï¼Œé¸Ÿåªæ˜¯å½å½å–³å–³ã€‚ä»–åŠªåŠ›å»å¬ï¼Œä¹Ÿåªå¬åˆ°å½å½å–³å–³ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä»–å’Œé¸Ÿäº§ç”Ÿäº†éš”é˜‚ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æœ±å’¸é±¼åœ¨é˜³å°ä¸Šåäº†ä¸€æ•´å¤œï¼Œåªç©¿ä¸€æ¡è£¤è¡©ï¼Œä¸€ç›´åˆ°æ¸…æ™¨7ç‚¹ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ²¡æœ‰äººçŸ¥é“ä»–ä¸ºä»€ä¹ˆä¼šæ­»ã€‚é™¤äº†ç¬¬äºŒå¤©æ—©ä¸Šï¼Œæ¨æ¢“å¡˜é‚£æ¡è¡—å †æ»¡äº†é¸Ÿçš„å°¸ä½“ï¼Œæ•£å‘ç€é˜µé˜µæ¶è‡­ã€‚&lt;&#x2F;p&gt;
</content>
    </entry>
</feed>
